System.register(["./chakra-legacy-CdrRuVce.js","./react-legacy-hZgLs8_m.js"],(function(e,t){"use strict";var n,i,o,r,a,s,l,u,c,d,h,p,f,g,m,y,v,x,w,b,S,N,C,O,P,j,k,A,R,L,z,_,E,I,M,T,D,$,V,W,F,X,B,U,H,Y,q,G,K,J,Q,Z,ee,te,ne,ie,oe,re,ae,se,le,ue,ce,de,he,pe,fe,ge,me,ye,ve,xe,we,be,Se,Ne,Ce,Oe,Pe,je,ke,Ae,Re,Le,ze,_e,Ee,Ie,Me,Te;return{setters:[e=>{n=e.u,i=e.a,o=e.j,r=e.P,a=e.c,s=e.F,l=e.f,u=e.W,c=e.T,d=e.b,h=e.d,p=e.e,f=e.g,g=e.h,m=e.B,y=e.D,v=e.i,x=e.k,w=e.l,b=e.m,S=e.C,N=e.S,C=e.n,O=e.o,P=e.p,j=e.I,k=e.q,A=e.r,R=e.s,L=e.t,z=e.v,_=e.w,E=e.x,I=e.y,M=e.z,T=e.A,D=e.M,$=e.E,V=e.G,W=e.H,F=e.J,X=e.K,B=e.L,U=e.N,H=e.O,Y=e.Q,q=e.R,G=e.U,K=e.V,J=e.X,Q=e.Y,Z=e.Z,ee=e._,te=e.$,ne=e.a0,ie=e.a1,oe=e.a2,re=e.a3,ae=e.a4,se=e.a5,le=e.a6,ue=e.a7,ce=e.a8,de=e.a9,he=e.aa,pe=e.ab,fe=e.ac,ge=e.ad,me=e.ae,ye=e.af,ve=e.ag,xe=e.ah,we=e.ai,be=e.aj,Se=e.ak,Ne=e.al},e=>{Ce=e.e,Oe=e.a,Pe=e.d,je=e.f,ke=e.h,Ae=e.i,Re=e.j,Le=e.k,ze=e.u,_e=e.l,Ee=e.m,Ie=e.n,Me=e.P,Te=e.I}],execute:function(){e({G:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)},H:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"},child:[]}]})(e)},K:function(e){var t=e.environment,n=e.version,i=e.popoverHeader,r=e.popoverBody,a=eo(Oe.useState(!1),2),s=a[0],l=a[1];return o.jsxs(p,{isOpen:s,onOpen:function(){return i&&l(!0)},onClose:function(){return l(!1)},children:[o.jsx(L,{children:o.jsx(z,{ml:1,colorScheme:to(t),title:"".concat(t,": ").concat(n),cursor:i?"pointer":"help",children:t===Fe.PRD?n:t})}),o.jsxs(b,{children:[o.jsx(_,{}),o.jsx(E,{}),o.jsx(I,{children:i}),o.jsx(M,{children:r})]})]})},L:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"},child:[]}]})(e)},M:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(e)},N:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},child:[]}]})(e)},T:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(e)},U:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(e)},a:function(e){var t=e.defaultValue,n=e.options,i=e.disabledOptions,r=xo(e,["defaultValue","options","disabledOptions"]),a=Oe.useRef(null);Oe.useEffect((function(){a.current&&(a.current.value=(null==t?void 0:t.toString())||"")}),[t]);var s=function(e,t){return o.jsx("option",{value:e,disabled:void 0!==(null==i?void 0:i.find((function(t){return t.toString()===e}))),children:t},e)};return o.jsx(ne,vo({ref:a,variant:"flushed",size:"sm",h:6},r,{children:Object.entries(n).map((function(e){var t=wo(e,2),n=t[0],i=t[1];return"object"==typeof i?o.jsx("optgroup",{label:n,children:Object.entries(i).map((function(e){var t=wo(e,2),n=t[0],i=t[1];return s(n,i)}))},n):s(n,i)}))}))},b:Po,l:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)},m:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(e)},o:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(e)},p:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(e)},q:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.17 5 19 9.83V19H5V5h9.17m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9.83c0-.53-.21-1.04-.59-1.41l-4.83-4.83c-.37-.38-.88-.59-1.41-.59zM7 15h10v2H7v-2zm0-4h10v2H7v-2zm0-4h7v2H7V7z"},child:[]}]})(e)},s:function(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6m0-2C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96A7.49 7.49 0 0 0 12 4z"},child:[]}]})(e)}});var De=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(t){r(t)}}function s(e){try{l(i.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};const $e=e=>new Promise((t=>{setTimeout(t,e,`Timeout after ${e/1e3} seconds`)})),Ve=e=>{let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t},We=e=>{const t=(16777215&e).toString(16).toUpperCase();return"#"+"00000".substring(0,6-t.length)+t};var Fe;e("I",Fe),function(e){e.DEV="DEV",e.UAT="UAT",e.PRD="PRD"}(Fe||e("I",Fe={}));const Xe="rmg-runtime__language",Be="rmg-runtime__colourMode",Ue="rmg-runtime__allowAnalytics",He="rmg-unknown";let Ye=He,qe=We(Ve(He));const Ge=()=>`[${Ye}]`,Ke=()=>qe,Je=(e,t,n)=>(...i)=>{"string"==typeof i[0]?e(`%c${t()}%c ${i[0]}`,`color: ${n()}`,"",...i.slice(1)):e(`%c${t()}%c`,`color: ${n()}`,"",...i)},Qe={debug:Je(console.debug,Ge,Ke),info:Je(console.info,Ge,Ke),warn:Je(console.warn,Ge,Ke),error:Je(console.error,Ge,Ke)},Ze=()=>Ye===He?"[runtime]":`[runtime@${Ye}]`,et=We(Ve("runtime")),tt=()=>et,nt={setup:e=>{Ye=e,qe=We(Ve(e))},logger:Qe,debug:Je(console.debug,Ze,tt),info:Je(console.info,Ze,tt),warn:Je(console.warn,Ze,tt),error:Je(console.error,Ze,tt),group:Je(console.group,Ze,tt),groupEnd:console.groupEnd};var it=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(t){r(t)}}function s(e){try{l(i.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};let ot,rt,at,st,lt;const ut=()=>{ot=!1,rt=He,at="unknown",st=Fe.PRD,lt="unknown"},ct=()=>"railmapgen.github.io"===rt;ut();const dt={loadWithTimeout:()=>it(void 0,void 0,void 0,(function*(){try{nt.group("Loading config...");const e=yield Promise.race([it(void 0,void 0,void 0,(function*(){const e=window.location.pathname.split("/")[1],t=e?`/${e}/info.json`:"/info.json",n=yield fetch(t);if(!n.ok)throw new Error(`Failed to fetch config from ${t}`);{const e=yield n.json();nt.info("Received info.json",e),rt=e.component,at=e.version,st=e.environment,lt=e.instance}})),$e(1e4)]);e?nt.error("❌ Failed to load config.",e):(ot=!0,nt.info("✅ Config loaded!"))}catch(e){nt.error("❌ Failed to load config.",e)}finally{nt.groupEnd()}})),isInitialised:()=>ot,getComponent:()=>ct()?"rmg-home":rt,getVersion:()=>at,getEnvironment:()=>st,getInstance:()=>lt,isRMT:ct,_resetConfig:ut};function ht(...e){if(dt.getEnvironment()!==Fe.DEV)return window.dataLayer.push(arguments);nt.info("Not going to send event in DEV environment",e)}window.dataLayer=window.dataLayer||[];const pt={init:()=>{(()=>{const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-2HP8Y4MRRQ",document.head.append(e)})(),ht("js",new Date),ht("config","G-2HP8Y4MRRQ",{appName:dt.getComponent(),version:dt.getVersion(),environment:dt.getEnvironment(),instance:dt.getInstance()})},customEvent:(e,t={})=>{ht("event",e,t)}},ft={};let gt;try{gt=new BroadcastChannel("rmg-runtime-channel"),gt.onmessage=e=>{var t;const{event:n,data:i,frameId:o}=e.data;null===(t=ft[n])||void 0===t||t.forEach((e=>e(i,o)))}}catch(ba){nt.warn("Failed to initiate broadcast channel. Some features may be unavailable.",ba)}const mt={postEvent:(e,t)=>{var n;nt.debug(`Broadcasting event ${e} with data`,t),null==gt||gt.postMessage({event:e,data:t,frameId:null===(n=window.frameElement)||void 0===n?void 0:n.id})},onMessage:(e,t)=>{var n;e in ft?null===(n=ft[e])||void 0===n||n.push(t):ft[e]=[t]}},yt="TOGGLE_NAV_MENU",vt="OPEN_APP",xt="CLOSE_APP",wt="UPDATE_APP_METADATA",bt="UPDATE_URL",St=()=>!window.frameElement,Nt={isStandaloneWindow:St,injectUITools:()=>{if(!St()){const e=document.createElement("style");e.textContent="body{padding: 0;}",document.head.appendChild(e)}const e=document.createElement("style");var t;e.textContent=".rmg-window__header:not(.rmg-window__app-clip-header),.rm-window__header:not(.rm-window__app-clip-header){margin-left: 40px;}",St()||(null===(t=window.frameElement)||void 0===t?void 0:t.closest(".show-menu"))||document.head.appendChild(e),St()||mt.onMessage(yt,(t=>{if(t)try{document.head.removeChild(e)}catch(ba){nt.warn("Unable to remove indent style from RmgWindowHeader",ba)}else document.head.appendChild(e)}))},openApp:e=>{mt.postEvent(vt,e)},onAppOpen:e=>{mt.onMessage(vt,e)},closeApp:e=>{mt.postEvent(xt,e)},onAppClose:e=>{mt.onMessage(xt,e)},updateAppMetadata:e=>{mt.postEvent(wt,e)},onAppMetadataUpdate:e=>{mt.onMessage(wt,e)},updateUrl:e=>{mt.postEvent(bt,e)},onUrlUpdate:e=>{mt.onMessage(bt,e)},toggleNavMenu:e=>{mt.postEvent(yt,e)}},Ct="SET_LANGUAGE",Ot="SET_COLOUR_MODE",Pt=["light","dark","system"],jt=()=>"true"===window.localStorage.getItem(Ue),kt={setLanguage:e=>{mt.postEvent(Ct,e),window.localStorage.setItem(Xe,e)},getLanguage:()=>window.localStorage.getItem(Xe)||"en",onLanguageChange:e=>{mt.onMessage(Ct,e)},setColourMode:e=>{Pt.includes(e)&&(mt.postEvent(Ot,e),window.localStorage.setItem(Be,e))},getColourMode:()=>{const e=window.localStorage.getItem(Be);return t=e,Boolean(t&&Pt.includes(t))?e:"system";var t},onColourModeChange:e=>{mt.onMessage(Ot,e)},isAnalyticsQADone:()=>null!==window.localStorage.getItem(Ue),isAllowAnalytics:jt,allowAnalytics:e=>{const t=jt();return e?(t||(window.localStorage.setItem(Ue,e.toString()),pt.init()),{refreshRequired:!1}):t?(window.localStorage.setItem(Ue,e.toString()),{refreshRequired:!0}):{refreshRequired:!1}}},At=(new Date).getTime(),Rt={getMsSinceStartUp:function(){const e=dt.getComponent(),t=window.localStorage.getItem(e+"__startTime");return null===t?(new Date).getTime()-At:(new Date).getTime()-Number(t)}},Lt={},zt=()=>{const e=dt.getComponent();if(e===He)throw new Error("Unable to clear storage for unknown app");return e};window.addEventListener("storage",(e=>{var t;const{key:n,newValue:i}=e;n&&(null===(t=Lt[n])||void 0===t||t.forEach((e=>e(i))))}));const _t={on:(e,t)=>{var n;const i=`${zt()}__${e}`;i in Lt?null===(n=Lt[i])||void 0===n||n.push(t):Lt[i]=[t]},get:e=>{const t=zt();return window.localStorage.getItem(`${t}__${e}`)},getAll:()=>{const e=zt(),t={};let n=0;for(;n<window.localStorage.length;){const i=window.localStorage.key(n);if(null==i?void 0:i.startsWith(e+"__")){const e=window.localStorage.getItem(i);e&&(t[i]=e)}n++}return t},set:(e,t)=>{const n=zt();window.localStorage.setItem(`${n}__${e}`,t)},remove:e=>{const t=zt();window.localStorage.removeItem(`${t}__${e}`)},clear:()=>{const e=zt();let t=0;for(;t<window.localStorage.length;){const n=window.localStorage.key(t);(null==n?void 0:n.startsWith(e+"__"))?(window.localStorage.removeItem(n),nt.info(`Removed item ${n}`)):t++}}},Et=e=>"string"==typeof e,It=()=>{let e,t;const n=new Promise(((n,i)=>{e=n,t=i}));return n.resolve=e,n.reject=t,n},Mt=e=>null==e?"":""+e,Tt=/###/g,Dt=e=>e&&e.indexOf("###")>-1?e.replace(Tt,"."):e,$t=e=>!e||Et(e),Vt=(e,t,n)=>{const i=Et(t)?t.split("."):t;let o=0;for(;o<i.length-1;){if($t(e))return{};const t=Dt(i[o]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++o}return $t(e)?{}:{obj:e,k:Dt(i[o])}},Wt=(e,t,n)=>{const{obj:i,k:o}=Vt(e,t,Object);if(void 0!==i||1===t.length)return void(i[o]=n);let r=t[t.length-1],a=t.slice(0,t.length-1),s=Vt(e,a,Object);for(;void 0===s.obj&&a.length;)r=`${a[a.length-1]}.${r}`,a=a.slice(0,a.length-1),s=Vt(e,a,Object),s&&s.obj&&void 0!==s.obj[`${s.k}.${r}`]&&(s.obj=void 0);s.obj[`${s.k}.${r}`]=n},Ft=(e,t)=>{const{obj:n,k:i}=Vt(e,t);if(n)return n[i]},Xt=(e,t,n)=>{for(const i in t)"__proto__"!==i&&"constructor"!==i&&(i in e?Et(e[i])||e[i]instanceof String||Et(t[i])||t[i]instanceof String?n&&(e[i]=t[i]):Xt(e[i],t[i],n):e[i]=t[i]);return e},Bt=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Ht=e=>Et(e)?e.replace(/[&<>"'\/]/g,(e=>Ut[e])):e,Yt=[" ",",","?","!",";"],qt=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),Gt=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const i=t.split(n);let o=e;for(let r=0;r<i.length;){if(!o||"object"!=typeof o)return;let e,t="";for(let a=r;a<i.length;++a)if(a!==r&&(t+=n),t+=i[a],e=o[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&a<i.length-1)continue;r+=a-r+1;break}o=e}return o},Kt=e=>e&&e.replace("_","-"),Jt={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Qt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Jt,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,i){return i&&!this.debug?null:(Et(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Qt(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Qt(this.logger,e)}}var Zt=new Qt;class en{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach((e=>{let[t,i]=e;for(let o=0;o<i;o++)t(...n)})),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach((t=>{let[i,o]=t;for(let r=0;r<o;r++)i.apply(i,[e,...n])}))}}class tn extends en{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator,r=void 0!==i.ignoreJSONStructure?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):Et(n)&&o?a.push(...n.split(o)):a.push(n)));const s=Ft(this.data,a);return!s&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),!s&&r&&Et(n)?Gt(this.data&&this.data[e]&&this.data[e][t],n,o):s}addResource(e,t,n,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==o.keySeparator?o.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(r?n.split(r):n)),e.indexOf(".")>-1&&(a=e.split("."),i=t,t=a[1]),this.addNamespaces(t),Wt(this.data,a,i),o.silent||this.emit("added",e,t,n,i)}addResources(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const o in n)(Et(n[o])||Array.isArray(n[o]))&&this.addResource(e,t,o,n[o],{silent:!0});i.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,i,o){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),i=n,n=t,t=a[1]),this.addNamespaces(t);let s=Ft(this.data,a)||{};r.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?Xt(s,n,o):s={...s,...n},Wt(this.data,a,s),r.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var nn={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,i,o){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,i,o))})),t}};const on={};class rn extends en{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i;super(),n=e,i=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((e=>{n[e]&&(i[e]=n[e])})),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=Zt.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let o=t.ns||this.options.defaultNS||[];const r=n&&e.indexOf(n)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,n)=>{t=t||"",n=n||"";const i=Yt.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===i.length)return!0;const o=qt.getRegExp(`(${i.map((e=>"?"===e?"\\?":e)).join("|")})`);let r=!o.test(e);if(!r){const t=e.indexOf(n);t>0&&!o.test(e.substring(0,t))&&(r=!0)}return r})(e,n,i));if(r&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:Et(o)?[o]:o};const r=e.split(n);(n!==i||n===i&&this.options.ns.indexOf(r[0])>-1)&&(o=r.shift()),e=r.join(i)}return{key:e,namespaces:Et(o)?[o]:o}}translate(e,t,n){if("object"!=typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof t&&(t={...t}),t||(t={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const i=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,o=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:r,namespaces:a}=this.extractFromKey(e[e.length-1],t),s=a[a.length-1],l=t.lng||this.language,u=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(u){const e=t.nsSeparator||this.options.nsSeparator;return i?{res:`${s}${e}${r}`,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:`${s}${e}${r}`}return i?{res:r,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:s,usedParams:this.getUsedParamsDetails(t)}:r}const c=this.resolve(e,t);let d=c&&c.res;const h=c&&c.usedKey||r,p=c&&c.exactUsedKey||r,f=Object.prototype.toString.apply(d),g=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,y=!Et(d)&&"boolean"!=typeof d&&"number"!=typeof d;if(!(m&&d&&y&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0)||Et(g)&&Array.isArray(d))if(m&&Et(g)&&Array.isArray(d))d=d.join(g),d&&(d=this.extendTranslation(d,e,t,n));else{let i=!1,a=!1;const u=void 0!==t.count&&!Et(t.count),h=rn.hasDefaultValue(t),p=u?this.pluralResolver.getSuffix(l,t.count,t):"",f=t.ordinal&&u?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",g=u&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),m=g&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${p}`]||t[`defaultValue${f}`]||t.defaultValue;!this.isValidLookup(d)&&h&&(i=!0,d=m),this.isValidLookup(d)||(a=!0,d=r);const y=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:d,v=h&&m!==d&&this.options.updateMissing;if(a||i||v){if(this.logger.log(v?"updateKey":"missingKey",l,s,r,v?m:d),o){const e=this.resolve(r,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const i=(e,n,i)=>{const o=h&&i!==d?i:y;this.options.missingKeyHandler?this.options.missingKeyHandler(e,s,n,o,v,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,s,n,o,v,t),this.emit("missingKey",e,s,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&u?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);g&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{i([e],r+n,t[`defaultValue${n}`]||m)}))})):i(e,r,m))}d=this.extendTranslation(d,e,t,c,n),a&&d===r&&this.options.appendNamespaceToMissingKey&&(d=`${s}:${r}`),(a||i)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${s}:${r}`:r,i?d:void 0):this.options.parseMissingKeyHandler(d))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...t,ns:a}):`key '${r} (${this.language})' returned an object instead of string.`;return i?(c.res=e,c.usedParams=this.getUsedParamsDetails(t),c):e}if(o){const e=Array.isArray(d),n=e?[]:{},i=e?p:h;for(const r in d)if(Object.prototype.hasOwnProperty.call(d,r)){const e=`${i}${o}${r}`;n[r]=this.translate(e,{...t,joinArrays:!1,ns:a}),n[r]===e&&(n[r]=d[r])}d=n}}return i?(c.res=d,c.usedParams=this.getUsedParamsDetails(t),c):d}extendTranslation(e,t,n,i,o){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const a=Et(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let s;if(a){const t=e.match(this.interpolator.nestingRegexp);s=t&&t.length}let l=n.replace&&!Et(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||i.usedLng,n),a){const t=e.match(this.interpolator.nestingRegexp);s<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&i&&i.res&&(n.lng=this.language||i.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return o&&o[0]===i[0]&&!n.context?(r.logger.warn(`It seems you are nesting recursively key: ${i[0]} in key: ${t[0]}`),null):r.translate(...i,t)}),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,s=Et(a)?[a]:a;return null!=e&&s&&s.length&&!1!==n.applyPostProcessor&&(e=nn.handle(s,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,i,o,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Et(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const s=this.extractFromKey(e,a),l=s.key;n=l;let u=s.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const c=void 0!==a.count&&!Et(a.count),d=c&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==a.context&&(Et(a.context)||"number"==typeof a.context)&&""!==a.context,p=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);u.forEach((e=>{this.isValidLookup(t)||(r=e,!on[`${p[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(r)&&(on[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((n=>{if(this.isValidLookup(t))return;o=n;const r=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,n,e,a);else{let e;c&&(e=this.pluralResolver.getSuffix(n,a.count,a));const t=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(r.push(l+e),a.ordinal&&0===e.indexOf(i)&&r.push(l+e.replace(i,this.options.pluralSeparator)),d&&r.push(l+t)),h){const n=`${l}${this.options.contextSeparator}${a.context}`;r.push(n),c&&(r.push(n+e),a.ordinal&&0===e.indexOf(i)&&r.push(n+e.replace(i,this.options.pluralSeparator)),d&&r.push(n+t))}}let s;for(;s=r.pop();)this.isValidLookup(t)||(i=s,t=this.getResource(n,e,s,a))})))}))})),{res:t,usedKey:n,exactUsedKey:i,usedLng:o,usedNS:r}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,i):this.resourceStore.getResource(e,t,n,i)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Et(e.replace);let i=n?e.replace:e;if(n&&void 0!==e.count&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const e of t)delete i[e]}return i}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const an=e=>e.charAt(0).toUpperCase()+e.slice(1);class sn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Zt.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Kt(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Kt(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Et(e)&&e.indexOf("-")>-1){if("undefined"!=typeof Intl&&void 0!==Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(ba){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=an(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=an(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=an(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),Et(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),i=[],o=e=>{e&&(this.isSupportedCode(e)?i.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return Et(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&o(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&o(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&o(this.getLanguagePartFromCode(e))):Et(e)&&o(this.formatLanguageCode(e)),n.forEach((e=>{i.indexOf(e)<0&&o(this.formatLanguageCode(e))})),i}}let ln=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],un={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const cn=["v1","v2","v3"],dn=["v4"],hn={zero:0,one:1,two:2,few:3,many:4,other:5};class pn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Zt.create("pluralResolver"),this.options.compatibilityJSON&&!dn.includes(this.options.compatibilityJSON)||"undefined"!=typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return ln.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:un[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const i=Kt("dev"===e?"en":e),o=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:i,type:o});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let a;try{a=new Intl.PluralRules(i,{type:o})}catch(n){if(!e.match(/-|_/))return;const i=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(i,t)}return this.pluralRulesCache[r]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>hn[e]-hn[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getRule(e,n);return i?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(t)}`:this.getSuffixRetroCompatible(i,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let i=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===i?i="plural":1===i&&(i=""));const o=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?`_plural_${i.toString()}`:o():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?o():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!cn.includes(this.options.compatibilityJSON)}}const fn=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,n)=>{const i=Ft(e,n);return void 0!==i?i:Ft(t,n)})(e,t,n);return!r&&o&&Et(n)&&(r=Gt(e,n,i),void 0===r&&(r=Gt(t,n,i))),r},gn=e=>e.replace(/\$/g,"$$$$");class mn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Zt.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:i,prefix:o,prefixEscaped:r,suffix:a,suffixEscaped:s,formatSeparator:l,unescapeSuffix:u,unescapePrefix:c,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:g,maxReplaces:m,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:Ht,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==i&&i,this.prefix=o?Bt(o):r||"{{",this.suffix=a?Bt(a):s||"}}",this.formatSeparator=l||",",this.unescapePrefix=u?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=d?Bt(d):h||Bt("$t("),this.nestingSuffix=p?Bt(p):f||Bt(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=m||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,i){let o,r,a;const s=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const o=fn(t,s,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(o,void 0,n,{...i,...t,interpolationkey:e}):o}const o=e.split(this.formatSeparator),r=o.shift().trim(),a=o.join(this.formatSeparator).trim();return this.format(fn(t,s,r,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,{...i,...t,interpolationkey:r})};this.resetRegExp();const u=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,c=i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>gn(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?gn(this.escape(e)):gn(e)}].forEach((t=>{for(a=0;o=t.regex.exec(e);){const n=o[1].trim();if(r=l(n),void 0===r)if("function"==typeof u){const t=u(e,o,i);r=Et(t)?t:""}else if(i&&Object.prototype.hasOwnProperty.call(i,n))r="";else{if(c){r=o[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),r=""}else Et(r)||this.useRawValueToEscape||(r=Mt(r));const s=t.safeValue(r);if(e=e.replace(o[0],s),c?(t.regex.lastIndex+=r.length,t.regex.lastIndex-=o[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}})),e}nest(e,t){let n,i,o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const i=e.split(new RegExp(`${n}[ ]*{`));let r=`{${i[1]}`;e=i[0],r=this.interpolate(r,o);const a=r.match(/'/g),s=r.match(/"/g);(a&&a.length%2==0&&!s||s.length%2!=0)&&(r=r.replace(/'/g,'"'));try{o=JSON.parse(r),t&&(o={...t,...o})}catch(ba){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,ba),`${e}${n}${r}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let s=[];o={...r},o=o.replace&&!Et(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),s=e,l=!0}if(i=t(a.call(this,n[1].trim(),o),o),i&&n[0]===e&&!Et(i))return i;Et(i)||(i=Mt(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),i=""),l&&(i=s.reduce(((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:n[1].trim()})),i.trim())),e=e.replace(n[0],i),this.regexp.lastIndex=0}return e}}const yn=e=>{const t={};return(n,i,o)=>{let r=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(r={...r,[o.interpolationkey]:void 0});const a=i+JSON.stringify(r);let s=t[a];return s||(s=e(Kt(i),o),t[a]=s),s(n)}};class vn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=Zt.create("formatter"),this.options=e,this.formats={number:yn(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:yn(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:yn(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:yn(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:yn(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=yn(t)}format(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=t.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find((e=>e.indexOf(")")>-1))){const e=o.findIndex((e=>e.indexOf(")")>-1));o[0]=[o[0],...o.splice(1,e)].join(this.formatSeparator)}return o.reduce(((e,t)=>{const{formatName:o,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const i=e.split("(");t=i[0].toLowerCase().trim();const o=i[1].substring(0,i[1].length-1);"currency"===t&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):"relativetime"===t&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach((e=>{if(e){const[t,...i]=e.split(":"),o=i.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();n[r]||(n[r]=o),"false"===o&&(n[r]=!1),"true"===o&&(n[r]=!0),isNaN(o)||(n[r]=parseInt(o,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[o]){let t=e;try{const a=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},s=a.locale||a.lng||i.locale||i.lng||n;t=this.formats[o](e,s,{...r,...i,...a})}catch(a){this.logger.warn(a)}return t}return this.logger.warn(`there was no format function for ${o}`),e}),e)}}class xn extends en{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Zt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,i.backend,i)}queueLoad(e,t,n,i){const o={},r={},a={},s={};return e.forEach((e=>{let i=!0;t.forEach((t=>{const a=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===r[a]&&(r[a]=!0):(this.state[a]=1,i=!1,void 0===r[a]&&(r[a]=!0),void 0===o[a]&&(o[a]=!0),void 0===s[t]&&(s[t]=!0)))})),i||(a[e]=!0)})),(Object.keys(o).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(r),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(s)}}loaded(e,t,n){const i=e.split("|"),o=i[0],r=i[1];t&&this.emit("failedLoading",o,r,t),!t&&n&&this.store.addResourceBundle(o,r,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach((n=>{((e,t,n,i)=>{const{obj:o,k:r}=Vt(e,t,Object);o[r]=o[r]||[],o[r].push(n)})(n.loaded,[o],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===a[e][t]&&(a[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",a),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:i,wait:o,callback:r});this.readingCalls++;const a=(a,s)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&s&&i<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,i+1,2*o,r)}),o):r(a,s)},s=this.backend[n].bind(this.backend);if(2!==s.length)return s(e,t,a);try{const n=s(e,t);n&&"function"==typeof n.then?n.then((e=>a(null,e))).catch(a):a(null,n)}catch(l){a(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();Et(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Et(t)&&(t=[t]);const o=this.queueLoad(e,t,n,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),i=n[0],o=n[1];this.read(i,o,"read",void 0,void 0,((n,r)=>{n&&this.logger.warn(`${t}loading namespace ${o} for language ${i} failed`,n),!n&&r&&this.logger.log(`${t}loaded namespace ${o} for language ${i}`,r),this.loaded(e,n,r)}))}saveMissing(e,t,n,i,o){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(null!=n&&""!==n){if(this.backend&&this.backend.create){const l={...r,isUpdate:o},u=this.backend.create.bind(this.backend);if(u.length<6)try{let o;o=5===u.length?u(e,t,n,i,l):u(e,t,n,i),o&&"function"==typeof o.then?o.then((e=>a(null,e))).catch(a):a(null,o)}catch(s){a(s)}else u(e,t,n,i,a,l)}e&&e[0]&&this.store.addResource(e[0],t,n,i)}}}const wn=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),Et(e[1])&&(t.defaultValue=e[1]),Et(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),bn=e=>(Et(e.ns)&&(e.ns=[e.ns]),Et(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Et(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),Sn=()=>{};class Nn extends en{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=bn(e),this.services={},this.logger=Zt,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"==typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(Et(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const i=wn();this.options={...i,...this.options,...bn(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const o=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?Zt.init(o(this.modules.logger),this.options):Zt.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!=typeof Intl&&(t=vn);const n=new sn(this.options);this.store=new tn(this.options.resources,this.options);const r=this.services;r.logger=Zt,r.resourceStore=this.store,r.languageUtils=n,r.pluralResolver=new pn(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==i.interpolation.format||(r.formatter=o(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new mn(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new xn(o(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];e.emit(t,...i)})),this.modules.languageDetector&&(r.languageDetector=o(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=o(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new rn(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];e.emit(t,...i)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=Sn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}})),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const r=It(),a=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),r}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn;const n=Et(e)?e:this.language;if("function"==typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],i=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};n?i(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>i(e))),this.options.preload&&this.options.preload.forEach((e=>i(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const i=It();return"function"==typeof e&&(n=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=Sn),this.services.backendConnector.reload(e,t,(e=>{i.resolve(),n(e)})),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&nn.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const i=It();this.emit("languageChanging",e);const o=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},r=(e,r)=>{r?(o(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,i.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},a=t=>{e||t||!this.services.languageDetector||(t=[]);const n=Et(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||o(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{r(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),i}getFixedT(e,t,n){var i=this;const o=function(e,t){let r;if("object"!=typeof t){for(var a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];r=i.options.overloadTranslationOptionHandler([e,t].concat(s))}else r={...t};r.lng=r.lng||o.lng,r.lngs=r.lngs||o.lngs,r.ns=r.ns||o.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||n||o.keyPrefix);const u=i.options.keySeparator||".";let c;return c=r.keyPrefix&&Array.isArray(e)?e.map((e=>`${r.keyPrefix}${u}${e}`)):r.keyPrefix?`${r.keyPrefix}${u}${e}`:e,i.t(c,r)};return Et(e)?o.lng=e:o.lngs=e,o.ns=t,o.keyPrefix=n,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],i=!!this.options&&this.options.fallbackLng,o=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const r=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!(!this.hasResourceBundle(n,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!r(n,e)||i&&!r(o,e)))}loadNamespaces(e,t){const n=It();return this.options.ns?(Et(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=It();Et(e)&&(e=[e]);const i=this.options.preload||[],o=e.filter((e=>i.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return o.length?(this.options.preload=i.concat(o),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new sn(wn());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new Nn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},o=new Nn(i);return void 0===e.debug&&void 0===e.prefix||(o.logger=o.logger.clone(e)),["store","services","language"].forEach((e=>{o[e]=this[e]})),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},n&&(o.store=new tn(this.store.data,i),o.services.resourceStore=o.store),o.translator=new rn(o.services,i),o.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];o.emit(e,...n)})),o.init(i,t),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Cn=Nn.createInstance();let On;Cn.createInstance=Nn.createInstance,Cn.createInstance,Cn.dir,Cn.init,Cn.loadResources,Cn.reloadResources,Cn.use,Cn.changeLanguage,Cn.getFixedT,Cn.t,Cn.exists,Cn.setDefaultNamespace,Cn.hasLoadedNamespace,Cn.loadNamespaces,Cn.loadLanguages;var Pn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(ba){r(ba)}}function s(e){try{l(i.throw(e))}catch(ba){r(ba)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};let jn={};const kn="LOAD_REMOTE_FONT",An=e=>e.source.startsWith("local"),Rn=(e,t)=>{var n;return`@font-face {\n    font-family: '${e}';\n    src: ${t.source};\n    ${Object.entries(null!==(n=t.descriptors)&&void 0!==n?n:{}).map((([e,t])=>`${e}: ${t};`)).join("\n")}\n}`};let Ln=(e=>{let t,n=!1;return i=>De(void 0,void 0,void 0,(function*(){return!t||!n&&i?(t=e(),n=!0,t.then((e=>(n=!1,e))).catch((e=>{throw t=null,e}))):t}))})((()=>fetch("/fonts/config.json").then((e=>e.json()))));const zn=(e,t,n)=>Pn(void 0,void 0,void 0,(function*(){try{const i=new FontFace(e,t.source,t.descriptors);return An(t)?yield i.load():i.loaded.then(n),document.fonts.add(i),jn[e]={configs:[Object.assign(Object.assign({},t),{font:i})]},!0}catch(ba){return nt.warn(`Failed to load font ${e} with source ${t.source}`,ba),!1}})),_n=(e,t,n)=>Pn(void 0,void 0,void 0,(function*(){if(t.some(An))return nt.error(`Unable to load multiple FontFace for the same family ${e}`),!1;const i=[];return t.forEach((t=>{const o=new FontFace(e,t.source,t.descriptors);o.loaded.then(n),document.fonts.add(o),i.push(Object.assign(Object.assign({},t),{font:o}))})),jn[e]={configs:i},!0})),En={getAllFonts:Ln,getLoadedFonts:()=>jn,loadFont:(e,t)=>Pn(void 0,void 0,void 0,(function*(){if(e in jn)return jn[e];let n;if(t)n=t;else try{n=(yield Ln())[e]}catch(ba){const n=ba instanceof Error?" due to "+ba.message:"";throw new Error("Unable to load font definition of "+e+n)}const i=()=>{((e,t)=>{mt.postEvent(kn,{family:e,definition:t})})(e,n)};for(const t of n.configs)if(Array.isArray(t)?yield _n(e,t,i):yield zn(e,t,i))break;const o=jn[e];return o?(o.displayName=n.displayName,o.url=n.url,jn[e]):void 0})),getFontCSS:e=>Pn(void 0,void 0,void 0,(function*(){const t=jn[e];if(!t)throw new Error(`Font family ${e} is not loaded`);const n=yield Promise.all(t.configs.filter((t=>{const n="loaded"===t.font.status;return n||nt.warn(`Font family ${e} is not loaded completely. Some FontFaceRules may be missing`),n})).map((t=>Pn(void 0,void 0,void 0,(function*(){if(An(t))return Rn(e,t);const n=(e=>{var t;const n=null===(t=e.source.match(/url\(['"](\S+)['"]\)/))||void 0===t?void 0:t[1];if(!n)throw new Error("Invalid URL in source "+e.source);return new URL(n,window.location.href)})(t),i=yield fetch(n),o=yield(r=yield i.blob(),new Promise((e=>{const t=new FileReader;t.onloadend=()=>e(t.result),t.readAsDataURL(r)})));var r;return Rn(e,Object.assign(Object.assign({},t),{source:`url('${o}')`}))})))));return n.join("\n\n")})),onRemoteFontLoaded:e=>{mt.onMessage(kn,e)}},In=()=>{if("PRD"!==dt.getEnvironment()||!dt.isRMT())if(document.querySelector('meta[name="robots"]'))nt.info("Noindex meta tag already presents.");else{nt.info("Injecting noindex meta tag as this app is not PRD RMT.");const e=document.createElement("meta");e.name="robots",e.content="noindex",document.head.appendChild(e)}};var Mn=function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{l(i.next(e))}catch(ba){r(ba)}}function s(e){try{l(i.throw(e))}catch(ba){r(ba)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};let Tn=!1;const Dn=e("r",{ready:()=>Mn(void 0,void 0,void 0,(function*(){let e=0;for(;e<=10&&!Tn;)yield $e(1e3),e+=1})),getAppName:dt.getComponent,getAppVersion:dt.getVersion,getEnv:dt.getEnvironment,getInstance:dt.getInstance,event:pt.customEvent,isStandaloneWindow:Nt.isStandaloneWindow,injectUITools:Nt.injectUITools,openApp:Nt.openApp,onAppOpen:Nt.onAppOpen,closeApp:Nt.closeApp,onAppClose:Nt.onAppClose,updateAppMetadata:Nt.updateAppMetadata,onAppMetadataUpdate:Nt.onAppMetadataUpdate,updateUrl:Nt.updateUrl,onUrlUpdate:Nt.onUrlUpdate,toggleNavMenu:Nt.toggleNavMenu,postEvent:mt.postEvent,onMessage:mt.onMessage,setLanguage:kt.setLanguage,getLanguage:kt.getLanguage,onLanguageChange:kt.onLanguageChange,setColourMode:kt.setColourMode,getColourMode:kt.getColourMode,onColourModeChange:kt.onColourModeChange,isAnalyticsQADone:kt.isAnalyticsQADone,isAllowAnalytics:kt.isAllowAnalytics,allowAnalytics:kt.allowAnalytics,storage:{on:_t.on,get:_t.get,getAll:_t.getAll,set:_t.set,remove:_t.remove,clear:_t.clear},getMsSinceStartUp:Rt.getMsSinceStartUp,I18nBuilder:class{constructor(){this._appName="RMG",this._lng=void 0,this._defaultResources={},this._resources={}}use(e){return Cn.use(e),this}withAppName(e){return this._appName=e,this}withLng(e){return this._lng=e,this}withDefaultResource(e){return Object.entries(e).forEach((([e,t])=>{this._defaultResources[e]=t})),this}withResource(e,t){return this._resources[e]=t,this}combineResource(){const e={};return Object.entries(this._defaultResources).forEach((([t,n])=>{e[t]={translation:n}})),Object.entries(this._resources).forEach((([t,n])=>{t in e?e[t].translation=Object.assign(Object.assign({},e[t].translation),n):e[t]={translation:n}})),e}build(){return On=Cn.createInstance({lng:this._lng,fallbackLng:{"zh-CN":["zh-Hans","zh-Hant","en"],"zh-HK":["zh-Hant","zh-Hans","en"],"zh-TW":["zh-Hant","zh-Hans","en"],default:["en"]},resources:this.combineResource()},((e,t)=>{var n;e?nt.error("unexpected error occurs while initialising i18n",e):(document.title=t(this._appName),document.documentElement.lang=null!==(n=this._lng)&&void 0!==n?n:"en")})),On.on("languageChanged",(e=>{document.title=On.t(this._appName),document.documentElement.lang=e})),(e=>{kt.onLanguageChange((t=>e.changeLanguage(t)))})(On),On}},getI18nInstance:()=>On,getAllFonts:En.getAllFonts,getLoadedFonts:En.getLoadedFonts,loadFont:En.loadFont,getFontCSS:En.getFontCSS,onRemoteFontLoaded:En.onRemoteFontLoaded});Mn(void 0,void 0,void 0,(function*(){yield dt.loadWithTimeout(),nt.setup(dt.getComponent()),In(),kt.isAnalyticsQADone()?kt.isAllowAnalytics()&&(nt.info("User has previously allowed GA"),pt.init()):Nt.isStandaloneWindow()&&!dt.isRMT()&&(nt.warn("App is opened in standalone window but analytics Q&A is not finished. GA will be init by default."),pt.init()),Tn=!0})).then(),window.rmgRuntime=Dn;const $n=e("y",nt.logger);var Vn,Wn={},Fn=function(){if(Vn)return Wn;Vn=1;var e=Ce();return Wn.createRoot=e.createRoot,Wn.hydrateRoot=e.hydrateRoot,Wn}();const Xn=function(e,t,n){let i=Promise.resolve();function o(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return i.then((t=>{for(const e of t||[])"rejected"===e.status&&o(e.reason);return e().catch(o)}))};var Bn=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,i){return e[0]===t&&(n=i,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var o=i[n];e.call(t,o[1],o[0])}},t}()}(),Un="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Hn="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Yn="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Hn):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},qn=["top","right","bottom","left","width","height","size","weight"],Gn="undefined"!=typeof MutationObserver,Kn=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,o=0;function r(){n&&(n=!1,e()),i&&s()}function a(){Yn(r)}function s(){var e=Date.now();if(n){if(e-o<2)return;i=!0}else n=!0,i=!1,setTimeout(a,t);o=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Un&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Gn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Un&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;qn.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Jn=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},Qn=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Hn},Zn=ri(0,0,0,0);function ei(e){return parseFloat(e)||0}function ti(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+ei(e["border-"+n+"-width"])}),0)}function ni(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Zn;var i=Qn(e).getComputedStyle(e),o=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var o=i[n],r=e["padding-"+o];t[o]=ei(r)}return t}(i),r=o.left+o.right,a=o.top+o.bottom,s=ei(i.width),l=ei(i.height);if("border-box"===i.boxSizing&&(Math.round(s+r)!==t&&(s-=ti(i,"left","right")+r),Math.round(l+a)!==n&&(l-=ti(i,"top","bottom")+a)),!function(e){return e===Qn(e).document.documentElement}(e)){var u=Math.round(s+r)-t,c=Math.round(l+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return ri(o.left,o.top,s,l)}var ii="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Qn(e).SVGGraphicsElement}:function(e){return e instanceof Qn(e).SVGElement&&"function"==typeof e.getBBox};function oi(e){return Un?ii(e)?function(e){var t=e.getBBox();return ri(0,0,t.width,t.height)}(e):ni(e):Zn}function ri(e,t,n,i){return{x:e,y:t,width:n,height:i}}var ai=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ri(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=oi(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),si=function(e,t){var n,i,o,r,a,s,l,u=(i=(n=t).x,o=n.y,r=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(s.prototype),Jn(l,{x:i,y:o,width:r,height:a,top:o,right:i+r,bottom:a+o,left:i}),l);Jn(this,{target:e,contentRect:u})},li=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Bn,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Qn(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ai(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Qn(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new si(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ui="undefined"!=typeof WeakMap?new WeakMap:new Bn,ci=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Kn.getInstance(),i=new li(t,n,this);ui.set(this,i)};["observe","unobserve","disconnect"].forEach((function(e){ci.prototype[e]=function(){var t;return(t=ui.get(this))[e].apply(t,arguments)}}));var di=void 0!==Hn.ResizeObserver?Hn.ResizeObserver:ci;window.ResizeObserver||(window.ResizeObserver=di);var hi=function(){return hi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hi.apply(this,arguments)},pi=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};e("z",(function(e){var t=e.isOpen,l=e.onClose,u=e.children,c=e.sx,d=e.size,h=e.zIndex,p=pi(e,["isOpen","onClose","children","sx","size","zIndex"]),f=n("RmgAppClip",{size:d,zIndex:null!=h?h:1500}),g=Oe.useRef(null);return i({ref:g,handler:l}),o.jsx(r,{children:o.jsxs(a.div,hi({className:t?"show-app-clip":"",sx:f},p,{children:[o.jsx("div",{className:"rmg-app-clip__overlay"}),o.jsx(s,{isDisabled:!t,children:o.jsx("div",{className:"rmg-app-clip__container",children:o.jsx(a.section,{ref:g,role:"dialog",className:"rmg-app-clip__content",sx:c,children:u})})})]}))})}));const[fi,gi]=function(){const e=Oe.createContext(void 0);return e.displayName="AutoCompleteContext",[e.Provider,function t(){var n;const i=Oe.useContext(e),o="useAutoCompleteContext: `context` is undefined. Seems you forgot to wrap all autoomplete components within `<AutoComplete />`";if(!i){const e=new Error(o);throw e.name="ContextError",null==(n=Error.captureStackTrace)||n.call(Error,e,t),e}return i},e]}();function mi(e){return null!=e&&e.length?e[e.length-1]:void 0}function yi(e,t,n=1,i=!0){if(0===t)return-1;let o=e+n;return-1===e&&(o=n>0?0:t-1),o=i?(o%t+t)%t:Math.max(0,Math.min(o,t-1)),o}function vi(e,t,n=!0){const i=function(e,t,n=!0){return yi(e,t,-1,n)}(e,t.length,n);return t[i]}function xi(e){return Array.isArray(e)}function wi(e){return null!==e&&"object"==typeof e&&!xi(e)}function bi(e){return xi(e)?function(e){return xi(e)&&0===e.length}(e):wi(e)?function(e){return wi(e)&&0===Object.keys(e).length}(e):null==e||""===e}function Si(e){return typeof e>"u"}function Ni(e){return typeof e<"u"}function Ci(e,t){const n={...e};return t.forEach((e=>{delete n[e]})),n}function Oi(e,...t){return function(e){return"function"==typeof e}(e)?e(...t):e}var Pi=function(e,t){for(var n,i=0,o=Oe.Children.toArray(e);i<o.length;i++){var r=o[i];if(t(r))return r;if(null!==(n=r.props)&&void 0!==n&&n.children){var a=Pi(r.props.children,t);if(a)return a}}},ji=function(e,t){for(var n=0,i=t.length,o=e.length;n<i;n++,o++)e[o]=t[n];return e},ki=function(e,t){for(var n,i=[],o=0,r=Oe.Children.toArray(e);o<r.length;o++){var a=r[o];t(a)&&(i=ji(ji([],i),[a])),null!==(n=a.props)&&void 0!==n&&n.children&&(i=ji(ji([],i),ki(a.props.children,t)))}return i};function Ai(e,t,n=2){function i(e,t){e=" ".repeat(t-1)+e.toLowerCase()+" ".repeat(t-1);let n=new Array(e.length-t+1);for(let i=0;i<n.length;i++)n[i]=e.slice(i,i+t);return n}if(null==e||!e.length||null==t||!t.length)return 0;let o=e.length<t.length?e:t,r=e.length<t.length?t:e,a=i(o,n),s=i(r,n),l=new Set(a),u=s.length,c=0;for(let d of s)l.delete(d)&&c++;return c/u}const Ri=e=>{var t;return null==(t="string"==typeof e||"number"==typeof e?e:e[Object.keys(e)[0]])?void 0:t.toString()},Li=(e,t)=>"string"!=typeof e||bi(t)?e:e.toString().replace(new RegExp(function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(t),"gi"),(e=>`<mark>${e}</mark>`)),zi=(e,t,n)=>(null==t?void 0:t.toLowerCase().indexOf(null==e?void 0:e.toLowerCase()))>=0||(null==n?void 0:n.toLowerCase().indexOf(null==e?void 0:e.toLowerCase()))>=0||Ai(e,t)>=.5||Ai(e,n)>=.5,_i=(e,t)=>Pi(e,(e=>{var n;return"AutoCompleteItem"===(null==(n=null==e?void 0:e.type)?void 0:n.displayName)&&e.props.value===(null==t?void 0:t.value)})),Ei=(e,t)=>Pi(e,(e=>{var n;return"AutoCompleteItem"===(null==(n=null==e?void 0:e.type)?void 0:n.displayName)&&e.props.value===(null==t?void 0:t.value)})),Ii=(e,t)=>{const n={},i={},{field:o}=e;return o&&Object.keys(o).forEach((e=>{if(!1===e.startsWith("--input"))n[e]=o[e];else{let t=o[e];const n=e.replace("--input-","").replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}));-1!==t.indexOf(".")&&(t=t.substring(t.indexOf(".")+1)),i[n]=t}})),{...t&&{...n,...i,_focusWithin:e.field._focus,pos:"relative",minH:9,py:1.5,spacing:3},cursor:"text",h:"fit-content"}};function Mi(e){var t;let{prefocusFirstItem:n=!0,closeOnBlur:i=!0,creatable:o,emphasize:r,emptyState:a=!0,defaultEmptyStateProps:s={},freeSolo:l,isReadOnly:u,listAllValuesOnFocus:c,maxSuggestions:d,multiple:h,closeOnSelect:p=!h,defaultValue:f,defaultValues:g=(f?[f]:[]),onReady:m,defaultIsOpen:y,disableFilter:v,isLoading:x=!1,placement:w="bottom",restoreOnBlurIfEmpty:b=!l,shouldRenderSuggestions:S=(()=>!0),submitKeys:N=[],suggestWhenEmpty:j,value:k,values:A=(k?"string"==typeof k?[k]:[...k]:void 0)}=e;l=l||!!h||e.freeSolo;const{isOpen:R,onClose:L,onOpen:z}=C({defaultIsOpen:y}),_=Oe.useMemo((()=>Oi(e.children,{isOpen:R,onClose:L,onOpen:z})),[e.children,R]),E=Oe.useMemo((()=>(e=>ki(e,(e=>{var t;return"AutoCompleteItem"===(null==(t=null==e?void 0:e.type)?void 0:t.displayName)})).map((e=>{const t=function(e,t){const n={};return["value","label","fixed","disabled"].forEach((t=>{t in e&&(n[t]=e[t])})),n}(e.props),{getValue:n=Ri}=e.props,i=n(t.value);return{...Ni(t.label)?t:{...t,label:i},value:i,originalValue:t.value}})))(_)),[_]),I=Oe.useRef(null),M=Oe.useRef(null),T=Oe.useRef(null),D=Oe.useRef(null),[$,V]=Oe.useState(!1);let W="";h?W="":Si(g)?Si(A)||(W=A[0]):W=g[0];const[F,X]=Oe.useState(W??""),B=Oe.useMemo((()=>v?E:E.filter((t=>t.fixed||Oi(e.filter||zi,F,t.value,t.label)||$)).filter(((e,t)=>!d||e.fixed||t<d))),[F,E,$,d,v]),U=o?[{value:F,noFilter:!0,creatable:!0}]:[],H=Oe.useMemo((()=>[...B,...U]),[B,U]),[Y,q]=O({defaultValue:g.map((e=>null==e?void 0:e.toString())),value:A,onChange:t=>{const n=H.find((e=>e.value===t[0]));if(!n)return;const i=t.map((e=>H.find((t=>t.value===e))));Oi(e.onChange,h?t:t[0],h?i:n)}});Oe.useEffect((()=>{0===H.length&&!a&&R&&L()}),[H.length,a,R]);const[G,K]=Oe.useState(n?null==(t=E[0])?void 0:t.value:null),J=e.maxSelections||Y.length+1,Q=H.findIndex((e=>e.value===G)),Z=function(e,t,n=!0){return t[yi(e,t.length,1,n)]}(Q,H,!!e.rollNavigation),ee=vi(Q,H,!!e.rollNavigation),te=function(e){return null==e?void 0:e[0]}(H),ne=mi(H),ie=!H.some((e=>e.value===G));Oe.useEffect((()=>{var e;ie&&K(n?null==(e=E[0])?void 0:e.value:null)}),[ie]),P((()=>{n&&K(null==te?void 0:te.value)}),[F,null==te?void 0:te.value]),Oe.useEffect((()=>{var e;!R&&n&&K(null==(e=E[0])?void 0:e.value)}),[R]),Oe.useEffect((()=>{R&&c&&V(!0)}),[R,c,V]),Oe.useEffect((()=>{const t=E.find((e=>e.value===G));Oi(e.onOptionFocus,{item:t,focusMethod:D.current,isNewInput:null==t?void 0:t.creatable})}),[G,e.onOptionFocus]);const oe=t=>{var n,i;const o=H.find((e=>e.value===t)),r=(null==o?void 0:o.label)||(null==o?void 0:o.value);X((()=>h?"":r??"")),!Y.includes(t)&&Y.length<J&&q((e=>h?[...e,t]:[t])),h&&(null==(n=I.current)||n.focus()),e.focusInputOnSelect&&(null==(i=I.current)||i.focus()),Oi(e.onSelectOption,{item:o,selectMethod:D.current,isNewInput:null==o?void 0:o.creatable}),null!=o&&o.creatable&&Oi(e.onCreateOption,{item:Ci(o,["noFilter"]),selectMethod:D.current}),p&&L()},re=(t,n)=>{var i;q((n=>{const i=E.find((e=>e.value===t));return i?(Oi(e.onTagRemoved,t,i,n),n.filter((e=>e!==t))):n}));const o=E.find((e=>e.value===t)),r=(null==o?void 0:o.label)||(null==o?void 0:o.value);F===r&&X(""),n&&(null==(i=I.current)||i.focus())},ae=h?Y.map((e=>{var t;return{label:(null==(t=E.find((t=>t.value===(null==e?void 0:e.toString()))))?void 0:t.label)||e,onRemove:()=>re(e)}})):[];return Oe.useEffect((()=>{Oi(m,{tags:ae})}),[Y]),{autoCompleteProps:e,children:_,filteredList:H,filteredResults:B,focusedValue:G,defaultEmptyStateProps:s,getEmptyStateProps:e=>{if(H.every((e=>e.noFilter))&&a&&!o)return"boolean"==typeof a?e:Oi(a,{query:F})},getGroupProps:e=>{const t=((e,t)=>Ni(Pi(e,(e=>{var n,i;const o=Oi((null==(n=e.props)?void 0:n.getValue)||Ri,(null==(i=e.props)?void 0:i.value)||{});return t.some((e=>e.value===o))}))))(e.children,H);return{divider:{hasFirstChild:_i(e.children,te),hasLastChild:Ei(e.children,mi(H.filter((e=>Si(null==e?void 0:e.noFilter)))))},group:{display:t?"initial":"none"}}},getInputProps:(t,n)=>{const{onBlur:o,onChange:r,onFocus:a,onKeyDown:s,variant:l,...d}=t;return{wrapper:{ref:M,onClick:()=>{var e;null==(e=null==I?void 0:I.current)||e.focus()},...Ii(n,h),...d},input:{isReadOnly:u,onFocus:t=>{Oi(a,t),e.openOnFocus&&!u&&z(),e.selectOnFocus&&t.target.select(),c&&V(!0)},onBlur:e=>{var t,n;Oi(o,e);const r=e.relatedTarget===(null==T?void 0:T.current)||(null==(t=T.current)?void 0:t.contains(e.relatedTarget)),a=null==(n=M.current)?void 0:n.contains(e.relatedTarget);if(!r&&!a&&(i&&L(),!Y.includes(e.target.value)&&b)){const e=mi(Y),t=E.find((t=>t.value===e)),n=(null==t?void 0:t.label)||(null==t?void 0:t.value)||"";X(n)}},onChange:e=>{const t=e.target.value;Oi(r,e),X(t);const n=bi(t);!Oi(S,t)||n&&!j?L():z(),V(!1)},onKeyDown:e=>{var t;Oi(s,e),D.current="keyboard";const{key:n}=e,i=H[Q];return["Enter",...N].includes(n)?(!i||null!=i&&i.disabled||!R?null==(t=I.current)||t.focus():oe(null==i?void 0:i.value),void e.preventDefault()):"ArrowDown"===n?(R?K(null==Z?void 0:Z.value):z(),void e.preventDefault()):"ArrowUp"===n?(R?K(null==ee?void 0:ee.value):z(),void e.preventDefault()):"Tab"!==n?"Home"===n?(K(null==te?void 0:te.value),void e.preventDefault()):"End"===n?(K(null==ne?void 0:ne.value),void e.preventDefault()):void("Escape"===n&&(L(),e.preventDefault())):void(!R||!i||null!=i&&i.disabled?L():oe(null==i?void 0:i.value))},value:F,variant:h?"unstyled":l,...d}}},getItemProps:(e,t)=>{var n;const{_fixed:i,_focus:o,children:a,disabled:s,label:l,value:u,fixed:c,getValue:d=Ri,onClick:h,onMouseOver:p,sx:f,...g}=e,m=t?u:null==(n=d(u))?void 0:n.toString(),y=m===G,v=H.findIndex((e=>e.value===m))>=0,x=a||l||m;return{item:{..."string"==typeof x&&r?{dangerouslySetInnerHTML:{__html:Li(x,F)}}:{children:x},"aria-selected":Y.includes(m),"aria-disabled":s,_disabled:{opacity:.4,cursor:"not-allowed",userSelect:"none"},onClick:e=>{var t;Oi(h,e),s?null==(t=I.current)||t.focus():oe(m)},onMouseOver:e=>{Oi(p,e),K(m),D.current="mouse"},sx:{...f,mark:{color:"inherit",bg:"transparent",...wi(r)?r:{fontWeight:r?"extrabold":"inherit"}}},...y&&(o||{bg:"whiteAlpha.100",_light:{bg:"gray.200"}}),...c&&i,...g},root:{isValidSuggestion:v,value:m}}},inputRef:I,interactionRef:D,isLoading:x,isOpen:R,itemList:E,listRef:T,onClose:L,onOpen:z,placement:w,query:F,removeItem:re,resetItems:e=>{var t;q([]),e&&(null==(t=I.current)||t.focus())},setQuery:X,tags:ae,value:k,values:Y}}l(((e,t)=>{const n=Mi(e),{children:i,isOpen:r,onClose:s,onOpen:l,placement:u,resetItems:c,removeItem:d}=n;Oe.useImperativeHandle(t,(()=>({resetItems:c,removeItem:d})));const{matchWidth:h=!0}=n.autoCompleteProps;return o.jsx(fi,{value:n,children:o.jsx(p,{isLazy:!0,isOpen:r,autoFocus:!1,placement:u,closeOnBlur:!0,matchWidth:h,children:o.jsx(a.div,{w:"full",ref:t,children:i})})})})).displayName="AutoComplete",l(((e,t)=>{const{focusedValue:n,getItemProps:i,interactionRef:r}=gi(),a=Oe.useRef(),s=f(t,a),l=i(e),{isValidSuggestion:u,value:c}=l.root,d=n===c;Oe.useEffect((()=>{var e;d&&"keyboard"===r.current&&(null==(e=null==a?void 0:a.current)||e.scrollIntoView({behavior:"smooth",block:"nearest"}))}),[d,r]),Oe.useEffect((()=>{"string"!=typeof c&&console.warn("wow"),"string"!=typeof c&&Si(e.getValue)&&console.error("You must define the `getValue` prop, when an Item's value is not a string")}),[]);const{children:h,dangerouslySetInnerHTML:p,...m}=l.item,y=Ci(m,["groupId"]);return u?o.jsx(g,{ref:s,...Ti,...y,children:h||o.jsx("span",{dangerouslySetInnerHTML:p})}):null})).displayName="AutoCompleteItem";const Ti={mx:"2",px:"2",py:"2",rounded:"md",cursor:"pointer"},Di=l(((e,t)=>{const{children:n,showDivider:i,...r}=e,a=Ci(r,["groupSibling"]),{getGroupProps:s}=gi(),{group:l}=s(e),u=Wi(e);return o.jsxs(m,{ref:t,...l,...a,children:[o.jsx(y,{...u.top}),n,o.jsx(y,{...u.bottom})]})})),$i=l(((e,t)=>o.jsx(g,{...Vi,...e,ref:t})));Di.displayName="AutoCompleteGroup",$i.displayName="AutoCompleteGroupTitle";const Vi={ml:5,my:1,fontSize:"xs",letterSpacing:"wider",fontWeight:"extrabold",textTransform:"uppercase"},Wi=e=>{const{getGroupProps:t}=gi(),n=e.groupSibling,{divider:{hasFirstChild:i,hasLastChild:o}}=t(e),r={my:2,borderColor:e.dividerColor};return{top:{...r,mb:4,display:!e.showDivider||i?"none":""},bottom:{...r,display:!e.showDivider||o||n?"none":""}}},Fi=l(((e,t)=>{const{isLoading:n}=gi(),{loadingIcon:i,...r}=e;return o.jsxs(j,{children:[o.jsx(k,{...r,ref:t}),n&&o.jsx(A,{children:i||o.jsx(N,{})})]})})),Xi=l(((e,t)=>{const{autoCompleteProps:n,inputRef:i,getInputProps:r,tags:a,setQuery:s,value:l,itemList:c}=gi(),{children:d,isInvalid:h,hidePlaceholder:p,...g}=e,{value:m}=g;Oe.useEffect((()=>{if(void 0!==l&&("string"==typeof l||l instanceof String)){const e=c.find((e=>e.value===l)),t=void 0===e?l:e.label;s(t)}}),[l]),Oe.useEffect((()=>{void 0!==m&&("string"==typeof m||m instanceof String)&&s(m)}),[m]);const y=v("Input",e);let{wrapper:b,input:S}=r(g,y);const{ref:N,...C}=b,O=f(t,i),P=Oi(d,{tags:a});p&&(S={...S,placeholder:Array.isArray(P)&&P.length?void 0:S.placeholder});const j=o.jsx(Fi,{isInvalid:h,...S,ref:O}),k=o.jsxs(x,{"aria-invalid":h,...C,ref:N,children:[P,o.jsx(u,{as:Fi,...S,ref:O})]});return o.jsx(w,{children:n.multiple?k:j})}));Xi.displayName="Input",Xi.id="Input";const Bi=e=>{const{getEmptyStateProps:t,defaultEmptyStateProps:n}=gi(),i=t(o.jsx(g,{...Ui,...n,children:"No options found!"}));return o.jsx(m,{...e,children:i})},Ui={fontSize:"sm",align:"center",justify:"center",fontWeight:"bold",fontStyle:"italic"},Hi=["AutoCompleteGroup","AutoCompleteItem","AutoCompleteCreatable"];l(((e,t)=>{const{children:n,loadingState:i,...r}=e,{listRef:a,isLoading:s}=gi(),l=f(t,a),[u,c]=(e=>{const t=Pe.Children.map(e,((t,n)=>{var i;if("AutoCompleteGroup"===(null==(i=null==t?void 0:t.type)?void 0:i.displayName)){const i=Pe.Children.toArray(e)[n+1];return Pe.cloneElement(t,{groupSibling:!!i&&"AutoCompleteGroup"===i.type.displayName})}return t})),n=Pe.Children.toArray(t).filter((e=>{var t;return!Hi.includes(null==(t=null==e?void 0:e.type)?void 0:t.displayName)}));return[Pe.Children.toArray(t).filter((e=>{var t;return Hi.includes(null==(t=null==e?void 0:e.type)?void 0:t.displayName)})),n]})(n);return o.jsxs(b,{ref:l,w:"inherit",...Yi,...r,children:[s&&o.jsx(S,{children:i||o.jsx(N,{size:"md"})}),!s&&o.jsxs(o.Fragment,{children:[u,o.jsx(Bi,{}),c]})]})})).displayName="AutoCompleteList";const Yi={py:"4",opacity:"0",bg:"#232934",rounded:"md",maxH:"350px",border:"none",shadow:"base",zIndex:"popover",overflowY:"auto",_light:{bg:"#ffffff"},_focus:{boxShadow:"none"}};Oe.memo((e=>{const{label:t,onRemove:n,disabled:i,...r}=e;return o.jsx(u,{children:o.jsxs(c,{borderRadius:"md",fontWeight:"normal",...i&&qi,...r,children:[o.jsx(d,{children:t}),o.jsx(h,{onClick:()=>!i&&Oi(n),cursor:"pointer",...i&&qi})]})})}));const qi={cursor:"text",userSelect:"none",opacity:.4,_focus:{boxShadow:"none"}};var Gi=function(){return Gi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Gi.apply(this,arguments)},Ki=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Ji=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Qi=(e("e",Oe.forwardRef((function(e,t){var n=e.validator,i=e.onDebouncedChange,r=e.delay,a=e.optionList,s=e.defaultValue;e.onChange;var l=Ki(e,["validator","onDebouncedChange","delay","optionList","defaultValue","onChange"]),u=Oe.useRef(null),c=f(u,t),d=Oe.useRef("datalist-"+(new Date).valueOf()),h=Ji(Oe.useState(!1),2),p=h[0],g=h[1],m=Oe.useRef();return Oe.useEffect((function(){u.current&&(u.current.value=(null==s?void 0:s.toString())||"")}),[s]),o.jsxs(o.Fragment,{children:[o.jsx(k,Gi({ref:c,list:d.current,variant:"flushed",size:"sm",h:6,onChange:function(e){var t=e.target.value;window.clearTimeout(m.current),n&&g(!n(t)),m.current=window.setTimeout((function(){null==i||i(t),m.current=void 0}),null!=r?r:500)},onBlur:function(e){var t=e.target.value;void 0!==m.current&&(window.clearTimeout(m.current),n&&g(!n(t)),null==i||i(t),m.current=void 0)},isInvalid:p},l)),a&&o.jsx("datalist",{id:d.current,children:null==a?void 0:a.map((function(e,t){return o.jsx("option",{children:e},t)}))})]})}))),function(){return Qi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Qi.apply(this,arguments)}),Zi=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},eo=(e("c",Oe.forwardRef((function(e,t){var n=e.onDebouncedChange,i=e.defaultValue;e.onChange;var r=Zi(e,["onDebouncedChange","defaultValue","onChange"]),a=Oe.useRef(null),s=f(a,t),l=Oe.useRef();return Oe.useEffect((function(){a.current&&(a.current.value=(null==i?void 0:i.toString())||"")}),[i]),o.jsx(R,Qi({ref:s,variant:"flushed",size:"sm",resize:"none",onChange:function(e){var t=e.target.value;window.clearTimeout(l.current),l.current=window.setTimeout((function(){null==n||n(t)}),500)}},r))}))),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}),to=function(e){switch(e){case Fe.DEV:return"red";case Fe.UAT:return"orange";case Fe.PRD:return"green"}},no=function(e,t,n){var i=new Blob([n],{type:t});io(e,i)},io=function(e,t){var n=window.URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)},oo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function ro(e){var t=e.cancelRef,n=e.isOpen,i=e.onClose,r=oo(Oe.useState(!1),2),a=r[0],s=r[1];return o.jsxs(T,{leastDestructiveRef:t,isOpen:n,onClose:i,children:[o.jsx(D,{}),o.jsxs($,{children:[o.jsx(V,{children:"Warning 警告"}),o.jsx(W,{}),o.jsxs(F,{sx:{"& p":{my:1}},children:[o.jsx(X,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),o.jsx(X,{children:"確定重設該應用程式嗎？應用程式的網頁本地儲存將會被清除。本地儲存的副本可供下載及用於復原（因應用程式而異）。"}),o.jsx(X,{children:"确定重置本应用程序吗？应用程序的网页本地存储将会被清除。本地存储的拷贝可供下载以及用于还原（因应用程序而異）。"})]}),o.jsxs(B,{children:[o.jsx(U,{ref:t,onClick:i,children:"Cancel"}),o.jsx(U,{isLoading:a,colorScheme:"red",ml:3,onClick:function(){s(!0);var e=Dn.storage.getAll(),t=Dn.getAppName(),n="".concat(t,"_BACKUP_").concat((new Date).toISOString(),".json");no(n,"application/json",JSON.stringify(e)),Dn.storage.clear(),setTimeout((function(){window.location.reload()}),2e3)},children:"Confirm and reload"})]})]})]})}var ao=function(){return ao=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ao.apply(this,arguments)},so=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},lo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function uo(e){var t=e.error,i=e.errorInfo,r=e.allowReset,a=e.sx,s=so(e,["error","errorInfo","allowReset","sx"]),l=n("RmgErrorBoundary"),u=H("primary.500","primary.300"),c=lo(Oe.useState(!1),2),d=c[0],h=c[1],p=Oe.useRef(null),f=function(e){return o.jsx(Y,{color:u,role:"button",onClick:function(){return h(!0)},children:e})},g=Dn.getAppName(),m=o.jsx(Y,{color:u,href:"https://github.com/railmapgen/".concat("rmg-home"===g?"railmapgen.github.io":g,"/issues"),isExternal:!0,children:"GitHub Issue"});return o.jsxs(q,ao({status:"error",sx:ao(ao({},l),a)},s,{children:[o.jsx(G,{}),o.jsx(K,{children:"Something went wrong!"}),o.jsxs(J,{children:[o.jsxs(X,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",r?o.jsxs(o.Fragment,{children:[" or ",f("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",m," with the details shown below."]}),o.jsxs(X,{children:["請嘗試重新整理或重新上載設定檔。如果問題仍然存在，請考慮更新你的瀏覽器",r?o.jsxs(o.Fragment,{children:["或",f("重設該應用程式")]}):"","。如需協助或與我們聯絡，請前往 ",m," 提交一個 Issue 並附以詳細資料。"]}),o.jsxs(X,{children:["请尝试刷新或者重新上传配置文件。如果问题仍然存在，请考虑更新您的浏览器",r?o.jsxs(o.Fragment,{children:["或者",f("重置本应用程序")]}):"","。如需帮助或者联系我们，请前往 ",m," 提交一个 Issue 并附上详细信息。"]}),o.jsxs(X,{as:"details",children:[null==t?void 0:t.toString(),o.jsx("br",{}),null==i?void 0:i.componentStack]}),r&&o.jsx(ro,{cancelRef:p,isOpen:d,onClose:function(){return h(!1)}})]})]}))}var co,ho=(co=function(e,t){return co=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},co(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}co(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),po=function(){return po=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},po.apply(this,arguments)},fo=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};!function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1,error:null,errorInfo:null},n}ho(t,e),t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){this.setState({error:e,errorInfo:t})},t.prototype.render=function(){var e=this.props,t=e.children,n=e.suspenseFallback,i=e.allowReset,r=fo(e,["children","suspenseFallback","allowReset"]);return this.state.hasError?o.jsx(uo,po({error:this.state.error,errorInfo:this.state.errorInfo,allowReset:i},r)):n?o.jsx(Oe.Suspense,{fallback:n,children:t}):t}}(Pe.Component);var go=function(){return go=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},go.apply(this,arguments)},mo=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},yo=e("R",(function(e){var t=e.label,i=e.children;e.width;var r=e.noLabel,a=e.oneLine,s=e.helper,l=e.errorMessage,u=e.className,c=mo(e,["label","children","width","noLabel","oneLine","helper","errorMessage","className"]),d=n("RmgLabel");return o.jsxs(Q,go({className:"".concat(a?"rmg-label__one-line":""," ").concat(null!=u?u:""),"aria-label":t,sx:d,isInvalid:!!l},c,{children:[!r&&o.jsx(Z,{size:"xs",children:t}),i,l?o.jsx(ee,{children:l}):s?o.jsx(te,{children:s}):o.jsx(o.Fragment,{})]}))})),vo=function(){return vo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vo.apply(this,arguments)},xo=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},wo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},bo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},So=(e("u",(function(e,t,n){var i=bo(Oe.useState(t()),2),o=i[0],r=i[1];return Oe.useEffect((function(){e.then((function(){console.debug("[rmg-components] Getter updates finished"),r(t())}))}),[]),o})),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}),No=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},Co=function(e,t){var n=So(Oe.useState(!0),2),i=n[0],o=n[1],r=Oe.useRef([]),a=Oe.useRef(),s=Oe.useCallback((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i?(o(!1),r.current=[],e.apply(void 0,No([],So(t),!1))):r.current=t}),[i,e]);return Oe.useEffect((function(){if(!i)return a.current=window.setTimeout((function(){o(!0),r.current.length&&e.apply(void 0,No([],So(r.current),!1))}),t),function(){window.clearTimeout(a.current)}}),[i,t]),s},Oo=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function Po(e){var t=e.defaultValue,i=e.min,r=e.max,a=e.step,s=e.onThrottledChange,l=e.leftIcon,u=e.rightIcon,c=n("RmgThrottledSlider"),d=Oo(Oe.useState(null!=t?t:0),2),h=d[0],p=d[1];Oe.useEffect((function(){void 0!==t&&h!==t&&p(t)}),[t]);var f=Co(null!=s?s:function(){},500);return o.jsxs(g,{sx:c,children:[l&&o.jsx(ie,{size:"xs",variant:"ghost","aria-label":"Drag left",icon:l,onClick:function(){var e=Math.max(h-10*(null!=a?a:1),null!=i?i:0);null==s||s(e),p(e)}}),o.jsxs(oe,{value:h,min:i,max:r,step:a,onChange:function(e){f(e),p(e)},children:[o.jsx(re,{children:o.jsx(ae,{})}),o.jsx(se,{})]}),u&&o.jsx(ie,{size:"xs",variant:"ghost","aria-label":"Drag right",icon:u,onClick:function(){var e=Math.min(h+10*(null!=a?a:1),null!=r?r:100);null==s||s(e),p(e)}})]})}var jo=e("d",(function(e){var t=e.children,i=e.noWrap,r=n("RmgOutput",{noWrap:i});return o.jsx(a.output,{sx:r,children:t})})),ko=function(){return ko=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ko.apply(this,arguments)},Ao=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n},Ro=function(e){var t=e.sx,i=e.className,r=Ao(e,["sx","className"]),a=n("RmgWindow");return o.jsx(g,ko({className:"rmg-window ".concat(null!=i?i:""),sx:ko(ko({},a),t)},r))},Lo=(e("J",(function(e){var t=e.isAppClipHeader,i=e.sx,r=e.className,a=Ao(e,["isAppClipHeader","sx","className"]),s=n("RmgWindowHeader");return o.jsx(g,ko({className:"rmg-window__header ".concat(t?"rmg-window__app-clip-header":""," ").concat(null!=r?r:""),sx:ko(ko({},s),i)},a))})),function(e){var t=e.sx,i=e.className,r=Ao(e,["sx","className"]),a=n("RmgPage");return o.jsx(g,ko({className:"rmg-page ".concat(null!=i?i:""),sx:ko(ko({},a),t)},r))}),zo=function(e){return"dark"===e?"primary.300":"primary.500"},_o={variants:{flushed:function(e){var t=e.theme,n=e.colorMode;return{field:{_focusVisible:{borderColor:zo(n),boxShadow:"0px 1px 0px 0px ".concat(le(t,zo(n)))}}}}}},Eo={defaultProps:{colorScheme:"primary"}},Io=function(e){return"dark"===e?"primary.300":"primary.500"},Mo={baseStyle:function(e){var t=e.theme,n=e.colorMode;return{"& .rmg-multi-select__wrapper":{position:"relative",w:"100%",h:"25.75px",transform:"translateY(1.75px)",cursor:"default"},"& .rmg-multi-select__field":{position:"relative",w:"100%",minW:0,outline:0,appearance:"none",transitionProperty:"common",transitionDuration:"normal",pb:"1px",fontSize:"sm",h:"6",borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_active:{borderColor:Io(n),boxShadow:"0px 1px 0px 0px ".concat(le(t,Io(n)))},_focus:{borderColor:Io(n),boxShadow:"0px 1px 0px 0px ".concat(le(t,Io(n)))},_focusVisible:{borderColor:Io(n),boxShadow:"0px 1px 0px 0px ".concat(le(t,Io(n)))},"&.active":{borderColor:Io(n),boxShadow:"0px 1px 0px 0px ".concat(le(t,Io(n)))},"& > span:last-of-type":{position:"absolute",right:8}},"& .rmg-multi-select__icon-wrapper":{display:"inline-flex",justifyContent:"center",w:6,h:"100%",position:"absolute",right:2,top:0,fontSize:"xl","& svg":{h:"1em",w:"1em"}},"& .chakra-popover__content":{w:"unset",minW:200},"& .chakra-popover__body":{p:0,"li label":{p:2,w:"100%",_hover:{bg:"dark"===n?"whiteAlpha.200":"gray.100"},_active:{bg:"dark"===n?"whiteAlpha.300":"gray.200"}}}}}},To=function(){return To=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},To.apply(this,arguments)},Do={overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap"},$o={Input:_o,Checkbox:Eo,Select:_o,Slider:{defaultProps:{colorScheme:"primary"}},Switch:Eo,Textarea:_o,RmgAgGrid:{baseStyle:{w:"100%",h:"100%","& .ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper":{height:"unset"},"& .ag-cell":{display:"flex",lineHeight:"unset",alignItems:"center"},"& .ag-cell, & .ag-header-cell":{padding:"8px 9px"},"& .ag-row, & .ag-header":{border:"unset"},"&.ag-theme-alpine .ag-row .ag-cell, &.ag-theme-alpine .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))"},"&.ag-theme-alpine-dark .ag-row .ag-cell, &.ag-theme-alpine-dark .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))"},"& .ag-pinned-left-cols-container, & .ag-pinned-left-header":{boxShadow:"var(--chakra-shadows-lg)",zIndex:1},"&.ag-theme-alpine":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #fff)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #fcfcfc)"}},"&.ag-theme-alpine-dark":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #181d1f)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #222628)"}}}},RmgAppClip:{baseStyle:function(e){var t=e.colorMode,n=e.zIndex;return{display:"none","&.show-app-clip":{display:"block"},"& .rmg-app-clip__overlay":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",zIndex:n,bg:"blackAlpha.600"},"& .rmg-app-clip__container":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:n},"& .rmg-app-clip__content":{display:"flex",w:"100%",maxW:"md",my:16,bg:"light"===t?"white":"gray.700",boxShadow:"lg",borderRadius:"md",overflow:"hidden"}}},sizes:{xs:{"& .rmg-app-clip__content":{maxW:"xs"}},sm:{"& .rmg-app-clip__content":{maxW:"sm"}},lg:{"& .rmg-app-clip__content":{maxW:"lg"}},xl:{"& .rmg-app-clip__content":{maxW:"xl"}},full:{"& .rmg-app-clip__content":{maxW:"100vw",minH:"var(--chakra-vh)",my:0,borderRadius:0}}}},RmgCard:{baseStyle:function(e){return{p:1,my:1,w:"100%",borderRadius:2,bg:"dark"===e.colorMode?"gray.700":"gray.50",boxShadow:"lg"}}},RmgDataTable:{baseStyle:function(e){var t=e.colorMode;return{"& thead":{position:"sticky",top:0,zIndex:10},"& td, th":{borderRight:"1px solid",borderColor:"dark"===t?"whiteAlpha.400":"blackAlpha.200",backgroundColor:"dark"===t?"gray.700":"gray.50",whiteSpace:"nowrap","&:first-of-type":{position:"sticky",left:0,zIndex:1},"&:last-of-type":{borderRight:"none",position:"sticky",right:0,zIndex:1}}}}},RmgEnrichedButton:{baseStyle:function(){return{flexGrow:1,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",h:10,"& span":{maxW:"100%",textOverflow:"ellipsis",overflow:"hidden"},"& span:last-of-type":{fontWeight:"normal",fontSize:"2xs"}}}},RmgErrorBoundary:{baseStyle:{flexDirection:"column",alignItems:"center",maxH:"100%",overflowY:"auto","& .chakra-alert__icon":{w:"40px",h:"40px",mr:0},"& .chakra-alert__title":{mt:4,mb:1,fontSize:"lg"},"& .chakra-alert__desc":{w:"100%","& p":{my:1},"& details":{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"sm"}}}},RmgLabel:{baseStyle:{display:"flex",flexDirection:"column",m:1,w:"unset","& label":{overflow:"hidden",fontSize:12,mr:0,mb:-.5,whiteSpace:"nowrap",textOverflow:"ellipsis"},"&.rmg-label__one-line":{flexDirection:"row",alignItems:"center","& label:first-of-type":{mr:"auto"}}}},RmgLineBadge:{baseStyle:{display:"inline-flex",alignItems:"center","& > button:first-of-type":{ml:1}}},RmgLoader:{baseStyle:{w:"100%",h:"100%",position:"absolute",top:0,right:0,alignItems:"center",justifyContent:"center","& .rmg-loader__backdrop":{position:"absolute",w:"100%",h:"100%",zIndex:1500,bg:"blackAlpha.400"},"& .chakra-progress":{zIndex:2e3}}},RmgMultiSelect:Mo,RmgOutput:{baseStyle:function(e){var t=e.noWrap;return To({minH:6,fontSize:"sm"},t?Do:{textWrap:"pretty"})}},RmgPage:{baseStyle:{position:"relative",flexDirection:"column",flex:1,overflow:"hidden",background:"inherit"}},RmgPageHeader:{baseStyle:{alignItems:"center",flexWrap:"wrap",pl:2,pr:3,py:1,zIndex:10}},RmgSection:{baseStyle:{position:"relative",background:"inherit"}},RmgSectionHeader:{baseStyle:{display:"flex",alignItems:"center",flexWrap:"wrap",position:"sticky",top:0,background:"inherit",px:2,py:1,zIndex:5}},RmgSidePanel:{baseStyle:function(e){var t=e.colorMode,n=e.width,i=e.alwaysOverlay;return{height:"100%",position:i?"absolute":{base:"absolute",lg:"relative"},right:i?0:{base:0,lg:"unset"},background:"light"===t?"white":"gray.800",boxShadow:"lg",flexShrink:0,flexDirection:"column",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",zIndex:5,"&.show-side-panel":{maxW:{base:"100%",sm:n},w:{base:"100%",sm:"unset"},visibility:"initial"},"& .rmg-side-panel__inner":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:n}},"& .rmg-side-panel__header":{flexShrink:0,pl:3,pr:1,py:0,"& button":{ml:"auto"}},"& .rmg-side-panel__body":{display:"flex",flexDirection:"column",flex:1,overflowY:"auto",p:1},"& .rmg-side-panel__footer":{display:"flex",justifyContent:"flex-end",p:1}}}},RmgThrottledSlider:{baseStyle:{h:6,alignItems:"center","& .chakra-button:first-of-type":{mr:1},"& .chakra-button:last-of-type":{ml:1}}},RmgWindow:{baseStyle:{position:"relative",flexDirection:"column",height:"100%",overflow:"hidden",background:"inherit"}},RmgWindowHeader:{baseStyle:{px:2,alignItems:"center",zIndex:15,minH:10,transition:"0.3s ease-in-out"}}},Vo=function(){return Vo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vo.apply(this,arguments)},Wo="chakra-ui-color-mode",Fo={primary:Vo({},ue.colors.teal)},Xo={global:{".mw-full":{w:"100%",flexBasis:"100%"}}},Bo=function(e){var t,n=e.children;return o.jsx(de,{theme:ce({config:(t="system"===Dn.getColourMode(),Dn.isStandaloneWindow()&&(t?window.localStorage.removeItem(Wo):window.localStorage.setItem(Wo,Dn.getColourMode())),{initialColorMode:"system",useSystemColorMode:t}),colors:Fo,styles:Xo,components:$o}),children:o.jsx(Uo,{children:n})})},Uo=function(e){var t=e.children,n=he().setColorMode,i=pe();return Oe.useEffect((function(){console.log("[rmg-components] RMG theme is initialised with",i.config),Dn.onColourModeChange((function(e){if("system"===e){var t=window.matchMedia("(prefers-color-scheme: dark)").matches;n(t?"dark":"light")}else n(e)}))}),[n]),o.jsx(o.Fragment,{children:t})},Ho=(e=>(e.Predefined="predefined",e.Customized="customized",e.Punctuation="punctuation",e))(Ho||{});const Yo=e=>e.map((e=>e.text)).join(""),qo=e=>e.map((e=>e.pinyin)).join("");var Go=(e=>(e.BreakWeak=" ",e.BreakMedium=",",e.BreakStrong=".",e))(Go||{});const Ko=(e,t)=>{let n="";return[Jo.ChineseWuSimplifiedXiaotong,Jo.ChineseMandarinSimplified,Jo.ChineseCantoneseSimplified,Jo.ChineseCantoneseTraditional].includes(e)?n={" ":" ",",":"，",".":"。"}[t]:[Jo.ChineseWuSimplifiedYunzhe,Jo.EnglishUnitedKingdom,Jo.EnglishUnitedStates].includes(e)&&(n={" ":" ",",":", ",".":". "}[t]),{type:"punctuation",voiceName:e,text:n,pinyin:n,subType:t}};var Jo=e("V",(e=>(e.ChineseWuSimplifiedXiaotong="wuu-CN-XiaotongNeural",e.ChineseWuSimplifiedYunzhe="wuu-CN-YunzheNeural",e.ChineseCantoneseSimplified="yue-CN-XiaoMinNeural",e.ChineseCantoneseTraditional="zh-HK-HiuMaanNeural",e.ChineseMandarinSimplified="zh-CN-XiaoqiuNeural",e.EnglishUnitedStates="en-US-RyanMultilingualNeural",e.EnglishUnitedKingdom="en-GB-RyanNeural",e))(Jo||{})),Qo=(e=>(e.ShanghaiMetro="shmetro",e))(Qo||{}),Zo=e("S",(e=>(e.Arrival="arr",e.Stop="stp",e.Departure="dep",e.Midway="mdw",e))(Zo||{}));const er=e("x",{style:"shmetro",baseVariants:{},stations:{},metadata:{}});e("w",(e=>{const t=[];for(const n in e)for(const i in e[n])for(const o in e[n][i]){const r=e[n][i][o];0!==r.length&&t.push(`${n}_${i}_${o}: ${qo(r)}`)}return t}));var tr=(e=>(e.PARAM="param",e.ACCOUNT="rmg-home__account",e))(tr||{}),nr=e("E",(e=>(e.APP_LOAD="APP_LOAD",e.IMPORT_RMG_PARAM="IMPORT_RMG_PARAM",e.DOWNLOAD_PARAM="DOWNLOAD_PARAM",e.DOWNLOAD_TEXT="DOWNLOAD_TEXT",e))(nr||{}));const ir=je({name:"app",initialState:{telemetry:{app:!0,project:!0}},reducers:{setTelemetryApp:(e,t)=>{e.telemetry.app=t.payload},setTelemetryProject:(e,t)=>{e.telemetry.project=t.payload}}}),{setTelemetryApp:or,setTelemetryProject:rr}=ir.actions,ar=ir.reducer,sr=je({name:"crawl",initialState:{content:"ご欢１迎1乘こじ。nihao",columns:207,viewableColumns:200,scale:.2},reducers:{setContent:(e,t)=>{e.content=t.payload},setColumns:(e,t)=>{e.columns=t.payload},setViewableColumns:(e,t)=>{e.viewableColumns=t.payload},setScale:(e,t)=>{e.scale=t.payload}}}),{setContent:lr,setColumns:ur,setViewableColumns:cr,setScale:dr}=sr.actions,hr=sr.reducer,pr=je({name:"param",initialState:{project:er},reducers:{setProject:(e,t)=>{e.project=t.payload},setVariant:(e,t)=>{const{stnID:n,stage:i,voiceName:o,variant:r,value:a}=t.payload;e.project.stations[n]?.[i]?.[o]&&(e.project.stations[n][i][o][r]=a)},setBaseVariant:(e,t)=>{const{stage:n,voiceName:i,variant:o,value:r}=t.payload;e.project.baseVariants[n]?.[i]&&(e.project.baseVariants[n][i][o]=r)}}}),{setProject:fr,setVariant:gr,setBaseVariant:mr}=pr.actions;e({B:fr,P:gr,Q:mr});const yr=pr.reducer,vr={reconciledPhrases:{},showDefaultVariants:!1,currentStationID:"kaxg",currentStage:Zo.Departure,currentVoice:Jo.ChineseMandarinSimplified,globalAlerts:{}},xr=je({name:"runtime",initialState:vr,reducers:{setReconciledPhrases:(e,t)=>{e.reconciledPhrases=t.payload},setShowDefaultVariants:(e,t)=>{e.showDefaultVariants=t.payload},setCurrentStationID:(e,t)=>{e.currentStationID=t.payload},setCurrentStage:(e,t)=>{e.currentStage=t.payload},setCurrentVoice:(e,t)=>{e.currentVoice=t.payload},setRmtToken:(e,t)=>{e.rmtToken=t.payload},removeRmtToken:e=>{e.rmtToken=void 0},setGlobalAlert:(e,t)=>{const{status:n,message:i,url:o,linkedApp:r}=t.payload;e.globalAlerts[n]={message:i,url:o,linkedApp:r}},closeGlobalAlert:(e,t)=>{delete e.globalAlerts[t.payload]}}}),{setReconciledPhrases:wr,setShowDefaultVariants:br,setCurrentStationID:Sr,setCurrentStage:Nr,setCurrentVoice:Cr,setRmtToken:Or,removeRmtToken:Pr,setGlobalAlert:jr,closeGlobalAlert:kr}=xr.actions;e({C:Sr,D:Nr,W:Cr,F:jr,O:kr});const Ar=xr.reducer;var Rr=e("A",(e=>(e.CREATED="CREATED",e.CANCELLED="CANCELLED",e.PROCESSING="PROCESSING",e.COMPLETED="COMPLETED",e.FAILED="FAILED",e))(Rr||{})),Lr=e("k",(e=>(e.AUDIOTASKS="/audio",e))(Lr||{}));const zr=e("j",(async(e,t,n)=>{const i=structuredClone({accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"});n&&(i.Authorization=`Bearer ${n}`);const o=await fetch(`https://railmapgen.org/v1${e}`,{headers:i,...t});if(401!==o.status)return o})),_r=e("h",ke("audio/fetchTasks",(async(e,{getState:t,rejectWithValue:n})=>{const{rmtToken:i}=t().runtime;if(!i)return n("No token.");const o=await zr(Lr.AUDIOTASKS,{},i);if(!o)return n("Can not recover from expired refresh token.");if(200!==o.status)return n(o.text);const r=await o.json();return r.tasks.forEach((e=>{e.createdAt=new Date(e.createdAt).getTime(),e.updatedAt=new Date(e.updatedAt).getTime()})),r.tasks}))),Er=(e("i",ke("audio/cancelTask",(async(e,{getState:t,dispatch:n,rejectWithValue:i})=>{const{rmtToken:o}=t().runtime;if(!o)return i("No token.");const r=await zr(`${Lr.AUDIOTASKS}/${e}`,{method:"PATCH",body:JSON.stringify({status:Rr.CANCELLED})},o);return r?200!==r.status?i(r.text):void n(_r()):i("Can not recover from expired refresh token.")}))),e("n",ke("audio/newTask",(async(e,{getState:t,dispatch:n,rejectWithValue:i})=>{const{rmtToken:o,reconciledPhrases:r}=t().runtime;if(!o)return i("No token.");const a=(e=>{const t=structuredClone(e);for(const n in e)for(const i in e[n])for(const o in e[n][i]){const r=e[n][i][o].map((e=>{const t=structuredClone(e);return delete t.text,delete t.voiceName,t}));t[n][i][o]=r}return t})(r),s=await zr(Lr.AUDIOTASKS,{method:"POST",body:JSON.stringify({data:a})},o);return s?201!==s.status?i(s.text):void n(_r()):i("Can not recover from expired refresh token.")}))),je({name:"app",initialState:{isModalOpen:!1,tasks:[]},reducers:{openAudioModal:e=>{e.isModalOpen=!0},closeAudioModal:e=>{e.isModalOpen=!1}},extraReducers:e=>{e.addCase(_r.fulfilled,((e,t)=>{e.tasks=t.payload}))}})),{openAudioModal:Ir,closeAudioModal:Mr}=Er.actions;e({t:Ir,v:Mr});const Tr=Er.reducer,Dr=Ae({app:ar,crawl:hr,param:yr,runtime:Ar,audio:Tr}),$r=Re(),Vr=((e={})=>Le({reducer:Dr,middleware:e=>e().prepend($r.middleware),preloadedState:e}))(),Wr=e("f",(()=>ze())),Fr=e("g",_e),Xr=$r.startListening;function Br(){const{t:e}=Ee(),t=Wr(),{project:{metadata:n}}=Fr((e=>e.param)),{showDefaultVariants:i,currentStationID:r}=Fr((e=>e.runtime)),[a,s]=Oe.useState({});return Oe.useEffect((()=>{const t=Object.fromEntries([["default",e("Base Variant")],...Object.entries(n).map((([e,{name:t}])=>[e,t]))]);s(t)}),[n]),o.jsx(fe,{height:"100%",overflowY:"auto",children:o.jsxs(ge,{variant:"simple",height:"100%",children:[o.jsx(me,{children:o.jsx(ye,{children:o.jsx(ve,{children:e("Station Variants")})})}),o.jsx(xe,{children:Object.entries(a).map((([e,n])=>o.jsx(ye,{onClick:()=>{var n;"default"===(n=e)?t(br(!0)):(t(br(!1)),t(Sr(n)),t(Nr(Zo.Departure)))},children:o.jsx(we,{children:n})},e)))})]})})}window.rmgStore=Vr;const Ur=3,Hr=8;function Yr(e,t){return e.getUint32(t,!0)}function qr(e){const t=new DataView(e),n=new Uint8Array(e);if(1!==n[0]||102!==n[1]||99!==n[2]||112!==n[3])throw new Error("Not a valid PCF file (bad signature)");const i=Yr(t,4);let o=8;const r=[];for(let h=0;h<i;h++){const e=Yr(t,o+0),n=Yr(t,o+4),i=Yr(t,o+8),a=Yr(t,o+12);r.push({type:e,format:n,size:i,offset:a}),o+=16}const a=r.find((e=>4===e.type));if(!a)throw new Error("No PCF_METRICS in file");const s=function(e,t){const n=t.offset,i=Yr(e,n),o=!!(256&i);let r,a=n+4;o?(r=e.getInt16(a),a+=2):(r=e.getInt32(a),a+=4);const s=[];for(let l=0;l<r;l++){let t,n,i,r,l;o?(t=e.getUint8(a+0)-128,n=e.getUint8(a+1)-128,i=e.getUint8(a+2)-128,r=e.getUint8(a+3)-128,l=e.getUint8(a+4)-128,a+=5):(t=e.getInt16(a+0),n=e.getInt16(a+2),i=e.getInt16(a+4),r=e.getInt16(a+6),l=e.getInt16(a+8),a+=10,a+=2),s.push({leftSideBearing:t,rightSideBearing:n,characterWidth:i,ascent:r,descent:l})}return s}(t,a),l=r.find((e=>8===e.type));if(!l)throw new Error("No PCF_BITMAPS in file");const u=function(e,t,n,i){const o=n.offset,r=Yr(e,o);let a=o+4;const s=r&Ur,l=(0===s?8:1===s?16:32)/8,u=!(r&Hr),c=e.getInt32(a);a+=4;const d=[];for(let f=0;f<c;f++)d.push(e.getInt32(a)),a+=4;e.getInt32(a+0),e.getInt32(a+4),e.getInt32(a+8),e.getInt32(a+12),a+=16;const h=a,p=new Array(c);for(let f=0;f<c;f++){const e=i[f],n=e.characterWidth,o=e.ascent+e.descent,r=[];let a=h+d[f];for(let i=0;i<o;i++){const i=new Array(n).fill(!1);for(let e=0;e<l;e++){const o=t[a+e];for(let t=0;t<8;t++){const r=8*e+t;if(r<n)if(u){const e=1<<t;i[r]=!!(o&e)}else{const e=1<<7-t;i[r]=!!(o&e)}}}e.leftSideBearing>0&&i.unshift(...new Array(e.leftSideBearing).fill(!1)),r.push(i),a+=l}const s=e.descent>=0&&e.descent<2?2-e.descent:0;if(s>0)for(let t=0;t<s;t++){const t=new Array(n).fill(!1);e.leftSideBearing>0&&t.unshift(...new Array(e.leftSideBearing).fill(!1)),r.push(t)}p[f]=r}return p}(t,n,l,s),c=r.find((e=>32===e.type));if(!c)throw new Error("No PCF_BDF_ENCODINGS in file");const d=function(e,t){const n=t.offset;Yr(e,n);let i=n+4;const o=e.getInt16(i);i+=2;const r=e.getInt16(i);i+=2;const a=e.getInt16(i);i+=2;const s=e.getInt16(i);i+=2;const l=e.getInt16(i);i+=2;const u=(r-o+1)*(s-a+1),c=new Uint16Array(u);for(let d=0;d<u;d++)c[d]=e.getInt16(i),i+=2;return{minCharOrByte2:o,maxCharOrByte2:r,minByte1:a,maxByte1:s,defaultChar:l,glyphIndexes:c}}(t,c);return{allBitmaps:u,encData:d}}const Gr=(e,t,n)=>{const i=function(e,t){const n=e.codePointAt(0);if(null==n)return null;const i=n>>8&255,o=255&n;if(i<t.minByte1||i>t.maxByte1)return null;if(o<t.minCharOrByte2||o>t.maxCharOrByte2)return null;const r=t.maxCharOrByte2-t.minCharOrByte2+1,a=i-t.minByte1,s=o-t.minCharOrByte2,l=a*r+s,u=t.glyphIndexes[l];return 65535===u?null:u}(n,t);return null==i?(console.warn(`No glyph found for character: '${n}'`),null):e[i]},Kr=16,Jr=32,Qr=16,Zr="orange",ea=()=>{const{reconciledPhrases:e,currentStationID:t,currentStage:n,currentVoice:i}=Fr((e=>e.runtime)),{columns:r,scale:a}=Fr((e=>e.crawl)),s=e[t]?.[n]?.[i],l=Yo(s??[]),u=""===l?" ":l;console.log(u);const c=Pe.useRef(null),d=Pe.useRef([]),h=Pe.useRef(null),[p,f]=Pe.useState([]),[g,m]=Pe.useState([]),y=Pe.useCallback((()=>{if(!d.current||!h.current||!u)return;const e=[],t=[];for(const n of u){const i=Gr(d.current,h.current,n);i&&(i.length<Qr&&i.unshift(...Array.from({length:Qr-i.length},(()=>Array(i[0].length).fill(!1)))),e.push(i),t.push(i[0].length))}f(e),m(t)}),[u]);Pe.useEffect((()=>{(async()=>{const e=await fetch("fonts/wenquanyi_12pt.pcf"),t=await e.arrayBuffer();c.current=t;const{allBitmaps:n,encData:i}=qr(t);d.current=n,h.current=i,y()})()}),[]),Pe.useEffect((()=>y()),[u]);const v=g.reduce(((e,t)=>e+t),0),x=r-v,w=Math.floor(x/2),b=x-w;return o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:"crawl",style:{backgroundColor:"black"},viewBox:`0 0 ${v*Jr} 512`,width:v*Jr*a,height:512*a,children:[o.jsxs("defs",{children:[o.jsxs("filter",{id:"glow",children:[o.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),o.jsxs("feMerge",{children:[o.jsx("feMergeNode",{in:"coloredBlur"}),o.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),o.jsxs("filter",{id:"neon",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2",floodColor:Zr,floodOpacity:"1"}),o.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"5",floodColor:Zr,floodOpacity:"0.7"}),o.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"10",floodColor:Zr,floodOpacity:"0.4"})]}),o.jsxs("filter",{id:"orange-glow",filterUnits:"userSpaceOnUse",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"5",result:"blur5"}),o.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur10"}),o.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"20",result:"blur20"}),o.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"30",result:"blur30"}),o.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"50",result:"blur50"}),o.jsxs("feMerge",{result:"blur-merged",children:[o.jsx("feMergeNode",{in:"blur10"}),o.jsx("feMergeNode",{in:"blur20"}),o.jsx("feMergeNode",{in:"blur30"}),o.jsx("feMergeNode",{in:"blur50"})]}),o.jsx("feColorMatrix",{result:"red-blur",in:"blur-merged",type:"matrix",values:"1 0 0 0 0\n                                0 0.65 0 0 0\n                                0 0 0.1 0 0\n                                0 0 0 1 0"}),o.jsxs("feMerge",{children:[o.jsx("feMergeNode",{in:"red-blur"})," ",o.jsx("feMergeNode",{in:"blur5"})," ",o.jsx("feMergeNode",{in:"SourceGraphic"})," "]})]})]}),x>0&&o.jsx("g",{id:"remaining-left",children:Array(w).fill(0).map(((e,t)=>Array(Qr).fill(0).map(((e,n)=>o.jsx(ta,{x:t*Jr+Kr,y:n*Jr+Kr},`rl${t}${n}`)))))}),p.map(((e,t)=>o.jsx("g",{id:u.at(t),children:e.map(((e,n)=>e.map(((e,i)=>o.jsx(ta,{x:i*Jr+g.slice(0,t).reduce(((e,t)=>e+t),0)*Jr+Kr+(x>0?w*Jr:0),y:n*Jr+Kr,on:e},u.at(t)+i.toString()+n.toString())))))},`${u.at(t)}+${t}}`))),x>0&&o.jsx("g",{id:"remaining-right",children:Array(b).fill(0).map(((e,t)=>Array(Qr).fill(0).map(((e,n)=>o.jsx(ta,{x:(w+v+t)*Jr+Kr,y:n*Jr+Kr},`rr${t}${n}`)))))})]})},ta=({x:e,y:t,on:n=!1})=>o.jsx("circle",{cx:e,cy:t,r:14,fill:n?Zr:"dimgray",filter:n?"url(#neon)":void 0});function na(e){return be({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 0 0-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 0 0 .61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(e)}function ia(){const{t:e}=Ee(),t=Wr(),{reconciledPhrases:n,currentStationID:i,currentStage:r,currentVoice:a}=Fr((e=>e.runtime)),{columns:s,scale:l}=Fr((e=>e.crawl)),u=n[i]?.[r]?.[a],c=Yo(u??[])??"No content",[d,h]=Pe.useState(!1);return o.jsxs(m,{children:[o.jsx(ie,{icon:o.jsx(na,{}),"aria-label":e("Settings"),onClick:()=>h(!0),style:{position:"absolute",right:"10px",top:"10px"}}),o.jsxs(Se,{size:"xl",isOpen:d,onClose:()=>h(!1),children:[o.jsx(D,{}),o.jsxs(Ne,{children:[o.jsx(V,{children:e("Settings")}),o.jsxs(F,{children:[o.jsx(yo,{label:"content",children:o.jsx(jo,{children:c})}),o.jsx(yo,{label:"scale",children:o.jsx(Po,{defaultValue:l,value:l,min:.1,max:1,step:.1,onThrottledChange:e=>t(dr(e))})})]}),o.jsx(B,{})]})]})]})}const oa=Pe.lazy((()=>Xn((()=>t.import("./page-header-legacy-CB_dRHEw.js"))))),ra=Pe.lazy((()=>Xn((()=>t.import("./stage-legacy-Dr7mXFtM.js")))));function aa(){const{t:e}=Ee();Wr();const{project:{style:t}}=Fr((e=>e.param));return o.jsx(Bo,{children:o.jsxs(Ro,{children:[o.jsx(oa,{}),o.jsx(Lo,{children:o.jsxs(g,{flexDirection:"row",children:[o.jsx(m,{style:{width:"200px",height:"calc(100vh - 40px)",overflowY:"auto"},children:o.jsx(Br,{})}),o.jsxs(g,{width:"calc(100% - 200px)",flexDirection:"column",children:[o.jsx(ia,{}),o.jsx(m,{style:{overflow:"scroll"},children:o.jsx(ea,{})}),o.jsx(y,{marginTop:"2"}),t===Qo.ShanghaiMetro&&o.jsx(ra,{})]})]})})]})})}const sa={header:{about:{rma:"Rail Map Announcer"}}},la={header:{about:{rma:"地铁线路图放送机"}}},ua={header:{about:{rma:"地鐵線路圖放送機"}}},ca={header:{about:{rma:"地下鉄路線図放送機"}}},da={header:{about:{rma:"지하철 노선도 안내원"}}},ha=(new Dn.I18nBuilder).use(Ie).withAppName("Rail Map Announcer").withLng(Dn.getLanguage()).withResource("en",sa).withResource("zh-Hans",la).withResource("zh-Hant",ua).withResource("ja",ca).withResource("ko",da).build(),pa={style:"shmetro",baseVariants:{arr:{"wuu-CN-XiaotongNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",doorDirection:"left"},"zh-CN-XiaoqiuNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",doorDirection:"left"},"wuu-CN-YunzheNeural":{terminal:"Shanghai Railway Station",terminalPinyin:"上海火车站",doorDirection:"left"}},dep:{"wuu-CN-XiaotongNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",nextDoorDirection:"left",lineName:"1号线",lineNamePinyin:"1号线",noteLastTrain:!0,loop:"none",loopTerminal:!1},"zh-CN-XiaoqiuNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",nextDoorDirection:"left",lineName:"1号线",lineNamePinyin:"1号线",noteLastTrain:!0,loop:"none",loopTerminal:!1},"wuu-CN-YunzheNeural":{terminal:"Shanghai Railway Station",terminalPinyin:"Shanghai Railway Station",nextDoorDirection:"left",lineName:"Line 1",lineNamePinyin:"Line 1"}},mdw:{"wuu-CN-XiaotongNeural":{caution:!1},"zh-CN-XiaoqiuNeural":{caution:!1},"wuu-CN-YunzheNeural":{}}},stations:{iwf6:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},dep:{"wuu-CN-XiaotongNeural":{next:"外环路",nextPinyin:"外环路",int:[]},"zh-CN-XiaoqiuNeural":{next:"外环路",nextPinyin:"外环路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Waihuanlu",nextPinyin:"Waihuanlu",int:[],noteLastTrain:!1}}},l1mz:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"外环路",namePinyin:"外环路"},"zh-CN-XiaoqiuNeural":{name:"外环路",namePinyin:"外环路"},"wuu-CN-YunzheNeural":{name:"Waihuanlu",namePinyin:"Waihuanlu"}},dep:{"wuu-CN-XiaotongNeural":{next:"莲花路",nextPinyin:"莲花路",int:[]},"zh-CN-XiaoqiuNeural":{next:"莲花路",nextPinyin:"莲花路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Lianhua Road ",nextPinyin:"Lianhua Road ",int:[],noteLastTrain:!1}}},qzjx:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"莲花路",namePinyin:"莲花路"},"zh-CN-XiaoqiuNeural":{name:"莲花路",namePinyin:"莲花路"},"wuu-CN-YunzheNeural":{name:"Lianhua Road ",namePinyin:"Lianhua Road "}},dep:{"wuu-CN-XiaotongNeural":{next:"锦江乐园",nextPinyin:"锦江乐园",int:[]},"zh-CN-XiaoqiuNeural":{next:"锦江乐园",nextPinyin:"锦江乐园",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"JinJiang Park",nextPinyin:"JinJiang Park",int:[],noteLastTrain:!1}}},jsat:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"锦江乐园",namePinyin:"锦江乐园"},"zh-CN-XiaoqiuNeural":{name:"锦江乐园",namePinyin:"锦江乐园"},"wuu-CN-YunzheNeural":{name:"JinJiang Park",namePinyin:"JinJiang Park"}},dep:{"wuu-CN-XiaotongNeural":{next:"上海南站",nextPinyin:"上海南站",int:[["3号线","15号线"],["金山铁路"]]},"zh-CN-XiaoqiuNeural":{next:"上海南站",nextPinyin:"上海南站",int:[["3号线","15号线"],["金山铁路"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Shanghai South Railway Station",nextPinyin:"Shanghai South Railway Station",int:[["Line 3","Line 15"],["Jingshan Railway"]],noteLastTrain:!1}}},srpy:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"上海南站",namePinyin:"上海南站"},"zh-CN-XiaoqiuNeural":{name:"上海南站",namePinyin:"上海南站"},"wuu-CN-YunzheNeural":{name:"Shanghai South Railway Station",namePinyin:"Shanghai South Railway Station"}},dep:{"wuu-CN-XiaotongNeural":{next:"漕宝路",nextPinyin:"漕宝路",int:[["12号线"]]},"zh-CN-XiaoqiuNeural":{next:"漕宝路",nextPinyin:"漕宝路",int:[["12号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Caobao Road",nextPinyin:"Caobao Road",int:[["Line 12"]],noteLastTrain:!1}}},x9gu:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"漕宝路",namePinyin:"漕宝路"},"zh-CN-XiaoqiuNeural":{name:"漕宝路",namePinyin:"漕宝路"},"wuu-CN-YunzheNeural":{name:"Caobao Road",namePinyin:"Caobao Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"上海体育馆",nextPinyin:"上海体育馆",int:[["4号线"]]},"zh-CN-XiaoqiuNeural":{next:"上海体育馆",nextPinyin:"上海体育馆",int:[["4号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Shanghai Indoor Stadium",nextPinyin:"Shanghai Indoor Stadium",int:[["Line 4"]],noteLastTrain:!1}}},k9k5:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"上海体育馆",namePinyin:"上海体育馆"},"zh-CN-XiaoqiuNeural":{name:"上海体育馆",namePinyin:"上海体育馆"},"wuu-CN-YunzheNeural":{name:"Shanghai Indoor Stadium",namePinyin:"Shanghai Indoor Stadium"}},dep:{"wuu-CN-XiaotongNeural":{next:"徐家汇",nextPinyin:"徐家汇",int:[["9号线","11号线"]]},"zh-CN-XiaoqiuNeural":{next:"徐家汇",nextPinyin:"徐家汇",int:[["9号线","11号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Xujiahui",nextPinyin:"Xujiahui",int:[["Line 9","Line 11"]],noteLastTrain:!1}}},j2kn:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"徐家汇",namePinyin:"徐家汇"},"zh-CN-XiaoqiuNeural":{name:"徐家汇",namePinyin:"徐家汇"},"wuu-CN-YunzheNeural":{name:"Xujiahui",namePinyin:"Xujiahui"}},dep:{"wuu-CN-XiaotongNeural":{next:"衡山路",nextPinyin:"衡山路",int:[]},"zh-CN-XiaoqiuNeural":{next:"衡山路",nextPinyin:"衡山路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Hengshan Road",nextPinyin:"Hengshan Road",int:[],noteLastTrain:!1}}},lcgp:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"衡山路",namePinyin:"衡山路"},"zh-CN-XiaoqiuNeural":{name:"衡山路",namePinyin:"衡山路"},"wuu-CN-YunzheNeural":{name:"Hengshan Road",namePinyin:"Hengshan Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"常熟路",nextPinyin:"常熟路",int:[["7号线"]]},"zh-CN-XiaoqiuNeural":{next:"常熟路",nextPinyin:"常熟路",int:[["7号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Changshu Road",nextPinyin:"Changshu Road",int:[["Line 7"]],noteLastTrain:!1}}},h3vs:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"常熟路",namePinyin:"常熟路"},"zh-CN-XiaoqiuNeural":{name:"常熟路",namePinyin:"常熟路"},"wuu-CN-YunzheNeural":{name:"Changshu Road",namePinyin:"Changshu Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"陕西南路",nextPinyin:"陕西南路",int:[["10号线","12号线"]]},"zh-CN-XiaoqiuNeural":{next:"陕西南路",nextPinyin:"陕西南路",int:[["10号线","12号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"South Shaanxi Road",nextPinyin:"South Shaanxi Road",int:[["Line 10","Line 12"]],noteLastTrain:!1}}},jjh7:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"陕西南路",namePinyin:"陕西南路"},"zh-CN-XiaoqiuNeural":{name:"陕西南路",namePinyin:"陕西南路"},"wuu-CN-YunzheNeural":{name:"South Shaanxi Road",namePinyin:"South Shaanxi Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"一大会址·黄陂南路",nextPinyin:"一大会址·黄陂南路",int:[["14号线"]]},"zh-CN-XiaoqiuNeural":{next:"一大会址·黄陂南路",nextPinyin:"一大会址·黄陂南路",int:[["14号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Site of the First CPC National\\Congress · South Huangpi Road",nextPinyin:"Site of the First CPC National\\Congress · South Huangpi Road",int:[["Line 14"]],noteLastTrain:!1}}},wbtv:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"一大会址·黄陂南路",namePinyin:"一大会址·黄陂南路"},"zh-CN-XiaoqiuNeural":{name:"一大会址·黄陂南路",namePinyin:"一大会址·黄陂南路"},"wuu-CN-YunzheNeural":{name:"Site of the First CPC National\\Congress · South Huangpi Road",namePinyin:"Site of the First CPC National\\Congress · South Huangpi Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"人民广场",nextPinyin:"人民广场",int:[["2号线","8号线"]]},"zh-CN-XiaoqiuNeural":{next:"人民广场",nextPinyin:"人民广场",int:[["2号线","8号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"People's Square",nextPinyin:"People's Square",int:[["Line 2","Line 8"]],noteLastTrain:!1}}},kaxg:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"人民广场",namePinyin:"人民广场"},"zh-CN-XiaoqiuNeural":{name:"人民广场",namePinyin:"人民广场"},"wuu-CN-YunzheNeural":{name:"People's Square",namePinyin:"People's Square"}},dep:{"wuu-CN-XiaotongNeural":{next:"新闸路",nextPinyin:"新闸路",int:[]},"zh-CN-XiaoqiuNeural":{next:"新闸路",nextPinyin:"新闸路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"XinZha Road",nextPinyin:"XinZha Road",int:[],noteLastTrain:!1}}},"7x7k":{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"新闸路",namePinyin:"新闸路"},"zh-CN-XiaoqiuNeural":{name:"新闸路",namePinyin:"新闸路"},"wuu-CN-YunzheNeural":{name:"XinZha Road",namePinyin:"XinZha Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"汉中路",nextPinyin:"汉中路",int:[["12号线","13号线"]]},"zh-CN-XiaoqiuNeural":{next:"汉中路",nextPinyin:"汉中路",int:[["12号线","13号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Hanzhong Road",nextPinyin:"Hanzhong Road",int:[["Line 12","Line 13"]],noteLastTrain:!1}}},qnbj:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"汉中路",namePinyin:"汉中路"},"zh-CN-XiaoqiuNeural":{name:"汉中路",namePinyin:"汉中路"},"wuu-CN-YunzheNeural":{name:"Hanzhong Road",namePinyin:"Hanzhong Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"上海火车站",nextPinyin:"上海火车站",int:[["3号线","4号线"]]},"zh-CN-XiaoqiuNeural":{next:"上海火车站",nextPinyin:"上海火车站",int:[["3号线","4号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Shanghai Railway Station",nextPinyin:"Shanghai Railway Station",int:[["Line 3","Line 4"]],noteLastTrain:!1}}},sd6y:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"上海火车站",namePinyin:"上海火车站"},"zh-CN-XiaoqiuNeural":{name:"上海火车站",namePinyin:"上海火车站"},"wuu-CN-YunzheNeural":{name:"Shanghai Railway Station",namePinyin:"Shanghai Railway Station"}}}},metadata:{iwf6:{name:"莘庄"},l1mz:{name:"外环路"},qzjx:{name:"莲花路"},jsat:{name:"锦江乐园"},srpy:{name:"上海南站"},x9gu:{name:"漕宝路"},k9k5:{name:"上海体育馆"},j2kn:{name:"徐家汇"},lcgp:{name:"衡山路"},h3vs:{name:"常熟路"},jjh7:{name:"陕西南路"},wbtv:{name:"一大会址·黄陂南路"},kaxg:{name:"人民广场"},"7x7k":{name:"新闸路"},qnbj:{name:"汉中路"},sd6y:{name:"上海火车站"}}};var fa=(e=>(e.NextStopTerminal="NextStopTerminal",e.TerminalAllGetOffLeft="TerminalAllGetOffLeft",e.TerminalAllGetOffRight="TerminalAllGetOffRight",e.Arrive="Arrive",e.DoorOpenLeft="DoorOpenLeft",e.DoorOpenRight="DoorOpenRight",e.TheTerminalOfThisTrain="TheTerminalOfThisTrain",e.NextStop="NextStop",e.InterchangeAvailable="InterchangeAvailable",e.OutOfStationInterchangeAvailable="OutOfStationInterchangeAvailable",e.OutOfStationInterchangeAvailableEnglish2="OutOfStationInterchangeAvailableEnglish2",e.OutOfSystemInterchangeAvailable="OutOfSystemInterchangeAvailable",e.NoteLastTrain="NoteLastTrain",e.LeaveLoveSeat="LeaveLoveSeat",e.Caution="Caution",e.Loop="Loop",e.InnerLoop="InnerLoop",e.OuterLoop="OuterLoop",e))(fa||{});const ga={[Zo.Arrival]:{[Jo.ChineseMandarinSimplified]:{NextStopTerminal:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"终点站",pinyin:"终点站",rate:"+18.00%"},Arrive:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"到了",pinyin:"到了",rate:"+18.00%"},TerminalAllGetOffLeft:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"请全体乘客在屏蔽门完全打开后，从左边车门下车。",pinyin:"请全体乘客在屏蔽门完全打开后，从左边车门下车。",rate:"+18.00%"},TerminalAllGetOffRight:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"请全体乘客在屏蔽门完全打开后，从右边车门下车。",pinyin:"请全体乘客在屏蔽门完全打开后，从右边车门下车。",rate:"+18.00%"},DoorOpenLeft:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"}},[Jo.ChineseWuSimplifiedXiaotong]:{NextStopTerminal:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"终点站",rate:"+18.00%",pinyin:"终点站"},Arrive:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"到了",pinyin:"到了",rate:"+18.00%"},TerminalAllGetOffLeft:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"请所有乘客勒屏蔽门完全打开后，从左边车门下车。",pinyin:"请所有乘客勒屏蔽门完全打开后，从左边车门下车。",rate:"+18.00%"},TerminalAllGetOffRight:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"请所有乘客勒屏蔽门完全打开后，从右边车门下车。",pinyin:"请所有乘客勒屏蔽门完全打开后，从右边车门下车。",rate:"+18.00%"},DoorOpenLeft:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"}},[Jo.ChineseWuSimplifiedYunzhe]:{NextStopTerminal:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"the terminal station",pinyin:"the terminal station"},Arrive:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"We are now at",pinyin:"We are now at"},TerminalAllGetOffLeft:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Please get ready to the exit from the left side. ",pinyin:"Please get ready to the exit from the left side. "},TerminalAllGetOffRight:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Please get ready to the exit from the right side. ",pinyin:"Please get ready to the exit from the right side. "},DoorOpenLeft:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Doors will open on the left",pinyin:"Doors will open on the left"},DoorOpenRight:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Doors will open on the right",pinyin:"Doors will open on the right"}}},[Zo.Departure]:{[Jo.ChineseMandarinSimplified]:{TheTerminalOfThisTrain:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"本次列车终点站",pinyin:"本次列车终点站",rate:"+18.00%"},InnerLoop:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"本次列车内圈运行",pinyin:"本次列车内圈运行",rate:"+18.00%"},OuterLoop:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"本次列车外圈运行",pinyin:"本次列车外圈运行",rate:"+18.00%"},Loop:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"本线为环线",pinyin:"本线为环线",rate:"+18.00%"},NextStop:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"下一站",pinyin:"下一站",rate:"+18.00%"},NextStopTerminal:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"终点站",pinyin:"终点站",rate:"+18.00%"},DoorOpenLeft:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"},InterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"可换乘",pinyin:"可换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfStationInterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"手持交通卡的乘客，可在出站后30分钟内，免费换乘",pinyin:"手持交通卡的乘客，可在出站后30分钟内，免费换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfSystemInterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"可转乘",pinyin:"可转乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},NoteLastTrain:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"请注意换乘列车的首末班车时间。",pinyin:"请注意换乘列车的首末班车时间。",rate:"+18.00%"}},[Jo.ChineseWuSimplifiedXiaotong]:{TheTerminalOfThisTrain:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"本趟列车额终点站是",pinyin:"本趟列车额终点站是",rate:"+18.00%"},InnerLoop:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"本趟列车内圈运行",pinyin:"本趟列车内圈运行",rate:"+18.00%"},OuterLoop:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"本趟列车外圈运行",pinyin:"本趟列车外圈运行",rate:"+18.00%"},Loop:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"本线为环线",pinyin:"本线为环线",rate:"+18.00%"},NextStop:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"下一站",pinyin:"下一站",rate:"+18.00%"},NextStopTerminal:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"终点站",pinyin:"终点站",rate:"+18.00%"},DoorOpenLeft:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"},InterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"可以换乘",pinyin:"可以换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfStationInterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"拿着交通卡的乘客，好勒出站后30分钟内，免费换乘",pinyin:"拿着交通卡的乘客，好勒出站后30分钟内，免费换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfSystemInterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"可以转乘",pinyin:"可以转乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},NoteLastTrain:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedXiaotong,text:"请注意换乘列车额首末班车辰光。",pinyin:"请注意换乘列车额首末班车辰光。",rate:"+18.00%"}},[Jo.ChineseWuSimplifiedYunzhe]:{TheTerminalOfThisTrain:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"The terminal is",pinyin:"The terminal is"},NextStop:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Next station is",pinyin:"Next station is"},NextStopTerminal:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"the terminal station",pinyin:"the terminal station"},DoorOpenLeft:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Doors will open on the left",pinyin:"Doors will open on the left"},DoorOpenRight:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Doors will open on the right",pinyin:"Doors will open on the right"},InterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Your can transfer to",pinyin:"Your can transfer to"},OutOfStationInterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"Passengers holding public transportation card, may transfer to",pinyin:"Passengers holding public transportation card, may transfer to",contour:"(60%, +0%) (100%, +30%)"},OutOfStationInterchangeAvailableEnglish2:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"within 30 minutes after getting out of the station. ",pinyin:"within 30 minutes after getting out of the station. "},OutOfSystemInterchangeAvailable:{type:Ho.Predefined,voiceName:Jo.ChineseWuSimplifiedYunzhe,text:"or take the",pinyin:"or take the",contour:"(50%, +0%) (100%, +30%)"}}},[Zo.Midway]:{[Jo.ChineseMandarinSimplified]:{LeaveLoveSeat:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"请把爱心专座留给有需要的乘客。",pinyin:"请把爱心专座留给有需要的乘客。",rate:"+18.00%"},Caution:{type:Ho.Predefined,voiceName:Jo.ChineseMandarinSimplified,text:"列车运行时，请站稳扶好，不要玩手机，注意脚下安全。",pinyin:"列车运行时，请站稳扶好，不要玩手机，注意脚下安全。",rate:"+18.00%"}}}},ma=(e,t,n)=>{const i=ga[e]?.[t]?.[n];if(!i)throw new Error(`Predefined phrase must exist in predefinedPhrases, stage: ${e}, voiceName: ${t}, predefinedPhraseType: ${n}.`);return{...i,subType:n}},ya={[Qo.ShanghaiMetro]:{reconcile:(e,t,n,i)=>{((e,t,n)=>{if(e===Zo.Arrival){if(void 0===n[Zo.Arrival]?.[t]?.terminal)throw new Error(`Terminal must exist in baseVariants, stage: ${Zo.Arrival}, voiceName: ${t}.`);if(void 0===n[Zo.Arrival]?.[t]?.doorDirection)throw new Error(`Door direction must exist in baseVariants, stage: ${Zo.Arrival}, voiceName: ${t}.`)}if(e===Zo.Departure){if(void 0===n[Zo.Departure]?.[t]?.terminal)throw new Error(`Terminal must exist in baseVariants, stage: ${Zo.Departure}, voiceName: ${t}.`);if(void 0===n[Zo.Departure]?.[t]?.nextDoorDirection)throw new Error(`Next door direction must exist in baseVariants, stage: ${Zo.Departure}, voiceName: ${t}.`)}})(e,t,i);const o=t===Jo.ChineseWuSimplifiedYunzhe?void 0:"+18.00%",r=[];if(e===Zo.Arrival){t===Jo.ChineseWuSimplifiedYunzhe&&(r.push(ma(e,t,fa.Arrive)),r.push(Ko(t,Go.BreakWeak)));const a=(n.terminal??i[Zo.Arrival][t].terminal)===n.name;a&&(r.push(ma(e,t,fa.NextStopTerminal)),r.push(Ko(t,Go.BreakWeak))),r.push({type:Ho.Customized,voiceName:t,text:n.name,pinyin:n.namePinyin,rate:o}),r.push(Ko(t,t===Jo.ChineseWuSimplifiedYunzhe?Go.BreakStrong:Go.BreakWeak)),[Jo.ChineseMandarinSimplified,Jo.ChineseWuSimplifiedXiaotong].includes(t)&&(r.push(ma(e,t,fa.Arrive)),r.push(Ko(t,Go.BreakStrong)));const s=n.doorDirection??i[Zo.Arrival][t].doorDirection??"left";if(a){const n="left"===s?fa.TerminalAllGetOffLeft:fa.TerminalAllGetOffRight;if(r.push(ma(e,t,n)),i[Zo.Arrival][t].thanksForTaking){const e={[Jo.ChineseMandarinSimplified]:`感谢您乘坐${i[Zo.Arrival][t].thanksForTaking}，祝您旅途愉快。`,[Jo.ChineseWuSimplifiedXiaotong]:`谢谢侬搭乘${i[Zo.Arrival][t].thanksForTaking}，阿拉下趟再会。`,[Jo.ChineseWuSimplifiedYunzhe]:`Thanks for taking ${i[Zo.Arrival][t].thanksForTaking}, see you next time.`}[t];r.push({type:Ho.Customized,voiceName:t,text:e,pinyin:i[Zo.Arrival][t].thanksForTakingPinyin,rate:o})}}else{const n="left"===s?fa.DoorOpenLeft:fa.DoorOpenRight;r.push(ma(e,t,n)),r.push(Ko(t,Go.BreakStrong))}}else if(e===Zo.Departure){const a=n.welcomeAbroad??i[Zo.Departure][t].welcomeAbroad,s=n.lineName??i[Zo.Departure][t].lineName;if(a&&s){const e={[Jo.ChineseMandarinSimplified]:`欢迎乘坐${a}${s}`,[Jo.ChineseWuSimplifiedXiaotong]:`欢迎搭乘${a}${s}`,[Jo.ChineseWuSimplifiedYunzhe]:`Welcome aboard ${a} ${s}`}[t],l=n.welcomeAbroadPinyin??i[Zo.Departure][t].welcomeAbroadPinyin,u=n.lineNamePinyin??i[Zo.Departure][t].lineNamePinyin,c={[Jo.ChineseMandarinSimplified]:`欢迎乘坐${l}${u}`,[Jo.ChineseWuSimplifiedXiaotong]:`欢迎搭乘${l}${u}`,[Jo.ChineseWuSimplifiedYunzhe]:`Welcome aboard ${l} ${u}`}[t];r.push({type:Ho.Customized,voiceName:t,text:e,pinyin:c,rate:o}),r.push(Ko(t,Go.BreakStrong))}const l=n.loop??i[Zo.Departure][t].loop,u=n.terminal??i[Zo.Arrival][t].terminal,c=n.terminal??i[Zo.Arrival][t].terminalPinyin;if(l){if(!("inner"!==l&&"outer"!==l||t!==Jo.ChineseMandarinSimplified&&t!==Jo.ChineseWuSimplifiedXiaotong)){const a=!1===l?fa.Loop:"inner"===l?fa.InnerLoop:fa.OuterLoop;r.push(ma(e,t,a)),r.push(Ko(t,Go.BreakStrong)),(n.loopTerminal??i[Zo.Departure][t].loopTerminal)&&(r.push(ma(e,t,fa.NextStopTerminal)),r.push(Ko(t,Go.BreakWeak)),r.push({type:Ho.Customized,voiceName:t,text:u,pinyin:c,rate:o}),r.push(Ko(t,Go.BreakStrong)))}}else r.push(ma(e,t,fa.TheTerminalOfThisTrain)),r.push(Ko(t,Go.BreakWeak)),r.push({type:Ho.Customized,voiceName:t,text:u,pinyin:c,rate:o}),r.push(Ko(t,Go.BreakStrong));r.push(ma(e,t,fa.NextStop)),r.push(Ko(t,Go.BreakWeak)),n.next===u&&(r.push(ma(e,t,fa.NextStopTerminal)),r.push(Ko(t,Go.BreakWeak))),r.push({type:Ho.Customized,voiceName:t,text:n.next,pinyin:n.nextPinyin,rate:o}),r.push(Ko(t,Go.BreakStrong));const d="left"===(n.nextDoorDirection??i[Zo.Departure][t].nextDoorDirection??"left")?fa.DoorOpenLeft:fa.DoorOpenRight;r.push(ma(e,t,d)),r.push(Ko(t,Go.BreakStrong));const h=n.int;h?.flat().length&&((h.at(0)?.length??0)>0&&(r.push(ma(e,t,fa.InterchangeAvailable)),r.push(Ko(t,Go.BreakWeak)),r.push(...h.at(0).map((e=>[{type:Ho.Customized,voiceName:t,text:e,pinyin:e,rate:o},Ko(t,Go.BreakWeak)])).flat()),r.pop(),r.push(Ko(t,Go.BreakStrong))),(h.at(1)?.length??0)>0&&(r.push(ma(e,t,fa.OutOfStationInterchangeAvailable)),r.push(Ko(t,Go.BreakWeak)),r.push(...h.at(1).map((e=>[{type:Ho.Customized,voiceName:t,text:e,pinyin:e,rate:o},Ko(t,Go.BreakWeak)])).flat()),r.pop(),t===Jo.ChineseWuSimplifiedYunzhe?(r.push(Ko(t,Go.BreakWeak)),r.push(ma(e,t,fa.OutOfStationInterchangeAvailableEnglish2))):r.push(Ko(t,Go.BreakStrong))),(h.at(2)?.length??0)>0&&(r.push(ma(e,t,fa.OutOfSystemInterchangeAvailable)),r.push(Ko(t,Go.BreakWeak)),r.push(...h.at(2).map((e=>[{type:Ho.Customized,voiceName:t,text:e,pinyin:e,rate:o},Ko(t,Go.BreakWeak)])).flat()),r.pop(),r.push(Ko(t,Go.BreakStrong))),!(n.noteLastTrain??i[Zo.Departure][t].noteLastTrain)||t!==Jo.ChineseMandarinSimplified&&t!==Jo.ChineseWuSimplifiedXiaotong||r.push(ma(e,t,fa.NoteLastTrain)))}else e===Zo.Midway&&((n.leaveLoveSeat??i[Zo.Midway][t].leaveLoveSeat)&&r.push(ma(e,t,fa.LeaveLoveSeat)),(n.caution??i[Zo.Midway][t].caution)&&r.push(ma(e,t,fa.Caution)));return r}}};function va(e){Xr({predicate:(e,t,n)=>JSON.stringify(t.param.project)!==JSON.stringify(n.param.project),effect:(e,t)=>{const{project:n}=t.getState().param,i=(e=>{const t={};for(const n in e.stations){t[n]={};for(const i in e.stations[n]){t[n][i]={};for(const o in e.stations[n][i]){const r=e.stations[n][i][o];if(!r)throw new Error("Should never happen!");const a=ya[e.style].reconcile(i,o,r,e.baseVariants);t[n][i][o]=a}}}return t})(n);console.log(i),t.dispatch(wr(i));const o=t.getState().param;Dn.storage.set(tr.PARAM,JSON.stringify(o))}}),xa(e)}const xa=e=>{const t=Dn.storage.get(tr.PARAM);if(t){const n=JSON.parse(t);$n.debug(`Get param from local storage: ${t}`),e.dispatch(fr(n.project)),e.dispatch(Sr(Object.keys(n.project.metadata)[0])),e.dispatch(Nr(Zo.Departure))}else $n.warn("No param from local storage. Setting to default."),e.dispatch(fr(pa))};let wa;Dn.ready().then((()=>{va(Vr),wa=Fn.createRoot(document.getElementById("root")),wa.render(o.jsx(Oe.StrictMode,{children:o.jsx(Me,{store:Vr,children:o.jsx(Te,{i18n:ha,children:o.jsx(aa,{})})})})),Dn.injectUITools(),Dn.event(nr.APP_LOAD,{}),(e=>{const t=t=>{if(!t)return $n.debug("Account string is empty, logging out"),void e.dispatch(Pr());const n=JSON.parse(t),{token:i}=n;$n.debug(`Updating token to: ${i}`),e.dispatch(Or(i))};let n=localStorage.getItem(tr.ACCOUNT);t(n??void 0),window.onstorage=()=>{const e=localStorage.getItem(tr.ACCOUNT);n!==e&&(n=e,$n.debug(`Account string changed to: ${e}`),t(e??void 0))}})(Vr)}))}}}));
