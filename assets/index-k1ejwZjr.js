const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/page-header-C2gHcSLH.js","assets/chakra-DHo0XYjR.js","assets/react-DFJlY5Ze.js","assets/stage-Cbp2ilsJ.js"])))=>i.map(i=>d[i]);
import{u as je,a as mi,j as d,P as yi,c as bt,F as vi,f as Me,W as pr,T as xi,b as wi,d as bi,e as gr,g as lt,h as Ce,B as it,D as Jt,i as Ci,k as Si,l as Oi,m as mr,C as Ni,S as yr,n as Pi,o as _i,p as Ri,I as Ai,q as vr,r as ji,s as Li,t as Ei,v as Ii,w as Ti,x as Mi,y as ki,z as Di,A as zi,M as xr,E as Fi,G as wr,H as $i,J as br,K as Ie,L as Cr,N as Dn,O as Bi,Q as zn,R as Wi,U as Hi,V as Ui,X as Xi,Y as Vi,Z as Yi,_ as Gi,$ as qi,a0 as Ki,a1 as Qt,a2 as Ji,a3 as Qi,a4 as Zi,a5 as ea,a6 as Ze,a7 as ta,a8 as na,a9 as ra,aa as ia,ab as aa,ac as oa,ad as sa,ae as la,af as Fn,ag as ua,ah as ca,ai as da,aj as se,ak as fa,al as ha}from"./chakra-DHo0XYjR.js";import{e as pa,a as x,d as te,f as ut,h as dn,i as ga,j as ma,k as ya,u as va,l as xa,m as fn,n as wa,P as ba,I as Ca}from"./react-DFJlY5Ze.js";function mc(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Sa=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};const Sr=t=>new Promise(e=>{setTimeout(e,t,"Timeout after ".concat(t/1e3," seconds"))}),Oa=t=>new Promise(e=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(t)}),Na=t=>{let e,n=!1;return r=>Sa(void 0,void 0,void 0,function*(){return e&&(n||!r)?e:(e=t(),n=!0,e.then(i=>(n=!1,i)).catch(i=>{throw e=null,i}))})},hn=t=>{let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e);return e},pn=t=>{const e=(t&16777215).toString(16).toUpperCase();return"#"+"00000".substring(0,6-e.length)+e};var Ae;(function(t){t.DEV="DEV",t.UAT="UAT",t.PRD="PRD"})(Ae||(Ae={}));const Or="rmg-runtime__language",Nr="rmg-runtime__colourMode",Ct="rmg-runtime__allowAnalytics",ct="rmg-unknown",Pa="railmapgen.github.io",_a="rmg-home";let St=ct,Pr=pn(hn(ct));const Ra=t=>{St=t,Pr=pn(hn(t))},dt=()=>"[".concat(St,"]"),ft=()=>Pr,be=(t,e,n)=>(...r)=>{typeof r[0]=="string"?t("%c".concat(e(),"%c ").concat(r[0]),"color: ".concat(n()),"",...r.slice(1)):t("%c".concat(e(),"%c"),"color: ".concat(n()),"",...r)},Aa={debug:be(console.debug,dt,ft),info:be(console.info,dt,ft),warn:be(console.warn,dt,ft),error:be(console.error,dt,ft)},qe=()=>St===ct?"[runtime]":"[runtime@".concat(St,"]"),ja=pn(hn("runtime")),Ke=()=>ja,Y={setup:Ra,logger:Aa,debug:be(console.debug,qe,Ke),info:be(console.info,qe,Ke),warn:be(console.warn,qe,Ke),error:be(console.error,qe,Ke),group:be(console.group,qe,Ke),groupEnd:console.groupEnd};var _r=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};let gn,Et,mn,yn,vn;const Rr=()=>{gn=!1,Et=ct,mn="unknown",yn=Ae.PRD,vn="unknown"},La=()=>_r(void 0,void 0,void 0,function*(){const t=window.location.pathname.split("/")[1],e=t?"/".concat(t,"/info.json"):"/info.json",n=yield fetch(e);if(n.ok){const r=yield n.json();Y.info("Received info.json",r),Et=r.component,mn=r.version,yn=r.environment,vn=r.instance}else throw new Error("Failed to fetch config from ".concat(e))}),Ea=()=>_r(void 0,void 0,void 0,function*(){try{Y.group("Loading config...");const t=yield Promise.race([La(),Sr(10*1e3)]);t?Y.error("❌ Failed to load config.",t):(gn=!0,Y.info("✅ Config loaded!"))}catch(t){Y.error("❌ Failed to load config.",t)}finally{Y.groupEnd()}}),Ia=()=>gn,Ta=()=>Ar()?_a:Et,Ma=()=>mn,ka=()=>yn,Da=()=>vn,Ar=()=>Et===Pa;Rr();const re={loadWithTimeout:Ea,isInitialised:Ia,getComponent:Ta,getVersion:Ma,getEnvironment:ka,getInstance:Da,isRMT:Ar,_resetConfig:Rr};window.dataLayer=window.dataLayer||[];const za=()=>{const t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-2HP8Y4MRRQ",document.head.append(t)};function Zt(...t){if(re.getEnvironment()!==Ae.DEV)return window.dataLayer.push(arguments);Y.info("Not going to send event in DEV environment",t)}const Fa=(t,e={})=>{Zt("event",t,e)},$a=()=>{za(),Zt("js",new Date),Zt("config","G-2HP8Y4MRRQ",{appName:re.getComponent(),version:re.getVersion(),environment:re.getEnvironment(),instance:re.getInstance()})},Ot={init:$a,customEvent:Fa},Ba="rmg-runtime-channel",mt={};let et;try{et=new BroadcastChannel(Ba),et.onmessage=t=>{var e;const{event:n,data:r,frameId:i}=t.data;(e=mt[n])===null||e===void 0||e.forEach(a=>a(r,i))}}catch(t){Y.warn("Failed to initiate broadcast channel. Some features may be unavailable.",t)}const Wa=(t,e)=>{var n;Y.debug("Broadcasting event ".concat(t," with data"),e),et==null||et.postMessage({event:t,data:e,frameId:(n=window.frameElement)===null||n===void 0?void 0:n.id})},Ha=(t,e)=>{var n;t in mt?(n=mt[t])===null||n===void 0||n.push(e):mt[t]=[e]},J={postEvent:Wa,onMessage:Ha},jr="TOGGLE_NAV_MENU",Lr="OPEN_APP",Er="CLOSE_APP",Ir="UPDATE_APP_METADATA",Tr="UPDATE_URL",yt=()=>!window.frameElement,Ua=()=>{var t;return!!(!((t=window.frameElement)===null||t===void 0)&&t.closest(".show-menu"))},Xa=()=>{if(!yt()){const e=document.createElement("style");e.textContent="body{padding: 0;}",document.head.appendChild(e)}const t=document.createElement("style");t.textContent=".rmg-window__header:not(.rmg-window__app-clip-header),.rm-window__header:not(.rm-window__app-clip-header){margin-left: 40px;}",!yt()&&!Ua()&&document.head.appendChild(t),yt()||J.onMessage(jr,e=>{if(e)try{document.head.removeChild(t)}catch(n){Y.warn("Unable to remove indent style from RmgWindowHeader",n)}else document.head.appendChild(t)})},Va=t=>{J.postEvent(Lr,t)},Ya=t=>{J.postEvent(Er,t)},Ga=t=>{J.postEvent(Ir,t)},qa=t=>{J.postEvent(Tr,t)},Ka=t=>{J.onMessage(Lr,t)},Ja=t=>{J.onMessage(Er,t)},Qa=t=>{J.onMessage(Ir,t)},Za=t=>{J.onMessage(Tr,t)},eo=t=>{J.postEvent(jr,t)},de={isStandaloneWindow:yt,injectUITools:Xa,openApp:Va,onAppOpen:Ka,closeApp:Ya,onAppClose:Ja,updateAppMetadata:Ga,onAppMetadataUpdate:Qa,updateUrl:qa,onUrlUpdate:Za,toggleNavMenu:eo},Mr="SET_LANGUAGE",kr="SET_COLOUR_MODE",to=t=>{J.postEvent(Mr,t),window.localStorage.setItem(Or,t)},no=()=>window.localStorage.getItem(Or)||"en",ro=t=>{J.onMessage(Mr,t)},Dr=["light","dark","system"],io=t=>{Dr.includes(t)&&(J.postEvent(kr,t),window.localStorage.setItem(Nr,t))},ao=t=>!!(t&&Dr.includes(t)),oo=()=>{const t=window.localStorage.getItem(Nr);return ao(t)?t:"system"},so=t=>{J.onMessage(kr,t)},lo=()=>window.localStorage.getItem(Ct)!==null,zr=()=>window.localStorage.getItem(Ct)==="true",uo=t=>{const e=zr();return t?(e||(window.localStorage.setItem(Ct,t.toString()),Ot.init()),{refreshRequired:!1}):e?(window.localStorage.setItem(Ct,t.toString()),{refreshRequired:!0}):{refreshRequired:!1}},fe={setLanguage:to,getLanguage:no,onLanguageChange:ro,setColourMode:io,getColourMode:oo,onColourModeChange:so,isAnalyticsQADone:lo,isAllowAnalytics:zr,allowAnalytics:uo},co=new Date().getTime();function fo(){const t=re.getComponent(),e=window.localStorage.getItem(t+"__startTime");return e===null?new Date().getTime()-co:new Date().getTime()-Number(e)}const ho={getMsSinceStartUp:fo},vt={},Ve=()=>{const t=re.getComponent();if(t===ct)throw new Error("Unable to clear storage for unknown app");return t};window.addEventListener("storage",t=>{var e;const{key:n,newValue:r}=t;n&&((e=vt[n])===null||e===void 0||e.forEach(i=>i(r)))});const po=(t,e)=>{var n;const r="".concat(Ve(),"__").concat(t);r in vt?(n=vt[r])===null||n===void 0||n.push(e):vt[r]=[e]},go=t=>{const e=Ve();return window.localStorage.getItem("".concat(e,"__").concat(t))},mo=()=>{const t=Ve(),e={};let n=0;for(;n<window.localStorage.length;){const r=window.localStorage.key(n);if(r!=null&&r.startsWith(t+"__")){const i=window.localStorage.getItem(r);i&&(e[r]=i)}n++}return e},yo=(t,e)=>{const n=Ve();window.localStorage.setItem("".concat(n,"__").concat(t),e)},vo=t=>{const e=Ve();window.localStorage.removeItem("".concat(e,"__").concat(t))},xo=()=>{const t=Ve();let e=0;for(;e<window.localStorage.length;){const n=window.localStorage.key(e);n!=null&&n.startsWith(t+"__")?(window.localStorage.removeItem(n),Y.info("Removed item ".concat(n))):e++}},$e={on:po,get:go,getAll:mo,set:yo,remove:vo,clear:xo},C=t=>typeof t=="string",Je=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},$n=t=>t==null?"":""+t,wo=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},bo=/###/g,Bn=t=>t&&t.indexOf("###")>-1?t.replace(bo,"."):t,Wn=t=>!t||C(t),tt=(t,e,n)=>{const r=C(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(Wn(t))return{};const a=Bn(r[i]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return Wn(t)?{}:{obj:t,k:Bn(r[i])}},Hn=(t,e,n)=>{const{obj:r,k:i}=tt(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let a=e[e.length-1],o=e.slice(0,e.length-1),s=tt(t,o,Object);for(;s.obj===void 0&&o.length;)a="".concat(o[o.length-1],".").concat(a),o=o.slice(0,o.length-1),s=tt(t,o,Object),s&&s.obj&&typeof s.obj["".concat(s.k,".").concat(a)]<"u"&&(s.obj=void 0);s.obj["".concat(s.k,".").concat(a)]=n},Co=(t,e,n,r)=>{const{obj:i,k:a}=tt(t,e,Object);i[a]=i[a]||[],i[a].push(n)},Nt=(t,e)=>{const{obj:n,k:r}=tt(t,e);if(n)return n[r]},So=(t,e,n)=>{const r=Nt(t,n);return r!==void 0?r:Nt(e,n)},Fr=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?C(t[r])||t[r]instanceof String||C(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):Fr(t[r],e[r],n):t[r]=e[r]);return t},Be=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Oo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const No=t=>C(t)?t.replace(/[&<>"'\/]/g,e=>Oo[e]):t;class Po{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const _o=[" ",",","?","!",";"],Ro=new Po(20),Ao=(t,e,n)=>{e=e||"",n=n||"";const r=_o.filter(o=>e.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const i=Ro.getRegExp("(".concat(r.map(o=>o==="?"?"\\?":o).join("|"),")"));let a=!i.test(t);if(!a){const o=t.indexOf(n);o>0&&!i.test(t.substring(0,o))&&(a=!0)}return a},en=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let o,s="";for(let l=a;l<r.length;++l)if(l!==a&&(s+=n),s+=r[l],o=i[s],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<r.length-1)continue;a+=l-a+1;break}i=o}return i},Pt=t=>t&&t.replace("_","-"),jo={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};class _t{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||jo,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(C(e[0])&&(e[0]="".concat(r).concat(this.prefix," ").concat(e[0])),this.logger[n](e))}create(e){return new _t(this.logger,{prefix:"".concat(this.prefix,":").concat(e,":"),...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new _t(this.logger,e)}}var ve=new _t;class It{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[s,l]=o;for(let u=0;u<l;u++)s(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[s,l]=o;for(let u=0;u<l;u++)s.apply(s,[e,...r])})}}class Un extends It{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let s;e.indexOf(".")>-1?s=e.split("."):(s=[e,n],r&&(Array.isArray(r)?s.push(...r):C(r)&&a?s.push(...r.split(a)):s.push(r)));const l=Nt(this.data,s);return!l&&!n&&!r&&e.indexOf(".")>-1&&(e=s[0],n=s[1],r=s.slice(2).join(".")),l||!o||!C(r)?l:en(this.data&&this.data[e]&&this.data[e][n],r,a)}addResource(e,n,r,i){let a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let s=[e,n];r&&(s=s.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(s=e.split("."),i=n,n=s[1]),this.addNamespaces(n),Hn(this.data,s,i),a.silent||this.emit("added",e,n,r,i)}addResources(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const a in r)(C(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},s=[e,n];e.indexOf(".")>-1&&(s=e.split("."),i=r,r=n,n=s[1]),this.addNamespaces(n);let l=Nt(this.data,s)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?Fr(l,r,a):l={...l,...r},Hn(this.data,s,l),o.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var $r={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(a=>{this.processors[a]&&(e=this.processors[a].process(e,n,r,i))}),e}};const Xn={};class Rt extends It{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),wo(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ve.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Ao(e,r,i);if(o&&!s){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:C(a)?[a]:a};const u=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(u[0])>-1)&&(a=u.shift()),e=u.join(i)}return{key:e,namespaces:C(a)?[a]:a}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:o,namespaces:s}=this.extractFromKey(e[e.length-1],n),l=s[s.length-1],u=n.lng||this.language,c=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(c){const _=n.nsSeparator||this.options.nsSeparator;return i?{res:"".concat(l).concat(_).concat(o),usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:"".concat(l).concat(_).concat(o)}return i?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o}const h=this.resolve(e,n);let f=h&&h.res;const p=h&&h.usedKey||o,m=h&&h.exactUsedKey||o,y=Object.prototype.toString.apply(f),b=["[object Number]","[object Function]","[object RegExp]"],R=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,O=!this.i18nFormat||this.i18nFormat.handleAsObject,U=!C(f)&&typeof f!="boolean"&&typeof f!="number";if(O&&f&&U&&b.indexOf(y)<0&&!(C(R)&&Array.isArray(f))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,f,{...n,ns:s}):"key '".concat(o," (").concat(this.language,")' returned an object instead of string.");return i?(h.res=_,h.usedParams=this.getUsedParamsDetails(n),h):_}if(a){const _=Array.isArray(f),E=_?[]:{},z=_?m:p;for(const S in f)if(Object.prototype.hasOwnProperty.call(f,S)){const P="".concat(z).concat(a).concat(S);E[S]=this.translate(P,{...n,joinArrays:!1,ns:s}),E[S]===P&&(E[S]=f[S])}f=E}}else if(O&&C(R)&&Array.isArray(f))f=f.join(R),f&&(f=this.extendTranslation(f,e,n,r));else{let _=!1,E=!1;const z=n.count!==void 0&&!C(n.count),S=Rt.hasDefaultValue(n),P=z?this.pluralResolver.getSuffix(u,n.count,n):"",I=n.ordinal&&z?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",j=z&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),A=j&&n["defaultValue".concat(this.options.pluralSeparator,"zero")]||n["defaultValue".concat(P)]||n["defaultValue".concat(I)]||n.defaultValue;!this.isValidLookup(f)&&S&&(_=!0,f=A),this.isValidLookup(f)||(E=!0,f=o);const W=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&E?void 0:f,X=S&&A!==f&&this.options.updateMissing;if(E||_||X){if(this.logger.log(X?"updateKey":"missingKey",u,l,o,X?A:f),a){const G=this.resolve(o,{...n,keySeparator:!1});G&&G.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let F=[];const Q=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Q&&Q[0])for(let G=0;G<Q.length;G++)F.push(Q[G]);else this.options.saveMissingTo==="all"?F=this.languageUtils.toResolveHierarchy(n.lng||this.language):F.push(n.lng||this.language);const De=(G,$,le)=>{const V=S&&le!==f?le:W;this.options.missingKeyHandler?this.options.missingKeyHandler(G,l,$,V,X,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(G,l,$,V,X,n),this.emit("missingKey",G,l,$,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&z?F.forEach(G=>{const $=this.pluralResolver.getSuffixes(G,n);j&&n["defaultValue".concat(this.options.pluralSeparator,"zero")]&&$.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&$.push("".concat(this.options.pluralSeparator,"zero")),$.forEach(le=>{De([G],o+le,n["defaultValue".concat(le)]||A)})}):De(F,o,A))}f=this.extendTranslation(f,e,n,h,r),E&&f===o&&this.options.appendNamespaceToMissingKey&&(f="".concat(l,":").concat(o)),(E||_)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(o):o,_?f:void 0):f=this.options.parseMissingKeyHandler(f))}return i?(h.res=f,h.usedParams=this.getUsedParamsDetails(n),h):f}extendTranslation(e,n,r,i,a){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=C(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let c;if(u){const f=e.match(this.interpolator.nestingRegexp);c=f&&f.length}let h=r.replace&&!C(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||i.usedLng,r),u){const f=e.match(this.interpolator.nestingRegexp),p=f&&f.length;c<p&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return a&&a[0]===p[0]&&!r.context?(o.logger.warn("It seems you are nesting recursively key: ".concat(p[0]," in key: ").concat(n[0])),null):o.translate(...p,n)},r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=C(s)?[s]:s;return e!=null&&l&&l.length&&r.applyPostProcessor!==!1&&(e=$r.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,i,a,o,s;return C(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(l,n),c=u.key;i=c;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const f=n.count!==void 0&&!C(n.count),p=f&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),m=n.context!==void 0&&(C(n.context)||typeof n.context=="number")&&n.context!=="",y=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);h.forEach(b=>{this.isValidLookup(r)||(s=b,!Xn["".concat(y[0],"-").concat(b)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(Xn["".concat(y[0],"-").concat(b)]=!0,this.logger.warn('key "'.concat(i,'" for languages "').concat(y.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(R=>{if(this.isValidLookup(r))return;o=R;const O=[c];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(O,c,R,b,n);else{let _;f&&(_=this.pluralResolver.getSuffix(R,n.count,n));const E="".concat(this.options.pluralSeparator,"zero"),z="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(f&&(O.push(c+_),n.ordinal&&_.indexOf(z)===0&&O.push(c+_.replace(z,this.options.pluralSeparator)),p&&O.push(c+E)),m){const S="".concat(c).concat(this.options.contextSeparator).concat(n.context);O.push(S),f&&(O.push(S+_),n.ordinal&&_.indexOf(z)===0&&O.push(S+_.replace(z,this.options.pluralSeparator)),p&&O.push(S+E))}}let U;for(;U=O.pop();)this.isValidLookup(r)||(a=U,r=this.getResource(R,b,U,n))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:o,usedNS:s}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!C(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of n)delete i[a]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const Xt=t=>t.charAt(0).toUpperCase()+t.slice(1);class Vn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ve.create("languageUtils")}getScriptPartFromCode(e){if(e=Pt(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Pt(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(C(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let i=Intl.getCanonicalLocales(e)[0];if(i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i)return i}catch(i){}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(i=>i.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Xt(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=Xt(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=Xt(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(a=>{if(a===i)return a;if(!(a.indexOf("-")<0&&i.indexOf("-")<0)&&(a.indexOf("-")>0&&i.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===i||a.indexOf(i)===0&&i.length>1))return a})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),C(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),i=[],a=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(o)))};return C(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):C(e)&&a(this.formatLanguageCode(e)),r.forEach(o=>{i.indexOf(o)<0&&a(this.formatLanguageCode(o))}),i}}let Lo=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Eo={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const Io=["v1","v2","v3"],To=["v4"],Yn={zero:0,one:1,two:2,few:3,many:4,other:5},Mo=()=>{const t={};return Lo.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:Eo[e.fc]}})}),t};class ko{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=ve.create("pluralResolver"),(!this.options.compatibilityJSON||To.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Mo(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Pt(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let o;try{o=new Intl.PluralRules(r,{type:i})}catch(s){if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,n)}return this.pluralRulesCache[a]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(i=>"".concat(n).concat(i))}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((i,a)=>Yn[i]-Yn[a]).map(i=>"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(i)):r.numbers.map(i=>this.getSuffix(e,i,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const i=this.getRule(e,r);return i?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(r.ordinal?"ordinal".concat(this.options.prepend):"").concat(i.select(n)):this.getSuffixRetroCompatible(i,n):(this.logger.warn("no plural rule found for: ".concat(e)),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let i=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(i===2?i="plural":i===1&&(i=""));const a=()=>this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString();return this.options.compatibilityJSON==="v1"?i===1?"":typeof i=="number"?"_plural_".concat(i.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?a():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Io.includes(this.options.compatibilityJSON)}}const Gn=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=So(t,e,n);return!a&&i&&C(n)&&(a=en(t,n,r),a===void 0&&(a=en(e,n,r))),a},Vt=t=>t.replace(/\$/g,"$$$$");class Do{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ve.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:o,suffix:s,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:h,nestingPrefix:f,nestingPrefixEscaped:p,nestingSuffix:m,nestingSuffixEscaped:y,nestingOptionsSeparator:b,maxReplaces:R,alwaysFormat:O}=e.interpolation;this.escape=n!==void 0?n:No,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?Be(a):o||"{{",this.suffix=s?Be(s):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=f?Be(f):p||Be("$t("),this.nestingSuffix=m?Be(m):y||Be(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=R||1e3,this.alwaysFormat=O!==void 0?O:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix))}interpolate(e,n,r,i){let a,o,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=p=>{if(p.indexOf(this.formatSeparator)<0){const R=Gn(n,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(R,void 0,r,{...i,...n,interpolationkey:p}):R}const m=p.split(this.formatSeparator),y=m.shift().trim(),b=m.join(this.formatSeparator).trim();return this.format(Gn(n,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),b,r,{...i,...n,interpolationkey:y})};this.resetRegExp();const c=i&&i.missingInterpolationHandler||this.options.missingInterpolationHandler,h=i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>Vt(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?Vt(this.escape(p)):Vt(p)}].forEach(p=>{for(s=0;a=p.regex.exec(e);){const m=a[1].trim();if(o=u(m),o===void 0)if(typeof c=="function"){const b=c(e,a,i);o=C(b)?b:""}else if(i&&Object.prototype.hasOwnProperty.call(i,m))o="";else if(h){o=a[0];continue}else this.logger.warn("missed to pass in variable ".concat(m," for interpolating ").concat(e)),o="";else!C(o)&&!this.useRawValueToEscape&&(o=$n(o));const y=p.safeValue(o);if(e=e.replace(a[0],y),h?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=a[0].length):p.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i,a,o;const s=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const h=l.split(new RegExp("".concat(c,"[ ]*{")));let f="{".concat(h[1]);l=h[0],f=this.interpolate(f,o);const p=f.match(/'/g),m=f.match(/"/g);(p&&p.length%2===0&&!m||m.length%2!==0)&&(f=f.replace(/'/g,'"'));try{o=JSON.parse(f),u&&(o={...u,...o})}catch(y){return this.logger.warn("failed parsing options string in nesting for key ".concat(l),y),"".concat(l).concat(c).concat(f)}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;i=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!C(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let u=!1;if(i[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(i[1])){const c=i[1].split(this.formatSeparator).map(h=>h.trim());i[1]=c.shift(),l=c,u=!0}if(a=n(s.call(this,i[1].trim(),o),o),a&&i[0]===e&&!C(a))return a;C(a)||(a=$n(a)),a||(this.logger.warn("missed to resolve ".concat(i[1]," for nesting ").concat(e)),a=""),u&&(a=l.reduce((c,h)=>this.format(c,h,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const zo=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(o=>{if(o){const[s,...l]=o.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=s.trim();n[c]||(n[c]=u),u==="false"&&(n[c]=!1),u==="true"&&(n[c]=!0),isNaN(u)||(n[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},We=t=>{const e={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const o=r+JSON.stringify(a);let s=e[o];return s||(s=t(Pt(r),i),e[o]=s),s(n)}};class Fo{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ve.create("formatter"),this.options=e,this.formats={number:We((n,r)=>{const i=new Intl.NumberFormat(n,{...r});return a=>i.format(a)}),currency:We((n,r)=>{const i=new Intl.NumberFormat(n,{...r,style:"currency"});return a=>i.format(a)}),datetime:We((n,r)=>{const i=new Intl.DateTimeFormat(n,{...r});return a=>i.format(a)}),relativetime:We((n,r)=>{const i=new Intl.RelativeTimeFormat(n,{...r});return a=>i.format(a,r.range||"day")}),list:We((n,r)=>{const i=new Intl.ListFormat(n,{...r});return a=>i.format(a)})},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=We(n)}format(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(s=>s.indexOf(")")>-1)){const s=a.findIndex(l=>l.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,s)].join(this.formatSeparator)}return a.reduce((s,l)=>{const{formatName:u,formatOptions:c}=zo(l);if(this.formats[u]){let h=s;try{const f=i&&i.formatParams&&i.formatParams[i.interpolationkey]||{},p=f.locale||f.lng||i.locale||i.lng||r;h=this.formats[u](s,p,{...c,...i,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn("there was no format function for ".concat(u));return s},e)}}const $o=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class Bo extends It{constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=ve.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,i.backend,i)}queueLoad(e,n,r,i){const a={},o={},s={},l={};return e.forEach(u=>{let c=!0;n.forEach(h=>{const f="".concat(u,"|").concat(h);!r.reload&&this.store.hasResourceBundle(u,h)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?o[f]===void 0&&(o[f]=!0):(this.state[f]=1,c=!1,o[f]===void 0&&(o[f]=!0),a[f]===void 0&&(a[f]=!0),l[h]===void 0&&(l[h]=!0)))}),c||(s[u]=!0)}),(Object.keys(a).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(o),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(e,n,r){const i=e.split("|"),a=i[0],o=i[1];n&&this.emit("failedLoading",a,o,n),!n&&r&&this.store.addResourceBundle(a,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const s={};this.queue.forEach(l=>{Co(l.loaded,[a],o),$o(l,e),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const c=l.loaded[u];c.length&&c.forEach(h=>{s[u][h]===void 0&&(s[u][h]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:a,callback:o});return}this.readingCalls++;const s=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&c&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,a*2,o)},a);return}o(u,c)},l=this.backend[r].bind(this.backend);if(l.length===2){try{const u=l(e,n);u&&typeof u.then=="function"?u.then(c=>s(null,c)).catch(s):s(null,u)}catch(u){s(u)}return}return l(e,n,s)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();C(e)&&(e=this.languageUtils.toResolveHierarchy(e)),C(n)&&(n=[n]);const a=this.queueLoad(e,n,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(o=>{this.loadOne(o)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(o,s)=>{o&&this.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(i," failed"),o),!o&&s&&this.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(i),s),this.loaded(e,o,s)})}saveMissing(e,n,r,i,a){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn('did not save key "'.concat(r,'" as the namespace "').concat(n,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:a},u=this.backend.create.bind(this.backend);if(u.length<6)try{let c;u.length===5?c=u(e,n,r,i,l):c=u(e,n,r,i),c&&typeof c.then=="function"?c.then(h=>s(null,h)).catch(s):s(null,c)}catch(c){s(c)}else u(e,n,r,i,s,l)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const qn=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),C(t[1])&&(e.defaultValue=t[1]),C(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Kn=t=>(C(t.ns)&&(t.ns=[t.ns]),C(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),C(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),ht=()=>{},Wo=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class at extends It{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Kn(e),this.services={},this.logger=ve,this.modules={external:[]},Wo(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(C(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const i=qn();this.options={...i,...this.options,...Kn(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...i.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const a=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?ve.init(a(this.modules.logger),this.options):ve.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:typeof Intl<"u"&&(c=Fo);const h=new Vn(this.options);this.store=new Un(this.options.resources,this.options);const f=this.services;f.logger=ve,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new ko(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),c&&(!this.options.interpolation.format||this.options.interpolation.format===i.interpolation.format)&&(f.formatter=a(c),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Do(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Bo(a(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(p){for(var m=arguments.length,y=new Array(m>1?m-1:0),b=1;b<m;b++)y[b-1]=arguments[b];e.emit(p,...y)}),this.modules.languageDetector&&(f.languageDetector=a(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=a(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Rt(this.services,this.options),this.translator.on("*",function(p){for(var m=arguments.length,y=new Array(m>1?m-1:0),b=1;b<m;b++)y[b-1]=arguments[b];e.emit(p,...y)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ht),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=function(){return e.store[c](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=function(){return e.store[c](...arguments),e}});const l=Je(),u=()=>{const c=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),r(h,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ht;const i=C(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&i.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],o=s=>{if(!s||s==="cimode")return;this.services.languageUtils.toResolveHierarchy(s).forEach(u=>{u!=="cimode"&&a.indexOf(u)<0&&a.push(u)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(s=>o(s)),this.services.backendConnector.load(a,this.options.ns,s=>{!s&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(s)})}else r(null)}reloadResources(e,n,r){const i=Je();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=ht),this.services.backendConnector.reload(e,n,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&$r.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const i=Je();this.emit("languageChanging",e);const a=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,u)=>{u?(a(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,i.resolve(function(){return r.t(...arguments)}),n&&n(l,function(){return r.t(...arguments)})},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const u=C(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||a(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,c=>{o(c,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),i}getFixedT(e,n,r){var i=this;const a=function(o,s){let l;if(typeof s!="object"){for(var u=arguments.length,c=new Array(u>2?u-2:0),h=2;h<u;h++)c[h-2]=arguments[h];l=i.options.overloadTranslationOptionHandler([o,s].concat(c))}else l={...s};l.lng=l.lng||a.lng,l.lngs=l.lngs||a.lngs,l.ns=l.ns||a.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||r||a.keyPrefix);const f=i.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(o)?p=o.map(m=>"".concat(l.keyPrefix).concat(f).concat(m)):p=l.keyPrefix?"".concat(l.keyPrefix).concat(f).concat(o):o,i.t(p,l)};return C(e)?a.lng=e:a.lngs=e,a.ns=n,a.keyPrefix=r,a}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(s,l)=>{const u=this.services.backendConnector.state["".concat(s,"|").concat(l)];return u===-1||u===0||u===2};if(n.precheck){const s=n.precheck(this,o);if(s!==void 0)return s}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,e)&&(!i||o(a,e)))}loadNamespaces(e,n){const r=Je();return this.options.ns?(C(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Je();C(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return a.length?(this.options.preload=i.concat(a),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new Vn(qn());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new at(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ht;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new at(i);return(e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(s=>{a[s]=this[s]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r&&(a.store=new Un(this.store.data,i),a.services.resourceStore=a.store),a.translator=new Rt(a.services,i),a.translator.on("*",function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];a.emit(s,...u)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ne=at.createInstance();ne.createInstance=at.createInstance;ne.createInstance;ne.dir;ne.init;ne.loadResources;ne.reloadResources;ne.use;ne.changeLanguage;ne.getFixedT;ne.t;ne.exists;ne.setDefaultNamespace;ne.hasLoadedNamespace;ne.loadNamespaces;ne.loadLanguages;let Ue;const Ho=()=>Ue,Uo=t=>{fe.onLanguageChange(e=>t.changeLanguage(e))};class Xo{constructor(){this._appName="RMG",this._lng=void 0,this._defaultResources={},this._resources={}}use(e){return ne.use(e),this}withAppName(e){return this._appName=e,this}withLng(e){return this._lng=e,this}withDefaultResource(e){return Object.entries(e).forEach(([n,r])=>{this._defaultResources[n]=r}),this}withResource(e,n){return this._resources[e]=n,this}combineResource(){const e={};return Object.entries(this._defaultResources).forEach(([n,r])=>{e[n]={translation:r}}),Object.entries(this._resources).forEach(([n,r])=>{n in e?e[n].translation=Object.assign(Object.assign({},e[n].translation),r):e[n]={translation:r}}),e}build(){return Ue=ne.createInstance({lng:this._lng,fallbackLng:{"zh-CN":["zh-Hans","zh-Hant","en"],"zh-HK":["zh-Hant","zh-Hans","en"],"zh-TW":["zh-Hant","zh-Hans","en"],default:["en"]},resources:this.combineResource()},(e,n)=>{var r;if(e){Y.error("unexpected error occurs while initialising i18n",e);return}document.title=n(this._appName),document.documentElement.lang=(r=this._lng)!==null&&r!==void 0?r:"en"}),Ue.on("languageChanged",e=>{document.title=Ue.t(this._appName),document.documentElement.lang=e}),Uo(Ue),Ue}}var ot=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};let Re={};const Vo=()=>Re,Br="LOAD_REMOTE_FONT",Yo=(t,e)=>{J.postEvent(Br,{family:t,definition:e})},Go=t=>{J.onMessage(Br,t)},xn=t=>t.source.startsWith("local"),qo=t=>{var e;const n=(e=t.source.match(/url\(['"](\S+)['"]\)/))===null||e===void 0?void 0:e[1];if(!n)throw new Error("Invalid URL in source "+t.source);return new URL(n,window.location.href)},Jn=(t,e)=>{var n;return"@font-face {\n    font-family: '".concat(t,"';\n    src: ").concat(e.source,";\n    ").concat(Object.entries((n=e.descriptors)!==null&&n!==void 0?n:{}).map(([r,i])=>"".concat(r,": ").concat(i,";")).join("\n"),"\n}")},Ko=()=>Na(()=>fetch("/fonts/config.json").then(t=>t.json()));let Wr=Ko();const Jo=(t,e,n)=>ot(void 0,void 0,void 0,function*(){try{const r=new FontFace(t,e.source,e.descriptors);return xn(e)?yield r.load():r.loaded.then(n),document.fonts.add(r),Re[t]={configs:[Object.assign(Object.assign({},e),{font:r})]},!0}catch(r){return Y.warn("Failed to load font ".concat(t," with source ").concat(e.source),r),!1}}),Qo=(t,e,n)=>ot(void 0,void 0,void 0,function*(){if(e.some(xn))return Y.error("Unable to load multiple FontFace for the same family ".concat(t)),!1;const r=[];return e.forEach(i=>{const a=new FontFace(t,i.source,i.descriptors);a.loaded.then(n),document.fonts.add(a),r.push(Object.assign(Object.assign({},i),{font:a}))}),Re[t]={configs:r},!0}),Zo=(t,e)=>ot(void 0,void 0,void 0,function*(){if(t in Re)return Re[t];let n;if(e)n=e;else try{n=(yield Wr())[t]}catch(a){const o=a instanceof Error?" due to "+a.message:"";throw new Error("Unable to load font definition of "+t+o)}const r=()=>{Yo(t,n)};for(const a of n.configs)if(Array.isArray(a)?yield Qo(t,a,r):yield Jo(t,a,r))break;const i=Re[t];if(i)return i.displayName=n.displayName,i.url=n.url,Re[t]}),es=t=>ot(void 0,void 0,void 0,function*(){const e=Re[t];if(!e)throw new Error("Font family ".concat(t," is not loaded"));return(yield Promise.all(e.configs.filter(r=>{const i=r.font.status==="loaded";return i||Y.warn("Font family ".concat(t," is not loaded completely. Some FontFaceRules may be missing")),i}).map(r=>ot(void 0,void 0,void 0,function*(){if(xn(r))return Jn(t,r);const i=qo(r),a=yield fetch(i),o=yield Oa(yield a.blob());return Jn(t,Object.assign(Object.assign({},r),{source:"url('".concat(o,"')")}))})))).join("\n\n")}),Qe={getAllFonts:Wr,getLoadedFonts:Vo,loadFont:Zo,getFontCSS:es,onRemoteFontLoaded:Go},ts=()=>{if(re.getEnvironment()!=="PRD"||!re.isRMT())if(document.querySelector('meta[name="robots"]'))Y.info("Noindex meta tag already presents.");else{Y.info("Injecting noindex meta tag as this app is not PRD RMT.");const t=document.createElement("meta");t.name="robots",t.content="noindex",document.head.appendChild(t)}},ns={injectNoindexRule:ts};var Hr=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?a(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})};let Ur=!1;const rs=()=>Hr(void 0,void 0,void 0,function*(){yield re.loadWithTimeout(),Y.setup(re.getComponent()),ns.injectNoindexRule(),fe.isAnalyticsQADone()?fe.isAllowAnalytics()&&(Y.info("User has previously allowed GA"),Ot.init()):de.isStandaloneWindow()&&!re.isRMT()&&(Y.warn("App is opened in standalone window but analytics Q&A is not finished. GA will be init by default."),Ot.init()),Ur=!0}),is=()=>Hr(void 0,void 0,void 0,function*(){let t=0;for(;t<=10&&!Ur;)yield Sr(1e3),t+=1}),ie={ready:is,getAppName:re.getComponent,getAppVersion:re.getVersion,getEnv:re.getEnvironment,getInstance:re.getInstance,event:Ot.customEvent,isStandaloneWindow:de.isStandaloneWindow,injectUITools:de.injectUITools,openApp:de.openApp,onAppOpen:de.onAppOpen,closeApp:de.closeApp,onAppClose:de.onAppClose,updateAppMetadata:de.updateAppMetadata,onAppMetadataUpdate:de.onAppMetadataUpdate,updateUrl:de.updateUrl,onUrlUpdate:de.onUrlUpdate,toggleNavMenu:de.toggleNavMenu,postEvent:J.postEvent,onMessage:J.onMessage,setLanguage:fe.setLanguage,getLanguage:fe.getLanguage,onLanguageChange:fe.onLanguageChange,setColourMode:fe.setColourMode,getColourMode:fe.getColourMode,onColourModeChange:fe.onColourModeChange,isAnalyticsQADone:fe.isAnalyticsQADone,isAllowAnalytics:fe.isAllowAnalytics,allowAnalytics:fe.allowAnalytics,storage:{on:$e.on,get:$e.get,getAll:$e.getAll,set:$e.set,remove:$e.remove,clear:$e.clear},getMsSinceStartUp:ho.getMsSinceStartUp,I18nBuilder:Xo,getI18nInstance:Ho,getAllFonts:Qe.getAllFonts,getLoadedFonts:Qe.getLoadedFonts,loadFont:Qe.loadFont,getFontCSS:Qe.getFontCSS,onRemoteFontLoaded:Qe.onRemoteFontLoaded};rs().then();window.rmgRuntime=ie;const nt=Y.logger;var pt={},Qn;function as(){if(Qn)return pt;Qn=1;var t=pa();return pt.createRoot=t.createRoot,pt.hydrateRoot=t.hydrateRoot,pt}var os=as();const ss="modulepreload",ls=function(t){return"/rma/"+t},Zn={},Xr=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=ls(l),l in Zn)return;Zn[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(l,'"]').concat(c)))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":ss,u||(h.as="script"),h.crossOrigin="",h.href=l,s&&h.setAttribute("nonce",s),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(l))))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};var Vr=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,a){return i[0]===n?(r=a,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,a=this.__entries__;i<a.length;i++){var o=a[i];n.call(r,o[1],o[0])}},e}()}(),tn=typeof window<"u"&&typeof document<"u"&&window.document===document,At=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),us=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(At):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),cs=2;function ds(t,e){var n=!1,r=!1,i=0;function a(){n&&(n=!1,t()),r&&s()}function o(){us(a)}function s(){var l=Date.now();if(n){if(l-i<cs)return;r=!0}else n=!0,r=!1,setTimeout(o,e);i=l}return s}var fs=20,hs=["top","right","bottom","left","width","height","size","weight"],ps=typeof MutationObserver<"u",gs=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=ds(this.refresh.bind(this),fs)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!tn||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ps?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!tn||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=hs.some(function(a){return!!~r.indexOf(a)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),Yr=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Xe=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||At},Gr=Tt(0,0,0,0);function jt(t){return parseFloat(t)||0}function er(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var a=t["border-"+i+"-width"];return r+jt(a)},0)}function ms(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var a=i[r],o=t["padding-"+a];n[a]=jt(o)}return n}function ys(t){var e=t.getBBox();return Tt(0,0,e.width,e.height)}function vs(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return Gr;var r=Xe(t).getComputedStyle(t),i=ms(r),a=i.left+i.right,o=i.top+i.bottom,s=jt(r.width),l=jt(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+a)!==e&&(s-=er(r,"left","right")+a),Math.round(l+o)!==n&&(l-=er(r,"top","bottom")+o)),!ws(t)){var u=Math.round(s+a)-e,c=Math.round(l+o)-n;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return Tt(i.left,i.top,s,l)}var xs=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Xe(t).SVGGraphicsElement}:function(t){return t instanceof Xe(t).SVGElement&&typeof t.getBBox=="function"}}();function ws(t){return t===Xe(t).document.documentElement}function bs(t){return tn?xs(t)?ys(t):vs(t):Gr}function Cs(t){var e=t.x,n=t.y,r=t.width,i=t.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(a.prototype);return Yr(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}function Tt(t,e,n,r){return{x:t,y:e,width:n,height:r}}var Ss=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Tt(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=bs(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),Os=function(){function t(e,n){var r=Cs(n);Yr(this,{target:e,contentRect:r})}return t}(),Ns=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new Vr,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Xe(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new Ss(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Xe(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new Os(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),qr=typeof WeakMap<"u"?new WeakMap:new Vr,Kr=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=gs.getInstance(),r=new Ns(e,n,this);qr.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){Kr.prototype[t]=function(){var e;return(e=qr.get(this))[t].apply(e,arguments)}});var Ps=function(){return typeof At.ResizeObserver<"u"?At.ResizeObserver:Kr}();window.ResizeObserver||(window.ResizeObserver=Ps);var nn=function(){return nn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nn.apply(this,arguments)},_s=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},xc=function(t){var e=t.isOpen,n=t.onClose,r=t.children,i=t.sx,a=t.size,o=t.zIndex,s=_s(t,["isOpen","onClose","children","sx","size","zIndex"]),l=je("RmgAppClip",{size:a,zIndex:o!=null?o:1500}),u=x.useRef(null);return mi({ref:u,handler:n}),d.jsx(yi,{children:d.jsxs(bt.div,nn({className:e?"show-app-clip":"",sx:l},s,{children:[d.jsx("div",{className:"rmg-app-clip__overlay"}),d.jsx(vi,{isDisabled:!e,children:d.jsx("div",{className:"rmg-app-clip__container",children:d.jsx(bt.section,{ref:u,role:"dialog",className:"rmg-app-clip__content",sx:i,children:r})})})]}))})};const[Rs,ke]=As();function As(){const t=x.createContext(void 0);t.displayName="AutoCompleteContext";function e(){var n;const r=x.useContext(t),i="useAutoCompleteContext: `context` is undefined. Seems you forgot to wrap all autoomplete components within `<AutoComplete />`";if(!r){const a=new Error(i);throw a.name="ContextError",(n=Error.captureStackTrace)==null||n.call(Error,a,e),a}return r}return[t.Provider,e,t]}function js(t){return t==null?void 0:t[0]}function Yt(t){return t!=null&&t.length?t[t.length-1]:void 0}function Jr(t,e,n=1,r=!0){if(e===0)return-1;let i=t+n;return t===-1&&(i=n>0?0:e-1),r?i=(i%e+e)%e:i=Math.max(0,Math.min(i,e-1)),i}function Ls(t,e,n=!0){return Jr(t,e,-1,n)}function Es(t,e,n=!0){const r=Jr(t,e.length,1,n);return e[r]}function Is(t,e,n=!0){const r=Ls(t,e.length,n);return e[r]}function wn(t){return Array.isArray(t)}function Ts(t){return wn(t)&&t.length===0}function bn(t){return t!==null&&typeof t=="object"&&!wn(t)}function Ms(t){return bn(t)&&Object.keys(t).length===0}function Qr(t){return wn(t)?Ts(t):bn(t)?Ms(t):t==null||t===""}function xt(t){return typeof t>"u"}function Zr(t){return typeof t<"u"}function ks(t,e){const n={};return e.forEach(r=>{r in t&&(n[r]=t[r])}),n}function Cn(t,e){const n={...t};return e.forEach(r=>{delete n[r]}),n}function Ds(t){return typeof t=="function"}function q(t,...e){return Ds(t)?t(...e):t}var Mt=function(t,e){for(var n,r=x.Children.toArray(t),i=0,a=r;i<a.length;i++){var o=a[i];if(e(o))return o;if(!((n=o.props)===null||n===void 0)&&n.children){var s=Mt(o.props.children,e);if(s)return s}}},gt=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t},ei=function(t,e){for(var n,r=x.Children.toArray(t),i=[],a=0,o=r;a<o.length;a++){var s=o[a];e(s)&&(i=gt(gt([],i),[s])),!((n=s.props)===null||n===void 0)&&n.children&&(i=gt(gt([],i),ei(s.props.children,e)))}return i};function tr(t,e,n=2){function r(h,f){h=" ".repeat(f-1)+h.toLowerCase()+" ".repeat(f-1);let p=new Array(h.length-f+1);for(let m=0;m<p.length;m++)p[m]=h.slice(m,m+f);return p}if(!(t!=null&&t.length)||!(e!=null&&e.length))return 0;let i=t.length<e.length?t:e,a=t.length<e.length?e:t,o=r(i,n),s=r(a,n),l=new Set(o),u=s.length,c=0;for(let h of s)l.delete(h)&&c++;return c/u}const Sn=t=>{var e;return(e=typeof t=="string"||typeof t=="number"?t:t[Object.keys(t)[0]])==null?void 0:e.toString()},zs=(t,e)=>typeof t!="string"||Qr(e)?t:t.toString().replace(new RegExp(Ws(e),"gi"),n=>"<mark>".concat(n,"</mark>")),Fs=t=>ei(t,e=>{var n;return((n=e==null?void 0:e.type)==null?void 0:n.displayName)==="AutoCompleteItem"}).map(e=>{const n=ks(e.props,["value","label","fixed","disabled"]),{getValue:r=Sn}=e.props,i=r(n.value);return{...Zr(n.label)?n:{...n,label:i},value:i,originalValue:n.value}}),$s=()=>({bg:"whiteAlpha.100",_light:{bg:"gray.200"}}),Bs=(t,e,n)=>(e==null?void 0:e.toLowerCase().indexOf(t==null?void 0:t.toLowerCase()))>=0||(n==null?void 0:n.toLowerCase().indexOf(t==null?void 0:t.toLowerCase()))>=0||tr(t,e)>=.5||tr(t,n)>=.5;function Ws(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}const Hs=(t,e)=>Mt(t,n=>{var r;return((r=n==null?void 0:n.type)==null?void 0:r.displayName)==="AutoCompleteItem"&&n.props.value===(e==null?void 0:e.value)}),Us=(t,e)=>Mt(t,n=>{var r;return((r=n==null?void 0:n.type)==null?void 0:r.displayName)==="AutoCompleteItem"&&n.props.value===(e==null?void 0:e.value)}),Xs=(t,e)=>Zr(Mt(t,n=>{var r,i;const a=q(((r=n.props)==null?void 0:r.getValue)||Sn,((i=n.props)==null?void 0:i.value)||{});return e.some(o=>o.value===a)})),Vs=(t,e)=>{const n={},r={},{field:i}=t;return i&&Object.keys(i).forEach(a=>{if(a.startsWith("--input")===!1)n[a]=i[a];else{let o=i[a];const s=a.replace("--input-","").replace(/-([a-z])/g,function(l){return l[1].toUpperCase()});o.indexOf(".")!==-1&&(o=o.substring(o.indexOf(".")+1)),r[s]=o}}),{...e&&{...n,...r,_focusWithin:t.field._focus,pos:"relative",minH:9,py:1.5,spacing:3},cursor:"text",h:"fit-content"}};function Ys(t){var e;let{prefocusFirstItem:n=!0,closeOnBlur:r=!0,creatable:i,emphasize:a,emptyState:o=!0,defaultEmptyStateProps:s={},freeSolo:l,isReadOnly:u,listAllValuesOnFocus:c,maxSuggestions:h,multiple:f,closeOnSelect:p=!f,defaultValue:m,defaultValues:y=m?[m]:[],onReady:b,defaultIsOpen:R,disableFilter:O,isLoading:U=!1,placement:_="bottom",restoreOnBlurIfEmpty:E=!l,shouldRenderSuggestions:z=()=>!0,submitKeys:S=[],suggestWhenEmpty:P,value:I,values:j=I?typeof I=="string"?[I]:[...I]:void 0}=t;l=l||(f?!0:t.freeSolo);const{isOpen:A,onClose:M,onOpen:W}=Pi({defaultIsOpen:R}),X=x.useMemo(()=>q(t.children,{isOpen:A,onClose:M,onOpen:W}),[t.children,A]),F=x.useMemo(()=>Fs(X),[X]),Q=x.useRef(null),De=x.useRef(null),G=x.useRef(null),$=x.useRef(null),[le,V]=x.useState(!1);let ye="";f?ye="":xt(y)?xt(j)||(ye=j[0]):ye=y[0];const[he,Ye]=x.useState(ye!=null?ye:""),Dt=x.useMemo(()=>O?F:F.filter(w=>w.fixed||q(t.filter||Bs,he,w.value,w.label)||le).filter((w,k)=>h?w.fixed||k<h:!0),[he,F,le,h,O]),An=i?[{value:he,noFilter:!0,creatable:!0}]:[],Z=x.useMemo(()=>[...Dt,...An],[Dt,An]),[xe,zt]=_i({defaultValue:y.map(w=>w==null?void 0:w.toString()),value:j,onChange:w=>{const k=Z.find(H=>H.value===w[0]);if(!k)return;const ee=w.map(H=>Z.find(pe=>pe.value===H));q(t.onChange,f?w:w[0],f?ee:k)}});x.useEffect(()=>{Z.length===0&&!o&&A&&M()},[Z.length,o,A]);const[ze,Se]=x.useState(n?(e=F[0])==null?void 0:e.value:null),hi=t.maxSelections||xe.length+1,Ft=Z.findIndex(w=>w.value===ze),jn=Es(Ft,Z,!!t.rollNavigation),Ln=Is(Ft,Z,!!t.rollNavigation),Le=js(Z),En=Yt(Z),In=!Z.some(w=>w.value===ze);x.useEffect(()=>{var w;In&&Se(n?(w=F[0])==null?void 0:w.value:null)},[In]),Ri(()=>{n&&Se(Le==null?void 0:Le.value)},[he,Le==null?void 0:Le.value]),x.useEffect(()=>{var w;!A&&n&&Se((w=F[0])==null?void 0:w.value)},[A]),x.useEffect(()=>{A&&c&&V(!0)},[A,c,V]),x.useEffect(()=>{const w=F.find(k=>k.value===ze);q(t.onOptionFocus,{item:w,focusMethod:$.current,isNewInput:w==null?void 0:w.creatable})},[ze,t.onOptionFocus]);const $t=w=>{var k,ee;const H=Z.find(ue=>ue.value===w),pe=(H==null?void 0:H.label)||(H==null?void 0:H.value);Ye(()=>f?"":pe!=null?pe:""),!xe.includes(w)&&xe.length<hi&&zt(ue=>f?[...ue,w]:[w]),f&&((k=Q.current)==null||k.focus()),t.focusInputOnSelect&&((ee=Q.current)==null||ee.focus()),q(t.onSelectOption,{item:H,selectMethod:$.current,isNewInput:H==null?void 0:H.creatable}),H!=null&&H.creatable&&q(t.onCreateOption,{item:Cn(H,["noFilter"]),selectMethod:$.current}),p&&M()},Tn=(w,k)=>{var ee;zt(ue=>{const Ee=F.find(Oe=>Oe.value===w);return Ee?(q(t.onTagRemoved,w,Ee,ue),ue.filter(Oe=>Oe!==w)):ue});const H=F.find(ue=>ue.value===w),pe=(H==null?void 0:H.label)||(H==null?void 0:H.value);he===pe&&Ye(""),k&&((ee=Q.current)==null||ee.focus())},pi=w=>{var k;zt([]),w&&((k=Q.current)==null||k.focus())},Mn=f?xe.map(w=>{var k;return{label:((k=F.find(ee=>ee.value===(w==null?void 0:w.toString())))==null?void 0:k.label)||w,onRemove:()=>Tn(w)}}):[];return x.useEffect(()=>{q(b,{tags:Mn})},[xe]),{autoCompleteProps:t,children:X,filteredList:Z,filteredResults:Dt,focusedValue:ze,defaultEmptyStateProps:s,getEmptyStateProps:w=>{if(Z.every(k=>k.noFilter)&&o&&!i)return typeof o=="boolean"?w:q(o,{query:he})},getGroupProps:w=>{const k=Xs(w.children,Z);return{divider:{hasFirstChild:Hs(w.children,Le),hasLastChild:Us(w.children,Yt(Z.filter(ee=>xt(ee==null?void 0:ee.noFilter))))},group:{display:k?"initial":"none"}}},getInputProps:(w,k)=>{const{onBlur:ee,onChange:H,onFocus:pe,onKeyDown:ue,variant:Ee,...Oe}=w;return{wrapper:{ref:De,onClick:()=>{var T;(T=Q==null?void 0:Q.current)==null||T.focus()},...Vs(k,f),...Oe},input:{isReadOnly:u,onFocus:T=>{q(pe,T),t.openOnFocus&&!u&&W(),t.selectOnFocus&&T.target.select(),c&&V(!0)},onBlur:T=>{var ge,ae;q(ee,T);const oe=T.relatedTarget===(G==null?void 0:G.current)||((ge=G.current)==null?void 0:ge.contains(T.relatedTarget)),Bt=(ae=De.current)==null?void 0:ae.contains(T.relatedTarget);if(!oe&&!Bt&&(r&&M(),!xe.includes(T.target.value)&&E)){const Wt=Yt(xe),Fe=F.find(Ht=>Ht.value===Wt),we=(Fe==null?void 0:Fe.label)||(Fe==null?void 0:Fe.value)||"";Ye(we)}},onChange:T=>{const ge=T.target.value;q(H,T),Ye(ge);const ae=Qr(ge);q(z,ge)&&(!ae||P)?W():M(),V(!1)},onKeyDown:T=>{var ge;q(ue,T),$.current="keyboard";const{key:ae}=T,oe=Z[Ft];if(["Enter",...S].includes(ae)){oe&&!(oe!=null&&oe.disabled)&&A?$t(oe==null?void 0:oe.value):(ge=Q.current)==null||ge.focus(),T.preventDefault();return}if(ae==="ArrowDown"){A?Se(jn==null?void 0:jn.value):W(),T.preventDefault();return}if(ae==="ArrowUp"){A?Se(Ln==null?void 0:Ln.value):W(),T.preventDefault();return}if(ae==="Tab"){A&&oe&&!(oe!=null&&oe.disabled)?$t(oe==null?void 0:oe.value):M();return}if(ae==="Home"){Se(Le==null?void 0:Le.value),T.preventDefault();return}if(ae==="End"){Se(En==null?void 0:En.value),T.preventDefault();return}ae==="Escape"&&(M(),T.preventDefault())},value:he,variant:f?"unstyled":Ee,...Oe}}},getItemProps:(w,k)=>{var ee;const{_fixed:H,_focus:pe,children:ue,disabled:Ee,label:Oe,value:T,fixed:ge,getValue:ae=Sn,onClick:oe,onMouseOver:Bt,sx:Wt,...Fe}=w,we=k?T:(ee=ae(T))==null?void 0:ee.toString(),Ht=we===ze,gi=Z.findIndex(Ge=>Ge.value===we)>=0,Ut=ue||Oe||we;return{item:{...typeof Ut!="string"||!a?{children:Ut}:{dangerouslySetInnerHTML:{__html:zs(Ut,he)}},"aria-selected":xe.includes(we),"aria-disabled":Ee,_disabled:{opacity:.4,cursor:"not-allowed",userSelect:"none"},onClick:Ge=>{var kn;q(oe,Ge),Ee?(kn=Q.current)==null||kn.focus():$t(we)},onMouseOver:Ge=>{q(Bt,Ge),Se(we),$.current="mouse"},sx:{...Wt,mark:{color:"inherit",bg:"transparent",...bn(a)?a:{fontWeight:a?"extrabold":"inherit"}}},...Ht&&(pe||$s()),...ge&&H,...Fe},root:{isValidSuggestion:gi,value:we}}},inputRef:Q,interactionRef:$,isLoading:U,isOpen:A,itemList:F,listRef:G,onClose:M,onOpen:W,placement:_,query:he,removeItem:Tn,resetItems:pi,setQuery:Ye,tags:Mn,value:I,values:xe}}const Gs=Me((t,e)=>{const n=Ys(t),{children:r,isOpen:i,onClose:a,onOpen:o,placement:s,resetItems:l,removeItem:u}=n;x.useImperativeHandle(e,()=>({resetItems:l,removeItem:u}));const{matchWidth:c=!0}=n.autoCompleteProps;return d.jsx(Rs,{value:n,children:d.jsx(gr,{isLazy:!0,isOpen:i,autoFocus:!1,placement:s,closeOnBlur:!0,matchWidth:c,children:d.jsx(bt.div,{w:"full",ref:e,children:r})})})});Gs.displayName="AutoComplete";const qs=Me((t,e)=>{const{focusedValue:n,getItemProps:r,interactionRef:i}=ke(),a=x.useRef(),o=lt(e,a),s=r(t),{isValidSuggestion:l,value:u}=s.root,c=n===u;x.useEffect(()=>{var y;c&&i.current==="keyboard"&&((y=a==null?void 0:a.current)==null||y.scrollIntoView({behavior:"smooth",block:"nearest"}))},[c,i]),x.useEffect(()=>{typeof u!="string"&&console.warn("wow"),typeof u!="string"&&xt(t.getValue)&&console.error("You must define the `getValue` prop, when an Item's value is not a string")},[]);const{children:h,dangerouslySetInnerHTML:f,...p}=s.item,m=Cn(p,["groupId"]);return l?d.jsx(Ce,{ref:o,...Ks,...m,children:h||d.jsx("span",{dangerouslySetInnerHTML:f})}):null});qs.displayName="AutoCompleteItem";const Ks={mx:"2",px:"2",py:"2",rounded:"md",cursor:"pointer"},Js=Me((t,e)=>{const{children:n,showDivider:r,...i}=t,a=Cn(i,["groupSibling"]),{getGroupProps:o}=ke(),{group:s}=o(t),l=el(t);return d.jsxs(it,{ref:e,...s,...a,children:[d.jsx(Jt,{...l.top}),n,d.jsx(Jt,{...l.bottom})]})}),Qs=Me((t,e)=>d.jsx(Ce,{...Zs,...t,ref:e}));Js.displayName="AutoCompleteGroup";Qs.displayName="AutoCompleteGroupTitle";const Zs={ml:5,my:1,fontSize:"xs",letterSpacing:"wider",fontWeight:"extrabold",textTransform:"uppercase"},el=t=>{const{getGroupProps:e}=ke(),n=t.groupSibling,{divider:{hasFirstChild:r,hasLastChild:i}}=e(t),a={my:2,borderColor:t.dividerColor},o={...a,mb:4,display:!t.showDivider||r?"none":""},s={...a,display:!t.showDivider||i||n?"none":""};return{top:o,bottom:s}},nr=Me((t,e)=>{const{isLoading:n}=ke(),{loadingIcon:r,...i}=t;return d.jsxs(Ai,{children:[d.jsx(vr,{...i,ref:e}),n&&d.jsx(ji,{children:r||d.jsx(yr,{})})]})}),ti=Me((t,e)=>{const{autoCompleteProps:n,inputRef:r,getInputProps:i,tags:a,setQuery:o,value:s,itemList:l}=ke(),{children:u,isInvalid:c,hidePlaceholder:h,...f}=t,{value:p}=f;x.useEffect(()=>{if(s!==void 0&&(typeof s=="string"||s instanceof String)){const S=l.find(I=>I.value===s),P=S===void 0?s:S.label;o(P)}},[s]),x.useEffect(()=>{p!==void 0&&(typeof p=="string"||p instanceof String)&&o(p)},[p]);const m=Ci("Input",t);let{wrapper:y,input:b}=i(f,m);const{ref:R,...O}=y,U=lt(e,r),_=q(u,{tags:a});h&&(b={...b,placeholder:Array.isArray(_)&&_.length?void 0:b.placeholder});const E=d.jsx(nr,{isInvalid:c,...b,ref:U}),z=d.jsxs(Si,{"aria-invalid":c,...O,ref:R,children:[_,d.jsx(pr,{as:nr,...b,ref:U})]});return d.jsx(Oi,{children:n.multiple?z:E})});ti.displayName="Input";ti.id="Input";const tl=t=>{const{getEmptyStateProps:e,defaultEmptyStateProps:n}=ke(),r=e(d.jsx(Ce,{...nl,...n,children:"No options found!"}));return d.jsx(it,{...t,children:r})},nl={fontSize:"sm",align:"center",justify:"center",fontWeight:"bold",fontStyle:"italic"},rr=["AutoCompleteGroup","AutoCompleteItem","AutoCompleteCreatable"],rl=t=>{const e=te.Children.map(t,(r,i)=>{var a;if(((a=r==null?void 0:r.type)==null?void 0:a.displayName)==="AutoCompleteGroup"){const o=te.Children.toArray(t)[i+1];return te.cloneElement(r,{groupSibling:o?o.type.displayName==="AutoCompleteGroup":!1})}return r}),n=te.Children.toArray(e).filter(r=>{var i;return!rr.includes((i=r==null?void 0:r.type)==null?void 0:i.displayName)});return[te.Children.toArray(e).filter(r=>{var i;return rr.includes((i=r==null?void 0:r.type)==null?void 0:i.displayName)}),n]},il=Me((t,e)=>{const{children:n,loadingState:r,...i}=t,{listRef:a,isLoading:o}=ke(),s=lt(e,a),[l,u]=rl(n);return d.jsxs(mr,{ref:s,w:"inherit",...al,...i,children:[o&&d.jsx(Ni,{children:r||d.jsx(yr,{size:"md"})}),!o&&d.jsxs(d.Fragment,{children:[l,d.jsx(tl,{}),u]})]})});il.displayName="AutoCompleteList";const al={py:"4",opacity:"0",bg:"#232934",rounded:"md",maxH:"350px",border:"none",shadow:"base",zIndex:"popover",overflowY:"auto",_light:{bg:"#ffffff"},_focus:{boxShadow:"none"}};x.memo(t=>{const{label:e,onRemove:n,disabled:r,...i}=t;return d.jsx(pr,{children:d.jsxs(xi,{borderRadius:"md",fontWeight:"normal",...r&&ir,...i,children:[d.jsx(wi,{children:e}),d.jsx(bi,{onClick:()=>!r&&q(n),cursor:"pointer",...r&&ir})]})})});const ir={cursor:"text",userSelect:"none",opacity:.4,_focus:{boxShadow:"none"}};var rn=function(){return rn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rn.apply(this,arguments)},ol=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},sl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},ll=function(t,e){var n=t.validator,r=t.onDebouncedChange,i=t.delay,a=t.optionList,o=t.defaultValue;t.onChange;var s=ol(t,["validator","onDebouncedChange","delay","optionList","defaultValue","onChange"]),l=x.useRef(null),u=lt(l,e),c=x.useRef("datalist-"+new Date().valueOf()),h=sl(x.useState(!1),2),f=h[0],p=h[1],m=x.useRef();x.useEffect(function(){l.current&&(l.current.value=(o==null?void 0:o.toString())||"")},[o]);var y=function(R){var O=R.target.value;window.clearTimeout(m.current),n&&p(!n(O)),m.current=window.setTimeout(function(){r==null||r(O),m.current=void 0},i!=null?i:500)},b=function(R){var O=R.target.value;m.current!==void 0&&(window.clearTimeout(m.current),n&&p(!n(O)),r==null||r(O),m.current=void 0)};return d.jsxs(d.Fragment,{children:[d.jsx(vr,rn({ref:u,list:c.current,variant:"flushed",size:"sm",h:6,onChange:y,onBlur:b,isInvalid:f},s)),a&&d.jsx("datalist",{id:c.current,children:a==null?void 0:a.map(function(R,O){return d.jsx("option",{children:R},O)})})]})},wc=x.forwardRef(ll),an=function(){return an=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},an.apply(this,arguments)},ul=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},cl=function(t,e){var n=t.onDebouncedChange,r=t.defaultValue;t.onChange;var i=ul(t,["onDebouncedChange","defaultValue","onChange"]),a=x.useRef(null),o=lt(a,e),s=x.useRef();x.useEffect(function(){a.current&&(a.current.value=(r==null?void 0:r.toString())||"")},[r]);var l=function(u){var c=u.target.value;window.clearTimeout(s.current),s.current=window.setTimeout(function(){n==null||n(c)},500)};return d.jsx(Li,an({ref:o,variant:"flushed",size:"sm",resize:"none",onChange:l},i))},bc=x.forwardRef(cl);var dl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},fl=function(t){switch(t){case Ae.DEV:return"red";case Ae.UAT:return"orange";case Ae.PRD:return"green"}};function Cc(t){var e=t.environment,n=t.version,r=t.popoverHeader,i=t.popoverBody,a=dl(x.useState(!1),2),o=a[0],s=a[1];return d.jsxs(gr,{isOpen:o,onOpen:function(){return r&&s(!0)},onClose:function(){return s(!1)},children:[d.jsx(Ei,{children:d.jsx(Ii,{ml:1,colorScheme:fl(e),title:"".concat(e,": ").concat(n),cursor:r?"pointer":"help",children:e===Ae.PRD?n:e})}),d.jsxs(mr,{children:[d.jsx(Ti,{}),d.jsx(Mi,{}),d.jsx(ki,{children:r}),d.jsx(Di,{children:i})]})]})}var hl=function(t,e,n){var r=new Blob([n],{type:e});pl(t,r)},pl=function(t,e){var n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)},gl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function ml(t){var e=t.cancelRef,n=t.isOpen,r=t.onClose,i=gl(x.useState(!1),2),a=i[0],o=i[1],s=function(){o(!0);var l=ie.storage.getAll(),u=ie.getAppName(),c="".concat(u,"_BACKUP_").concat(new Date().toISOString(),".json");hl(c,"application/json",JSON.stringify(l)),ie.storage.clear(),setTimeout(function(){window.location.reload()},2e3)};return d.jsxs(zi,{leastDestructiveRef:e,isOpen:n,onClose:r,children:[d.jsx(xr,{}),d.jsxs(Fi,{children:[d.jsx(wr,{children:"Warning 警告"}),d.jsx($i,{}),d.jsxs(br,{sx:{"& p":{my:1}},children:[d.jsx(Ie,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),d.jsx(Ie,{children:"確定重設該應用程式嗎？應用程式的網頁本地儲存將會被清除。本地儲存的副本可供下載及用於復原（因應用程式而異）。"}),d.jsx(Ie,{children:"确定重置本应用程序吗？应用程序的网页本地存储将会被清除。本地存储的拷贝可供下载以及用于还原（因应用程序而異）。"})]}),d.jsxs(Cr,{children:[d.jsx(Dn,{ref:e,onClick:r,children:"Cancel"}),d.jsx(Dn,{isLoading:a,colorScheme:"red",ml:3,onClick:s,children:"Confirm and reload"})]})]})]})}var rt=function(){return rt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},rt.apply(this,arguments)},yl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},vl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function xl(t){var e=t.error,n=t.errorInfo,r=t.allowReset,i=t.sx,a=yl(t,["error","errorInfo","allowReset","sx"]),o=je("RmgErrorBoundary"),s=Bi("primary.500","primary.300"),l=vl(x.useState(!1),2),u=l[0],c=l[1],h=x.useRef(null),f=function(y){return d.jsx(zn,{color:s,role:"button",onClick:function(){return c(!0)},children:y})},p=ie.getAppName(),m=d.jsx(zn,{color:s,href:"https://github.com/railmapgen/".concat(p==="rmg-home"?"railmapgen.github.io":p,"/issues"),isExternal:!0,children:"GitHub Issue"});return d.jsxs(Wi,rt({status:"error",sx:rt(rt({},o),i)},a,{children:[d.jsx(Hi,{}),d.jsx(Ui,{children:"Something went wrong!"}),d.jsxs(Xi,{children:[d.jsxs(Ie,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",r?d.jsxs(d.Fragment,{children:[" or ",f("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",m," with the details shown below."]}),d.jsxs(Ie,{children:["請嘗試重新整理或重新上載設定檔。如果問題仍然存在，請考慮更新你的瀏覽器",r?d.jsxs(d.Fragment,{children:["或",f("重設該應用程式")]}):"","。如需協助或與我們聯絡，請前往 ",m," 提交一個 Issue 並附以詳細資料。"]}),d.jsxs(Ie,{children:["请尝试刷新或者重新上传配置文件。如果问题仍然存在，请考虑更新您的浏览器",r?d.jsxs(d.Fragment,{children:["或者",f("重置本应用程序")]}):"","。如需帮助或者联系我们，请前往 ",m," 提交一个 Issue 并附上详细信息。"]}),d.jsxs(Ie,{as:"details",children:[e==null?void 0:e.toString(),d.jsx("br",{}),n==null?void 0:n.componentStack]}),r&&d.jsx(ml,{cancelRef:h,isOpen:u,onClose:function(){return c(!1)}})]})]}))}var wl=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),on=function(){return on=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},on.apply(this,arguments)},bl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};(function(t){wl(e,t);function e(n){var r=t.call(this,n)||this;return r.state={hasError:!1,error:null,errorInfo:null},r}return e.getDerivedStateFromError=function(){return{hasError:!0}},e.prototype.componentDidCatch=function(n,r){this.setState({error:n,errorInfo:r})},e.prototype.render=function(){var n=this.props,r=n.children,i=n.suspenseFallback,a=n.allowReset,o=bl(n,["children","suspenseFallback","allowReset"]);return this.state.hasError?d.jsx(xl,on({error:this.state.error,errorInfo:this.state.errorInfo,allowReset:a},o)):i?d.jsx(x.Suspense,{fallback:i,children:r}):r},e})(te.Component);var sn=function(){return sn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},sn.apply(this,arguments)},Cl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},ar=function(t){var e=t.label,n=t.children;t.width;var r=t.noLabel,i=t.oneLine,a=t.helper,o=t.errorMessage,s=t.className,l=Cl(t,["label","children","width","noLabel","oneLine","helper","errorMessage","className"]),u=je("RmgLabel");return d.jsxs(Vi,sn({className:"".concat(i?"rmg-label__one-line":""," ").concat(s!=null?s:""),"aria-label":e,sx:u,isInvalid:!!o},l,{children:[!r&&d.jsx(Yi,{size:"xs",children:e}),n,o?d.jsx(Gi,{children:o}):a?d.jsx(qi,{children:a}):d.jsx(d.Fragment,{})]}))},ln=function(){return ln=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ln.apply(this,arguments)},Sl=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},or=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function Sc(t){var e=t.defaultValue,n=t.options,r=t.disabledOptions,i=Sl(t,["defaultValue","options","disabledOptions"]),a=x.useRef(null);x.useEffect(function(){a.current&&(a.current.value=(e==null?void 0:e.toString())||"")},[e]);var o=function(s,l){return d.jsx("option",{value:s,disabled:(r==null?void 0:r.find(function(u){return u.toString()===s}))!==void 0,children:l},s)};return d.jsx(Ki,ln({ref:a,variant:"flushed",size:"sm",h:6},i,{children:Object.entries(n).map(function(s){var l=or(s,2),u=l[0],c=l[1];return typeof c=="object"?d.jsx("optgroup",{label:u,children:Object.entries(c).map(function(h){var f=or(h,2),p=f[0],m=f[1];return o(p,m)})},u):o(u,c)})}))}var Ol=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Oc=function(t,e,n){var r=Ol(x.useState(e()),2),i=r[0],a=r[1];return x.useEffect(function(){t.then(function(){console.debug("[rmg-components] Getter updates finished"),a(e())})},[]),i},Gt=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},sr=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Nl=function(t,e){var n=Gt(x.useState(!0),2),r=n[0],i=n[1],a=x.useRef([]),o=x.useRef(),s=x.useCallback(function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];if(!r){a.current=l;return}i(!1),a.current=[],t.apply(void 0,sr([],Gt(l),!1))},[r,t]);return x.useEffect(function(){if(!r)return o.current=window.setTimeout(function(){i(!0),a.current.length&&t.apply(void 0,sr([],Gt(a.current),!1))},e),function(){window.clearTimeout(o.current)}},[r,e]),s},Pl=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function _l(t){var e=t.defaultValue,n=t.min,r=t.max,i=t.step,a=t.onThrottledChange,o=t.leftIcon,s=t.rightIcon,l=je("RmgThrottledSlider"),u=Pl(x.useState(e!=null?e:0),2),c=u[0],h=u[1];x.useEffect(function(){e!==void 0&&c!==e&&h(e)},[e]);var f=Nl(a!=null?a:function(){},500),p=function(){var y=Math.min(c+(i!=null?i:1)*10,r!=null?r:100);a==null||a(y),h(y)},m=function(){var y=Math.max(c-(i!=null?i:1)*10,n!=null?n:0);a==null||a(y),h(y)};return d.jsxs(Ce,{sx:l,children:[o&&d.jsx(Qt,{size:"xs",variant:"ghost","aria-label":"Drag left",icon:o,onClick:m}),d.jsxs(Ji,{value:c,min:n,max:r,step:i,onChange:function(y){f(y),h(y)},children:[d.jsx(Qi,{children:d.jsx(Zi,{})}),d.jsx(ea,{})]}),s&&d.jsx(Qt,{size:"xs",variant:"ghost","aria-label":"Drag right",icon:s,onClick:p})]})}var Rl=function(t){var e=t.children,n=t.noWrap,r=je("RmgOutput",{noWrap:n});return d.jsx(bt.output,{sx:r,children:e})},me=function(){return me=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},me.apply(this,arguments)},On=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Al=function(t){var e=t.sx,n=t.className,r=On(t,["sx","className"]),i=je("RmgWindow");return d.jsx(Ce,me({className:"rmg-window ".concat(n!=null?n:""),sx:me(me({},i),e)},r))},Nc=function(t){var e=t.isAppClipHeader,n=t.sx,r=t.className,i=On(t,["isAppClipHeader","sx","className"]),a=je("RmgWindowHeader");return d.jsx(Ce,me({className:"rmg-window__header ".concat(e?"rmg-window__app-clip-header":""," ").concat(r!=null?r:""),sx:me(me({},a),n)},i))},jl=function(t){var e=t.sx,n=t.className,r=On(t,["sx","className"]),i=je("RmgPage");return d.jsx(Ce,me({className:"rmg-page ".concat(n!=null?n:""),sx:me(me({},i),e)},r))};var lr=function(t){return t==="dark"?"primary.300":"primary.500"},qt={variants:{flushed:function(t){var e=t.theme,n=t.colorMode;return{field:{_focusVisible:{borderColor:lr(n),boxShadow:"0px 1px 0px 0px ".concat(Ze(e,lr(n)))}}}}}},Ll={defaultProps:{colorScheme:"primary"}},ur={defaultProps:{colorScheme:"primary"}},El={baseStyle:{w:"100%",h:"100%","& .ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper":{height:"unset"},"& .ag-cell":{display:"flex",lineHeight:"unset",alignItems:"center"},"& .ag-cell, & .ag-header-cell":{padding:"8px 9px"},"& .ag-row, & .ag-header":{border:"unset"},"&.ag-theme-alpine .ag-row .ag-cell, &.ag-theme-alpine .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))"},"&.ag-theme-alpine-dark .ag-row .ag-cell, &.ag-theme-alpine-dark .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))"},"& .ag-pinned-left-cols-container, & .ag-pinned-left-header":{boxShadow:"var(--chakra-shadows-lg)",zIndex:1},"&.ag-theme-alpine":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #fff)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #fcfcfc)"}},"&.ag-theme-alpine-dark":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #181d1f)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #222628)"}}}},Il={baseStyle:function(t){var e=t.colorMode,n=t.zIndex;return{display:"none","&.show-app-clip":{display:"block"},"& .rmg-app-clip__overlay":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",zIndex:n,bg:"blackAlpha.600"},"& .rmg-app-clip__container":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:n},"& .rmg-app-clip__content":{display:"flex",w:"100%",maxW:"md",my:16,bg:e==="light"?"white":"gray.700",boxShadow:"lg",borderRadius:"md",overflow:"hidden"}}},sizes:{xs:{"& .rmg-app-clip__content":{maxW:"xs"}},sm:{"& .rmg-app-clip__content":{maxW:"sm"}},lg:{"& .rmg-app-clip__content":{maxW:"lg"}},xl:{"& .rmg-app-clip__content":{maxW:"xl"}},full:{"& .rmg-app-clip__content":{maxW:"100vw",minH:"var(--chakra-vh)",my:0,borderRadius:0}}}},Tl={baseStyle:function(t){var e=t.colorMode;return{p:1,my:1,w:"100%",borderRadius:2,bg:e==="dark"?"gray.700":"gray.50",boxShadow:"lg"}}},Ml={baseStyle:function(t){var e=t.colorMode;return{"& thead":{position:"sticky",top:0,zIndex:10},"& td, th":{borderRight:"1px solid",borderColor:e==="dark"?"whiteAlpha.400":"blackAlpha.200",backgroundColor:e==="dark"?"gray.700":"gray.50",whiteSpace:"nowrap","&:first-of-type":{position:"sticky",left:0,zIndex:1},"&:last-of-type":{borderRight:"none",position:"sticky",right:0,zIndex:1}}}}},kl={baseStyle:function(){return{flexGrow:1,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",h:10,"& span":{maxW:"100%",textOverflow:"ellipsis",overflow:"hidden"},"& span:last-of-type":{fontWeight:"normal",fontSize:"2xs"}}}},Dl={baseStyle:{flexDirection:"column",alignItems:"center",maxH:"100%",overflowY:"auto","& .chakra-alert__icon":{w:"40px",h:"40px",mr:0},"& .chakra-alert__title":{mt:4,mb:1,fontSize:"lg"},"& .chakra-alert__desc":{w:"100%","& p":{my:1},"& details":{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"sm"}}}},zl={baseStyle:{display:"flex",flexDirection:"column",m:1,w:"unset","& label":{overflow:"hidden",fontSize:12,mr:0,mb:-.5,whiteSpace:"nowrap",textOverflow:"ellipsis"},"&.rmg-label__one-line":{flexDirection:"row",alignItems:"center","& label:first-of-type":{mr:"auto"}}}},Fl={baseStyle:{display:"inline-flex",alignItems:"center","& > button:first-of-type":{ml:1}}},$l={baseStyle:{w:"100%",h:"100%",position:"absolute",top:0,right:0,alignItems:"center",justifyContent:"center","& .rmg-loader__backdrop":{position:"absolute",w:"100%",h:"100%",zIndex:1500,bg:"blackAlpha.400"},"& .chakra-progress":{zIndex:2e3}}},Ne=function(t){return t==="dark"?"primary.300":"primary.500"},Bl={baseStyle:function(t){var e=t.theme,n=t.colorMode;return{"& .rmg-multi-select__wrapper":{position:"relative",w:"100%",h:"25.75px",transform:"translateY(1.75px)",cursor:"default"},"& .rmg-multi-select__field":{position:"relative",w:"100%",minW:0,outline:0,appearance:"none",transitionProperty:"common",transitionDuration:"normal",pb:"1px",fontSize:"sm",h:"6",borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_active:{borderColor:Ne(n),boxShadow:"0px 1px 0px 0px ".concat(Ze(e,Ne(n)))},_focus:{borderColor:Ne(n),boxShadow:"0px 1px 0px 0px ".concat(Ze(e,Ne(n)))},_focusVisible:{borderColor:Ne(n),boxShadow:"0px 1px 0px 0px ".concat(Ze(e,Ne(n)))},"&.active":{borderColor:Ne(n),boxShadow:"0px 1px 0px 0px ".concat(Ze(e,Ne(n)))},"& > span:last-of-type":{position:"absolute",right:8}},"& .rmg-multi-select__icon-wrapper":{display:"inline-flex",justifyContent:"center",w:6,h:"100%",position:"absolute",right:2,top:0,fontSize:"xl","& svg":{h:"1em",w:"1em"}},"& .chakra-popover__content":{w:"unset",minW:200},"& .chakra-popover__body":{p:0,"li label":{p:2,w:"100%",_hover:{bg:n==="dark"?"whiteAlpha.200":"gray.100"},_active:{bg:n==="dark"?"whiteAlpha.300":"gray.200"}}}}}},un=function(){return un=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},un.apply(this,arguments)},Wl={overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap"},Hl={baseStyle:function(t){var e=t.noWrap;return un({minH:6,fontSize:"sm"},e?Wl:{textWrap:"pretty"})}},Ul={baseStyle:{position:"relative",flexDirection:"column",flex:1,overflow:"hidden",background:"inherit"}},Xl={baseStyle:{alignItems:"center",flexWrap:"wrap",pl:2,pr:3,py:1,zIndex:10}},Vl={baseStyle:{position:"relative",background:"inherit"}},Yl={baseStyle:{display:"flex",alignItems:"center",flexWrap:"wrap",position:"sticky",top:0,background:"inherit",px:2,py:1,zIndex:5}},Gl={baseStyle:function(t){var e=t.colorMode,n=t.width,r=t.alwaysOverlay;return{height:"100%",position:r?"absolute":{base:"absolute",lg:"relative"},right:r?0:{base:0,lg:"unset"},background:e==="light"?"white":"gray.800",boxShadow:"lg",flexShrink:0,flexDirection:"column",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",zIndex:5,"&.show-side-panel":{maxW:{base:"100%",sm:n},w:{base:"100%",sm:"unset"},visibility:"initial"},"& .rmg-side-panel__inner":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:n}},"& .rmg-side-panel__header":{flexShrink:0,pl:3,pr:1,py:0,"& button":{ml:"auto"}},"& .rmg-side-panel__body":{display:"flex",flexDirection:"column",flex:1,overflowY:"auto",p:1},"& .rmg-side-panel__footer":{display:"flex",justifyContent:"flex-end",p:1}}}},ql={baseStyle:{h:6,alignItems:"center","& .chakra-button:first-of-type":{mr:1},"& .chakra-button:last-of-type":{ml:1}}},Kl={baseStyle:{position:"relative",flexDirection:"column",height:"100%",overflow:"hidden",background:"inherit"}},Jl={baseStyle:{px:2,alignItems:"center",zIndex:15,minH:10,transition:"0.3s ease-in-out"}},Ql={Input:qt,Checkbox:ur,Select:qt,Slider:Ll,Switch:ur,Textarea:qt,RmgAgGrid:El,RmgAppClip:Il,RmgCard:Tl,RmgDataTable:Ml,RmgEnrichedButton:kl,RmgErrorBoundary:Dl,RmgLabel:zl,RmgLineBadge:Fl,RmgLoader:$l,RmgMultiSelect:Bl,RmgOutput:Hl,RmgPage:Ul,RmgPageHeader:Xl,RmgSection:Vl,RmgSectionHeader:Yl,RmgSidePanel:Gl,RmgThrottledSlider:ql,RmgWindow:Kl,RmgWindowHeader:Jl},cn=function(){return cn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},cn.apply(this,arguments)},cr="chakra-ui-color-mode",Zl=function(){var t=ie.getColourMode()==="system";return ie.isStandaloneWindow()&&(t?window.localStorage.removeItem(cr):window.localStorage.setItem(cr,ie.getColourMode())),{initialColorMode:"system",useSystemColorMode:t}},eu={primary:cn({},ta.colors.teal)},tu={global:{".mw-full":{w:"100%",flexBasis:"100%"}}},nu=function(){return na({config:Zl(),colors:eu,styles:tu,components:Ql})},ru=function(t){var e=t.children;return d.jsx(ra,{theme:nu(),children:d.jsx(iu,{children:e})})},iu=function(t){var e=t.children,n=ia().setColorMode,r=aa();return x.useEffect(function(){console.log("[rmg-components] RMG theme is initialised with",r.config),ie.onColourModeChange(function(i){if(i==="system"){var a=window.matchMedia("(prefers-color-scheme: dark)").matches;n(a?"dark":"light")}else n(i)})},[n]),d.jsx(d.Fragment,{children:e})},v=(t=>(t.Predefined="predefined",t.Customized="customized",t.Punctuation="punctuation",t))(v||{});const ni=t=>t.map(e=>e.text).join(""),au=t=>t.map(e=>e.pinyin).join("");var L=(t=>(t.BreakWeak=" ",t.BreakMedium=",",t.BreakStrong=".",t))(L||{});const D=(t,e)=>{let n="";return[g.ChineseWuSimplifiedXiaotong,g.ChineseMandarinSimplified,g.ChineseCantoneseSimplified,g.ChineseCantoneseTraditional].includes(t)?n={" ":" ",",":"，",".":"。"}[e]:[g.ChineseWuSimplifiedYunzhe,g.EnglishUnitedKingdom,g.EnglishUnitedStates].includes(t)&&(n={" ":" ",",":", ",".":". "}[e]),{type:"punctuation",voiceName:t,text:n,pinyin:n,subType:e}};var g=(t=>(t.ChineseWuSimplifiedXiaotong="wuu-CN-XiaotongNeural",t.ChineseWuSimplifiedYunzhe="wuu-CN-YunzheNeural",t.ChineseCantoneseSimplified="yue-CN-XiaoMinNeural",t.ChineseCantoneseTraditional="zh-HK-HiuMaanNeural",t.ChineseMandarinSimplified="zh-CN-XiaoqiuNeural",t.EnglishUnitedStates="en-US-RyanMultilingualNeural",t.EnglishUnitedKingdom="en-GB-RyanNeural",t))(g||{}),Nn=(t=>(t.ShanghaiMetro="shmetro",t))(Nn||{}),N=(t=>(t.Arrival="arr",t.Stop="stp",t.Departure="dep",t.Midway="mdw",t))(N||{});const ou={style:"shmetro",baseVariants:{},stations:{},metadata:{}},Pc=t=>{const e=[];for(const n in t)for(const r in t[n])for(const i in t[n][r]){const a=t[n][r][i];a.length!==0&&e.push("".concat(n,"_").concat(r,"_").concat(i,": ").concat(au(a)))}return e},su=t=>{const e=structuredClone(t);for(const n in t)for(const r in t[n])for(const i in t[n][r]){const o=t[n][r][i].map(s=>{const l=structuredClone(s);return delete l.text,delete l.voiceName,l});e[n][r][i]=o}return e};var st=(t=>(t.PARAM="param",t.ACCOUNT="rmg-home__account",t))(st||{}),ri=(t=>(t.APP_LOAD="APP_LOAD",t.IMPORT_RMG_PARAM="IMPORT_RMG_PARAM",t.DOWNLOAD_PARAM="DOWNLOAD_PARAM",t.DOWNLOAD_TEXT="DOWNLOAD_TEXT",t))(ri||{});const lu={telemetry:{app:!0,project:!0}},ii=ut({name:"app",initialState:lu,reducers:{setTelemetryApp:(t,e)=>{t.telemetry.app=e.payload},setTelemetryProject:(t,e)=>{t.telemetry.project=e.payload}}}),{setTelemetryApp:_c,setTelemetryProject:Rc}=ii.actions,uu=ii.reducer,cu={content:"ご欢１迎1乘こじ。nihao",columns:207,viewableColumns:200,scale:.2},ai=ut({name:"crawl",initialState:cu,reducers:{setContent:(t,e)=>{t.content=e.payload},setColumns:(t,e)=>{t.columns=e.payload},setViewableColumns:(t,e)=>{t.viewableColumns=e.payload},setScale:(t,e)=>{t.scale=e.payload}}}),{setContent:Ac,setColumns:jc,setViewableColumns:Lc,setScale:du}=ai.actions,fu=ai.reducer,hu={project:ou},oi=ut({name:"param",initialState:hu,reducers:{setProject:(t,e)=>{t.project=e.payload},setVariant:(t,e)=>{var s,l;const{stnID:n,stage:r,voiceName:i,variant:a,value:o}=e.payload;(l=(s=t.project.stations[n])==null?void 0:s[r])!=null&&l[i]&&(t.project.stations[n][r][i][a]=o)},setBaseVariant:(t,e)=>{var o;const{stage:n,voiceName:r,variant:i,value:a}=e.payload;(o=t.project.baseVariants[n])!=null&&o[r]&&(t.project.baseVariants[n][r][i]=a)}}}),{setProject:dr,setVariant:Ec,setBaseVariant:Ic}=oi.actions,pu=oi.reducer,gu={reconciledPhrases:{},showDefaultVariants:!1,currentStationID:"kaxg",currentStage:N.Departure,currentVoice:g.ChineseMandarinSimplified,globalAlerts:{}},si=ut({name:"runtime",initialState:gu,reducers:{setReconciledPhrases:(t,e)=>{t.reconciledPhrases=e.payload},setShowDefaultVariants:(t,e)=>{t.showDefaultVariants=e.payload},setCurrentStationID:(t,e)=>{t.currentStationID=e.payload},setCurrentStage:(t,e)=>{t.currentStage=e.payload},setCurrentVoice:(t,e)=>{t.currentVoice=e.payload},setRmtToken:(t,e)=>{t.rmtToken=e.payload},removeRmtToken:t=>{t.rmtToken=void 0},setGlobalAlert:(t,e)=>{const{status:n,message:r,url:i,linkedApp:a}=e.payload;t.globalAlerts[n]={message:r,url:i,linkedApp:a}},closeGlobalAlert:(t,e)=>{delete t.globalAlerts[e.payload]}}}),{setReconciledPhrases:mu,setShowDefaultVariants:fr,setCurrentStationID:li,setCurrentStage:ui,setCurrentVoice:Tc,setRmtToken:yu,removeRmtToken:vu,setGlobalAlert:Mc,closeGlobalAlert:kc}=si.actions,xu=si.reducer;var ci=(t=>(t.CREATED="CREATED",t.CANCELLED="CANCELLED",t.PROCESSING="PROCESSING",t.COMPLETED="COMPLETED",t.FAILED="FAILED",t))(ci||{});const wu=t=>{const e=r=>{if(!r){nt.debug("Account string is empty, logging out"),t.dispatch(vu());return}const i=JSON.parse(r),{token:a}=i;nt.debug("Updating token to: ".concat(a)),t.dispatch(yu(a))};let n=localStorage.getItem(st.ACCOUNT);e(n!=null?n:void 0),window.onstorage=()=>{const r=localStorage.getItem(st.ACCOUNT);n!==r&&(n=r,nt.debug("Account string changed to: ".concat(r)),e(r!=null?r:void 0))}},bu="https://railmapgen.org/v1";var kt=(t=>(t.AUDIOTASKS="/audio",t))(kt||{});const Pn=async(t,e,n)=>{const r={accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"},i=structuredClone(r);n&&(i.Authorization="Bearer ".concat(n));const a=await fetch("".concat(bu).concat(t),{headers:i,...e});if(a.status!==401)return a},Cu={isModalOpen:!1,tasks:[]},_n=dn("audio/fetchTasks",async(t,{getState:e,rejectWithValue:n})=>{const{rmtToken:r}=e().runtime;if(!r)return n("No token.");const i=await Pn(kt.AUDIOTASKS,{},r);if(!i)return n("Can not recover from expired refresh token.");if(i.status!==200)return n(i.text);const a=await i.json();return a.tasks.forEach(o=>{o.createdAt=new Date(o.createdAt).getTime(),o.updatedAt=new Date(o.updatedAt).getTime()}),a.tasks}),Dc=dn("audio/cancelTask",async(t,{getState:e,dispatch:n,rejectWithValue:r})=>{const{rmtToken:i}=e().runtime;if(!i)return r("No token.");const a=await Pn("".concat(kt.AUDIOTASKS,"/").concat(t),{method:"PATCH",body:JSON.stringify({status:ci.CANCELLED})},i);if(!a)return r("Can not recover from expired refresh token.");if(a.status!==200)return r(a.text);n(_n())}),zc=dn("audio/newTask",async(t,{getState:e,dispatch:n,rejectWithValue:r})=>{const{rmtToken:i,reconciledPhrases:a}=e().runtime;if(!i)return r("No token.");const o=su(a),s=await Pn(kt.AUDIOTASKS,{method:"POST",body:JSON.stringify({data:o})},i);if(!s)return r("Can not recover from expired refresh token.");if(s.status!==201)return r(s.text);n(_n())}),di=ut({name:"app",initialState:Cu,reducers:{openAudioModal:t=>{t.isModalOpen=!0},closeAudioModal:t=>{t.isModalOpen=!1}},extraReducers:t=>{t.addCase(_n.fulfilled,(e,n)=>{e.tasks=n.payload})}}),{openAudioModal:Fc,closeAudioModal:$c}=di.actions,Su=di.reducer,Ou=ga({app:uu,crawl:fu,param:pu,runtime:xu,audio:Su}),fi=ma(),Nu=(t={})=>ya({reducer:Ou,middleware:e=>e().prepend(fi.middleware),preloadedState:t}),Lt=Nu(),Rn=()=>va(),Te=xa,Pu=fi.startListening;window.rmgStore=Lt;function _u(){const{t}=fn(),e=Rn(),{project:{metadata:n}}=Te(l=>l.param),{showDefaultVariants:r,currentStationID:i}=Te(l=>l.runtime),[a,o]=x.useState({});x.useEffect(()=>{const l=Object.fromEntries([["default",t("Base Variant")],...Object.entries(n).map(([u,{name:c}])=>[u,c])]);o(l)},[n]);const s=l=>{l==="default"?e(fr(!0)):(e(fr(!1)),e(li(l)),e(ui(N.Departure)))};return d.jsx(oa,{height:"100%",overflowY:"auto",children:d.jsxs(sa,{variant:"simple",height:"100%",children:[d.jsx(la,{children:d.jsx(Fn,{children:d.jsx(ua,{children:t("Station Variants")})})}),d.jsx(ca,{children:Object.entries(a).map(([l,u])=>d.jsx(Fn,{onClick:()=>s(l),children:d.jsx(da,{children:u})},l))})]})})}const Ru=4,Au=8,ju=32,Lu=3,Eu=8;function _e(t,e){return t.getUint32(e,!0)}function Iu(t){const e=new DataView(t),n=new Uint8Array(t);if(n[0]!==1||n[1]!==102||n[2]!==99||n[3]!==112)throw new Error("Not a valid PCF file (bad signature)");const r=_e(e,4);let i=8;const a=[];for(let f=0;f<r;f++){const p=_e(e,i+0),m=_e(e,i+4),y=_e(e,i+8),b=_e(e,i+12);a.push({type:p,format:m,size:y,offset:b}),i+=16}const o=a.find(f=>f.type===Ru);if(!o)throw new Error("No PCF_METRICS in file");const s=Mu(e,o),l=a.find(f=>f.type===Au);if(!l)throw new Error("No PCF_BITMAPS in file");const u=ku(e,n,l,s),c=a.find(f=>f.type===ju);if(!c)throw new Error("No PCF_BDF_ENCODINGS in file");const h=Du(e,c);return{allBitmaps:u,encData:h}}const Tu=(t,e,n)=>{const r=zu(n,e);return r==null?(console.warn("No glyph found for character: '".concat(n,"'")),null):t[r]};function Mu(t,e){const n=e.offset,a=(_e(t,n)&256)!==0;let o=n+4,s;a?(s=t.getInt16(o),o+=2):(s=t.getInt32(o),o+=4);const l=[];for(let u=0;u<s;u++){let c,h,f,p,m;if(a){const y=t.getUint8(o+0)-128,b=t.getUint8(o+1)-128,R=t.getUint8(o+2)-128,O=t.getUint8(o+3)-128,U=t.getUint8(o+4)-128;c=y,h=b,f=R,p=O,m=U,o+=5}else c=t.getInt16(o+0),h=t.getInt16(o+2),f=t.getInt16(o+4),p=t.getInt16(o+6),m=t.getInt16(o+8),o+=10,o+=2;l.push({leftSideBearing:c,rightSideBearing:h,characterWidth:f,ascent:p,descent:m})}return l}function ku(t,e,n,r){const i=n.offset,a=_e(t,i);let o=i+4;const s=a&Lu,l=(s===0?8:s===1?16:32)/8,u=(a&Eu)===0,c=t.getInt32(o);o+=4;const h=[];for(let m=0;m<c;m++)h.push(t.getInt32(o)),o+=4;t.getInt32(o+0),t.getInt32(o+4),t.getInt32(o+8),t.getInt32(o+12),o+=16;const f=o,p=new Array(c);for(let m=0;m<c;m++){const y=r[m],b=y.characterWidth,R=y.ascent+y.descent,O=h[m],U=f+O,_=[];let E=U;for(let S=0;S<R;S++){const P=new Array(b).fill(!1);for(let I=0;I<l;I++){const j=e[E+I];for(let A=0;A<8;A++){const M=I*8+A;if(M<b)if(u){const W=1<<A;P[M]=(j&W)!==0}else{const W=1<<7-A;P[M]=(j&W)!==0}}}y.leftSideBearing>0&&P.unshift(...new Array(y.leftSideBearing).fill(!1)),_.push(P),E+=l}const z=y.descent>=0&&y.descent<2?2-y.descent:0;if(z>0)for(let S=0;S<z;S++){const P=new Array(b).fill(!1);y.leftSideBearing>0&&P.unshift(...new Array(y.leftSideBearing).fill(!1)),_.push(P)}p[m]=_}return p}function Du(t,e){const n=e.offset;_e(t,n);let r=n+4;const i=t.getInt16(r);r+=2;const a=t.getInt16(r);r+=2;const o=t.getInt16(r);r+=2;const s=t.getInt16(r);r+=2;const l=t.getInt16(r);r+=2;const u=(a-i+1)*(s-o+1),c=new Uint16Array(u);for(let h=0;h<u;h++)c[h]=t.getInt16(r),r+=2;return{minCharOrByte2:i,maxCharOrByte2:a,minByte1:o,maxByte1:s,defaultChar:l,glyphIndexes:c}}function zu(t,e){const n=t.codePointAt(0);if(n==null)return null;const r=n>>8&255,i=n&255;if(r<e.minByte1||r>e.maxByte1||i<e.minCharOrByte2||i>e.maxCharOrByte2)return null;const a=e.maxCharOrByte2-e.minCharOrByte2+1,o=r-e.minByte1,s=i-e.minCharOrByte2,l=o*a+s,u=e.glyphIndexes[l];return u===65535?null:u}const Pe=16,ce=Pe*2,Fu=Pe-2,He=16,wt="orange",$u=()=>{var E,z;const{reconciledPhrases:t,currentStationID:e,currentStage:n,currentVoice:r}=Te(S=>S.runtime),{columns:i,scale:a}=Te(S=>S.crawl),o=(z=(E=t[e])==null?void 0:E[n])==null?void 0:z[r],s=ni(o!=null?o:[]),l=s===""?" ":s;console.log(l);const u=te.useRef(null),c=te.useRef([]),h=te.useRef(null),[f,p]=te.useState([]),[m,y]=te.useState([]),b=te.useCallback(()=>{if(!c.current||!h.current||!l)return;const S=[],P=[];for(const I of l){const j=Tu(c.current,h.current,I);j&&(j.length<He&&j.unshift(...Array.from({length:He-j.length},()=>Array(j[0].length).fill(!1))),S.push(j),P.push(j[0].length))}p(S),y(P)},[l]);te.useEffect(()=>{(async()=>{const I=await(await fetch("fonts/wenquanyi_12pt.pcf")).arrayBuffer();u.current=I;const{allBitmaps:j,encData:A}=Iu(I);c.current=j,h.current=A,b()})()},[]),te.useEffect(()=>b(),[l]);const R=m.reduce((S,P)=>S+P,0),O=i-R,U=Math.floor(O/2),_=O-U;return d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",id:"crawl",style:{backgroundColor:"black"},viewBox:"0 0 ".concat(R*ce," ").concat(He*ce),width:R*ce*a,height:He*ce*a,children:[d.jsxs("defs",{children:[d.jsxs("filter",{id:"glow",children:[d.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),d.jsxs("feMerge",{children:[d.jsx("feMergeNode",{in:"coloredBlur"}),d.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),d.jsxs("filter",{id:"neon",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[d.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"2",floodColor:wt,floodOpacity:"1"}),d.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"5",floodColor:wt,floodOpacity:"0.7"}),d.jsx("feDropShadow",{dx:"0",dy:"0",stdDeviation:"10",floodColor:wt,floodOpacity:"0.4"})]}),d.jsxs("filter",{id:"orange-glow",filterUnits:"userSpaceOnUse",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[d.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"5",result:"blur5"}),d.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"10",result:"blur10"}),d.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"20",result:"blur20"}),d.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"30",result:"blur30"}),d.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"50",result:"blur50"}),d.jsxs("feMerge",{result:"blur-merged",children:[d.jsx("feMergeNode",{in:"blur10"}),d.jsx("feMergeNode",{in:"blur20"}),d.jsx("feMergeNode",{in:"blur30"}),d.jsx("feMergeNode",{in:"blur50"})]}),d.jsx("feColorMatrix",{result:"red-blur",in:"blur-merged",type:"matrix",values:"1 0 0 0 0\n                                0 0.65 0 0 0\n                                0 0 0.1 0 0\n                                0 0 0 1 0"}),d.jsxs("feMerge",{children:[d.jsx("feMergeNode",{in:"red-blur"})," ",d.jsx("feMergeNode",{in:"blur5"})," ",d.jsx("feMergeNode",{in:"SourceGraphic"})," "]})]})]}),O>0&&d.jsx("g",{id:"remaining-left",children:Array(U).fill(0).map((S,P)=>Array(He).fill(0).map((I,j)=>d.jsx(Kt,{x:P*ce+Pe,y:j*ce+Pe},"rl".concat(P).concat(j))))}),f.map((S,P)=>d.jsx("g",{id:l.at(P),children:S.map((I,j)=>I.map((A,M)=>d.jsx(Kt,{x:M*ce+m.slice(0,P).reduce((W,X)=>W+X,0)*ce+Pe+(O>0?U*ce:0),y:j*ce+Pe,on:A},l.at(P)+M.toString()+j.toString())))},"".concat(l.at(P),"+").concat(P,"}"))),O>0&&d.jsx("g",{id:"remaining-right",children:Array(_).fill(0).map((S,P)=>Array(He).fill(0).map((I,j)=>d.jsx(Kt,{x:(U+R+P)*ce+Pe,y:j*ce+Pe},"rr".concat(P).concat(j))))})]})},Kt=({x:t,y:e,on:n=!1})=>d.jsx("circle",{cx:t,cy:e,r:Fu,fill:n?wt:"dimgray",filter:n?"url(#neon)":void 0});function Bc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"},child:[]}]})(t)}function Wc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"},child:[]}]})(t)}function Hc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7 1.62-4.33L19.12 17h-3.24z"},child:[]}]})(t)}function Uc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"},child:[]}]})(t)}function Xc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"},child:[]}]})(t)}function Vc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(t)}function Yc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(t)}function Gc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"},child:[]}]})(t)}function qc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(t)}function Kc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(t)}function Bu(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.566.566 0 0 0-.18-.03c-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46a.5.5 0 0 0 .61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(t)}function Jc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11A2.98 2.98 0 0 1 22 15c0 1.65-1.35 3-3 3H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95A5.469 5.469 0 0 1 12 6m0-2C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96A7.49 7.49 0 0 0 12 4z"},child:[]}]})(t)}function Qc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M14.17 5 19 9.83V19H5V5h9.17m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9.83c0-.53-.21-1.04-.59-1.41l-4.83-4.83c-.37-.38-.88-.59-1.41-.59zM7 15h10v2H7v-2zm0-4h10v2H7v-2zm0-4h7v2H7V7z"},child:[]}]})(t)}function Zc(t){return se({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6zm-2 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},child:[]}]})(t)}function Wu(){var f,p,m;const{t}=fn(),e=Rn(),{reconciledPhrases:n,currentStationID:r,currentStage:i,currentVoice:a}=Te(y=>y.runtime),{columns:o,scale:s}=Te(y=>y.crawl),l=(p=(f=n[r])==null?void 0:f[i])==null?void 0:p[a],u=(m=ni(l!=null?l:[]))!=null?m:"No content",[c,h]=te.useState(!1);return d.jsxs(it,{children:[d.jsx(Qt,{icon:d.jsx(Bu,{}),"aria-label":t("Settings"),onClick:()=>h(!0),style:{position:"absolute",right:"10px",top:"10px"}}),d.jsxs(fa,{size:"xl",isOpen:c,onClose:()=>h(!1),children:[d.jsx(xr,{}),d.jsxs(ha,{children:[d.jsx(wr,{children:t("Settings")}),d.jsxs(br,{children:[d.jsx(ar,{label:"content",children:d.jsx(Rl,{children:u})}),d.jsx(ar,{label:"scale",children:d.jsx(_l,{defaultValue:s,value:s,min:.1,max:1,step:.1,onThrottledChange:y=>e(du(y))})})]}),d.jsx(Cr,{})]})]})]})}const Hu=te.lazy(()=>Xr(()=>import("./page-header-C2gHcSLH.js"),__vite__mapDeps([0,1,2]))),Uu=te.lazy(()=>Xr(()=>import("./stage-Cbp2ilsJ.js"),__vite__mapDeps([3,1,2])));function Xu(){const{t}=fn();Rn();const{project:{style:e}}=Te(n=>n.param);return d.jsx(ru,{children:d.jsxs(Al,{children:[d.jsx(Hu,{}),d.jsx(jl,{children:d.jsxs(Ce,{flexDirection:"row",children:[d.jsx(it,{style:{width:"200px",height:"calc(100vh - 40px)",overflowY:"auto"},children:d.jsx(_u,{})}),d.jsxs(Ce,{width:"calc(100% - 200px)",flexDirection:"column",children:[d.jsx(Wu,{}),d.jsx(it,{style:{overflow:"scroll"},children:d.jsx($u,{})}),d.jsx(Jt,{marginTop:"2"}),e===Nn.ShanghaiMetro&&d.jsx(Uu,{})]})]})})]})})}const Vu={about:{rma:"Rail Map Announcer"}},Yu={header:Vu},Gu={about:{rma:"地铁线路图放送机"}},qu={header:Gu},Ku={about:{rma:"地鐵線路圖放送機"}},Ju={header:Ku},Qu={about:{rma:"地下鉄路線図放送機"}},Zu={header:Qu},ec={about:{rma:"지하철 노선도 안내원"}},tc={header:ec},nc=new ie.I18nBuilder().use(wa).withAppName("Rail Map Announcer").withLng(ie.getLanguage()).withResource("en",Yu).withResource("zh-Hans",qu).withResource("zh-Hant",Ju).withResource("ja",Zu).withResource("ko",tc).build(),rc="shmetro",ic={arr:{"wuu-CN-XiaotongNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",doorDirection:"left"},"zh-CN-XiaoqiuNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",doorDirection:"left"},"wuu-CN-YunzheNeural":{terminal:"Shanghai Railway Station",terminalPinyin:"上海火车站",doorDirection:"left"}},dep:{"wuu-CN-XiaotongNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",nextDoorDirection:"left",lineName:"1号线",lineNamePinyin:"1号线",noteLastTrain:!0,loop:"none",loopTerminal:!1},"zh-CN-XiaoqiuNeural":{terminal:"上海火车站",terminalPinyin:"上海火车站",nextDoorDirection:"left",lineName:"1号线",lineNamePinyin:"1号线",noteLastTrain:!0,loop:"none",loopTerminal:!1},"wuu-CN-YunzheNeural":{terminal:"Shanghai Railway Station",terminalPinyin:"Shanghai Railway Station",nextDoorDirection:"left",lineName:"Line 1",lineNamePinyin:"Line 1"}},mdw:{"wuu-CN-XiaotongNeural":{caution:!1},"zh-CN-XiaoqiuNeural":{caution:!1},"wuu-CN-YunzheNeural":{}}},ac={iwf6:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},dep:{"wuu-CN-XiaotongNeural":{next:"外环路",nextPinyin:"外环路",int:[]},"zh-CN-XiaoqiuNeural":{next:"外环路",nextPinyin:"外环路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Waihuanlu",nextPinyin:"Waihuanlu",int:[],noteLastTrain:!1}}},l1mz:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"外环路",namePinyin:"外环路"},"zh-CN-XiaoqiuNeural":{name:"外环路",namePinyin:"外环路"},"wuu-CN-YunzheNeural":{name:"Waihuanlu",namePinyin:"Waihuanlu"}},dep:{"wuu-CN-XiaotongNeural":{next:"莲花路",nextPinyin:"莲花路",int:[]},"zh-CN-XiaoqiuNeural":{next:"莲花路",nextPinyin:"莲花路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Lianhua Road ",nextPinyin:"Lianhua Road ",int:[],noteLastTrain:!1}}},qzjx:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"莲花路",namePinyin:"莲花路"},"zh-CN-XiaoqiuNeural":{name:"莲花路",namePinyin:"莲花路"},"wuu-CN-YunzheNeural":{name:"Lianhua Road ",namePinyin:"Lianhua Road "}},dep:{"wuu-CN-XiaotongNeural":{next:"锦江乐园",nextPinyin:"锦江乐园",int:[]},"zh-CN-XiaoqiuNeural":{next:"锦江乐园",nextPinyin:"锦江乐园",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"JinJiang Park",nextPinyin:"JinJiang Park",int:[],noteLastTrain:!1}}},jsat:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"锦江乐园",namePinyin:"锦江乐园"},"zh-CN-XiaoqiuNeural":{name:"锦江乐园",namePinyin:"锦江乐园"},"wuu-CN-YunzheNeural":{name:"JinJiang Park",namePinyin:"JinJiang Park"}},dep:{"wuu-CN-XiaotongNeural":{next:"上海南站",nextPinyin:"上海南站",int:[["3号线","15号线"],["金山铁路"]]},"zh-CN-XiaoqiuNeural":{next:"上海南站",nextPinyin:"上海南站",int:[["3号线","15号线"],["金山铁路"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Shanghai South Railway Station",nextPinyin:"Shanghai South Railway Station",int:[["Line 3","Line 15"],["Jingshan Railway"]],noteLastTrain:!1}}},srpy:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"上海南站",namePinyin:"上海南站"},"zh-CN-XiaoqiuNeural":{name:"上海南站",namePinyin:"上海南站"},"wuu-CN-YunzheNeural":{name:"Shanghai South Railway Station",namePinyin:"Shanghai South Railway Station"}},dep:{"wuu-CN-XiaotongNeural":{next:"漕宝路",nextPinyin:"漕宝路",int:[["12号线"]]},"zh-CN-XiaoqiuNeural":{next:"漕宝路",nextPinyin:"漕宝路",int:[["12号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Caobao Road",nextPinyin:"Caobao Road",int:[["Line 12"]],noteLastTrain:!1}}},x9gu:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"漕宝路",namePinyin:"漕宝路"},"zh-CN-XiaoqiuNeural":{name:"漕宝路",namePinyin:"漕宝路"},"wuu-CN-YunzheNeural":{name:"Caobao Road",namePinyin:"Caobao Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"上海体育馆",nextPinyin:"上海体育馆",int:[["4号线"]]},"zh-CN-XiaoqiuNeural":{next:"上海体育馆",nextPinyin:"上海体育馆",int:[["4号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Shanghai Indoor Stadium",nextPinyin:"Shanghai Indoor Stadium",int:[["Line 4"]],noteLastTrain:!1}}},k9k5:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"上海体育馆",namePinyin:"上海体育馆"},"zh-CN-XiaoqiuNeural":{name:"上海体育馆",namePinyin:"上海体育馆"},"wuu-CN-YunzheNeural":{name:"Shanghai Indoor Stadium",namePinyin:"Shanghai Indoor Stadium"}},dep:{"wuu-CN-XiaotongNeural":{next:"徐家汇",nextPinyin:"徐家汇",int:[["9号线","11号线"]]},"zh-CN-XiaoqiuNeural":{next:"徐家汇",nextPinyin:"徐家汇",int:[["9号线","11号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Xujiahui",nextPinyin:"Xujiahui",int:[["Line 9","Line 11"]],noteLastTrain:!1}}},j2kn:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"徐家汇",namePinyin:"徐家汇"},"zh-CN-XiaoqiuNeural":{name:"徐家汇",namePinyin:"徐家汇"},"wuu-CN-YunzheNeural":{name:"Xujiahui",namePinyin:"Xujiahui"}},dep:{"wuu-CN-XiaotongNeural":{next:"衡山路",nextPinyin:"衡山路",int:[]},"zh-CN-XiaoqiuNeural":{next:"衡山路",nextPinyin:"衡山路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Hengshan Road",nextPinyin:"Hengshan Road",int:[],noteLastTrain:!1}}},lcgp:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"衡山路",namePinyin:"衡山路"},"zh-CN-XiaoqiuNeural":{name:"衡山路",namePinyin:"衡山路"},"wuu-CN-YunzheNeural":{name:"Hengshan Road",namePinyin:"Hengshan Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"常熟路",nextPinyin:"常熟路",int:[["7号线"]]},"zh-CN-XiaoqiuNeural":{next:"常熟路",nextPinyin:"常熟路",int:[["7号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Changshu Road",nextPinyin:"Changshu Road",int:[["Line 7"]],noteLastTrain:!1}}},h3vs:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"常熟路",namePinyin:"常熟路"},"zh-CN-XiaoqiuNeural":{name:"常熟路",namePinyin:"常熟路"},"wuu-CN-YunzheNeural":{name:"Changshu Road",namePinyin:"Changshu Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"陕西南路",nextPinyin:"陕西南路",int:[["10号线","12号线"]]},"zh-CN-XiaoqiuNeural":{next:"陕西南路",nextPinyin:"陕西南路",int:[["10号线","12号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"South Shaanxi Road",nextPinyin:"South Shaanxi Road",int:[["Line 10","Line 12"]],noteLastTrain:!1}}},jjh7:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"陕西南路",namePinyin:"陕西南路"},"zh-CN-XiaoqiuNeural":{name:"陕西南路",namePinyin:"陕西南路"},"wuu-CN-YunzheNeural":{name:"South Shaanxi Road",namePinyin:"South Shaanxi Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"一大会址·黄陂南路",nextPinyin:"一大会址·黄陂南路",int:[["14号线"]]},"zh-CN-XiaoqiuNeural":{next:"一大会址·黄陂南路",nextPinyin:"一大会址·黄陂南路",int:[["14号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Site of the First CPC National\\Congress · South Huangpi Road",nextPinyin:"Site of the First CPC National\\Congress · South Huangpi Road",int:[["Line 14"]],noteLastTrain:!1}}},wbtv:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"一大会址·黄陂南路",namePinyin:"一大会址·黄陂南路"},"zh-CN-XiaoqiuNeural":{name:"一大会址·黄陂南路",namePinyin:"一大会址·黄陂南路"},"wuu-CN-YunzheNeural":{name:"Site of the First CPC National\\Congress · South Huangpi Road",namePinyin:"Site of the First CPC National\\Congress · South Huangpi Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"人民广场",nextPinyin:"人民广场",int:[["2号线","8号线"]]},"zh-CN-XiaoqiuNeural":{next:"人民广场",nextPinyin:"人民广场",int:[["2号线","8号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"People's Square",nextPinyin:"People's Square",int:[["Line 2","Line 8"]],noteLastTrain:!1}}},kaxg:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"人民广场",namePinyin:"人民广场"},"zh-CN-XiaoqiuNeural":{name:"人民广场",namePinyin:"人民广场"},"wuu-CN-YunzheNeural":{name:"People's Square",namePinyin:"People's Square"}},dep:{"wuu-CN-XiaotongNeural":{next:"新闸路",nextPinyin:"新闸路",int:[]},"zh-CN-XiaoqiuNeural":{next:"新闸路",nextPinyin:"新闸路",int:[]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"XinZha Road",nextPinyin:"XinZha Road",int:[],noteLastTrain:!1}}},"7x7k":{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"新闸路",namePinyin:"新闸路"},"zh-CN-XiaoqiuNeural":{name:"新闸路",namePinyin:"新闸路"},"wuu-CN-YunzheNeural":{name:"XinZha Road",namePinyin:"XinZha Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"汉中路",nextPinyin:"汉中路",int:[["12号线","13号线"]]},"zh-CN-XiaoqiuNeural":{next:"汉中路",nextPinyin:"汉中路",int:[["12号线","13号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Hanzhong Road",nextPinyin:"Hanzhong Road",int:[["Line 12","Line 13"]],noteLastTrain:!1}}},qnbj:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"汉中路",namePinyin:"汉中路"},"zh-CN-XiaoqiuNeural":{name:"汉中路",namePinyin:"汉中路"},"wuu-CN-YunzheNeural":{name:"Hanzhong Road",namePinyin:"Hanzhong Road"}},dep:{"wuu-CN-XiaotongNeural":{next:"上海火车站",nextPinyin:"上海火车站",int:[["3号线","4号线"]]},"zh-CN-XiaoqiuNeural":{next:"上海火车站",nextPinyin:"上海火车站",int:[["3号线","4号线"]]},"wuu-CN-YunzheNeural":{welcomeAbroad:!1,next:"Shanghai Railway Station",nextPinyin:"Shanghai Railway Station",int:[["Line 3","Line 4"]],noteLastTrain:!1}}},sd6y:{mdw:{"wuu-CN-XiaotongNeural":{},"zh-CN-XiaoqiuNeural":{},"wuu-CN-YunzheNeural":{}},arr:{"wuu-CN-XiaotongNeural":{name:"上海火车站",namePinyin:"上海火车站"},"zh-CN-XiaoqiuNeural":{name:"上海火车站",namePinyin:"上海火车站"},"wuu-CN-YunzheNeural":{name:"Shanghai Railway Station",namePinyin:"Shanghai Railway Station"}}}},oc={iwf6:{name:"莘庄"},l1mz:{name:"外环路"},qzjx:{name:"莲花路"},jsat:{name:"锦江乐园"},srpy:{name:"上海南站"},x9gu:{name:"漕宝路"},k9k5:{name:"上海体育馆"},j2kn:{name:"徐家汇"},lcgp:{name:"衡山路"},h3vs:{name:"常熟路"},jjh7:{name:"陕西南路"},wbtv:{name:"一大会址·黄陂南路"},kaxg:{name:"人民广场"},"7x7k":{name:"新闸路"},qnbj:{name:"汉中路"},sd6y:{name:"上海火车站"}},sc={style:rc,baseVariants:ic,stations:ac,metadata:oc};var B=(t=>(t.NextStopTerminal="NextStopTerminal",t.TerminalAllGetOffLeft="TerminalAllGetOffLeft",t.TerminalAllGetOffRight="TerminalAllGetOffRight",t.Arrive="Arrive",t.DoorOpenLeft="DoorOpenLeft",t.DoorOpenRight="DoorOpenRight",t.TheTerminalOfThisTrain="TheTerminalOfThisTrain",t.NextStop="NextStop",t.InterchangeAvailable="InterchangeAvailable",t.OutOfStationInterchangeAvailable="OutOfStationInterchangeAvailable",t.OutOfStationInterchangeAvailableEnglish2="OutOfStationInterchangeAvailableEnglish2",t.OutOfSystemInterchangeAvailable="OutOfSystemInterchangeAvailable",t.NoteLastTrain="NoteLastTrain",t.LeaveLoveSeat="LeaveLoveSeat",t.Caution="Caution",t.Loop="Loop",t.InnerLoop="InnerLoop",t.OuterLoop="OuterLoop",t))(B||{});const lc={[N.Arrival]:{[g.ChineseMandarinSimplified]:{NextStopTerminal:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"终点站",pinyin:"终点站",rate:"+18.00%"},Arrive:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"到了",pinyin:"到了",rate:"+18.00%"},TerminalAllGetOffLeft:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"请全体乘客在屏蔽门完全打开后，从左边车门下车。",pinyin:"请全体乘客在屏蔽门完全打开后，从左边车门下车。",rate:"+18.00%"},TerminalAllGetOffRight:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"请全体乘客在屏蔽门完全打开后，从右边车门下车。",pinyin:"请全体乘客在屏蔽门完全打开后，从右边车门下车。",rate:"+18.00%"},DoorOpenLeft:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"}},[g.ChineseWuSimplifiedXiaotong]:{NextStopTerminal:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"终点站",rate:"+18.00%",pinyin:"终点站"},Arrive:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"到了",pinyin:"到了",rate:"+18.00%"},TerminalAllGetOffLeft:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"请所有乘客勒屏蔽门完全打开后，从左边车门下车。",pinyin:"请所有乘客勒屏蔽门完全打开后，从左边车门下车。",rate:"+18.00%"},TerminalAllGetOffRight:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"请所有乘客勒屏蔽门完全打开后，从右边车门下车。",pinyin:"请所有乘客勒屏蔽门完全打开后，从右边车门下车。",rate:"+18.00%"},DoorOpenLeft:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"}},[g.ChineseWuSimplifiedYunzhe]:{NextStopTerminal:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"the terminal station",pinyin:"the terminal station"},Arrive:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"We are now at",pinyin:"We are now at"},TerminalAllGetOffLeft:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Please get ready to the exit from the left side. ",pinyin:"Please get ready to the exit from the left side. "},TerminalAllGetOffRight:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Please get ready to the exit from the right side. ",pinyin:"Please get ready to the exit from the right side. "},DoorOpenLeft:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Doors will open on the left",pinyin:"Doors will open on the left"},DoorOpenRight:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Doors will open on the right",pinyin:"Doors will open on the right"}}},[N.Departure]:{[g.ChineseMandarinSimplified]:{TheTerminalOfThisTrain:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"本次列车终点站",pinyin:"本次列车终点站",rate:"+18.00%"},InnerLoop:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"本次列车内圈运行",pinyin:"本次列车内圈运行",rate:"+18.00%"},OuterLoop:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"本次列车外圈运行",pinyin:"本次列车外圈运行",rate:"+18.00%"},Loop:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"本线为环线",pinyin:"本线为环线",rate:"+18.00%"},NextStop:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"下一站",pinyin:"下一站",rate:"+18.00%"},NextStopTerminal:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"终点站",pinyin:"终点站",rate:"+18.00%"},DoorOpenLeft:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"},InterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"可换乘",pinyin:"可换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfStationInterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"手持交通卡的乘客，可在出站后30分钟内，免费换乘",pinyin:"手持交通卡的乘客，可在出站后30分钟内，免费换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfSystemInterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"可转乘",pinyin:"可转乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},NoteLastTrain:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"请注意换乘列车的首末班车时间。",pinyin:"请注意换乘列车的首末班车时间。",rate:"+18.00%"}},[g.ChineseWuSimplifiedXiaotong]:{TheTerminalOfThisTrain:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"本趟列车额终点站是",pinyin:"本趟列车额终点站是",rate:"+18.00%"},InnerLoop:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"本趟列车内圈运行",pinyin:"本趟列车内圈运行",rate:"+18.00%"},OuterLoop:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"本趟列车外圈运行",pinyin:"本趟列车外圈运行",rate:"+18.00%"},Loop:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"本线为环线",pinyin:"本线为环线",rate:"+18.00%"},NextStop:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"下一站",pinyin:"下一站",rate:"+18.00%"},NextStopTerminal:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"终点站",pinyin:"终点站",rate:"+18.00%"},DoorOpenLeft:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"开左边门",pinyin:"开左边门",rate:"+18.00%"},DoorOpenRight:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"开右边门",pinyin:"开右边门",rate:"+18.00%"},InterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"可以换乘",pinyin:"可以换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfStationInterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"拿着交通卡的乘客，好勒出站后30分钟内，免费换乘",pinyin:"拿着交通卡的乘客，好勒出站后30分钟内，免费换乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},OutOfSystemInterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"可以转乘",pinyin:"可以转乘",rate:"+18.00%",contour:"(50%, +0%) (100%, +30%)"},NoteLastTrain:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedXiaotong,text:"请注意换乘列车额首末班车辰光。",pinyin:"请注意换乘列车额首末班车辰光。",rate:"+18.00%"}},[g.ChineseWuSimplifiedYunzhe]:{TheTerminalOfThisTrain:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"The terminal is",pinyin:"The terminal is"},NextStop:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Next station is",pinyin:"Next station is"},NextStopTerminal:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"the terminal station",pinyin:"the terminal station"},DoorOpenLeft:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Doors will open on the left",pinyin:"Doors will open on the left"},DoorOpenRight:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Doors will open on the right",pinyin:"Doors will open on the right"},InterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Your can transfer to",pinyin:"Your can transfer to"},OutOfStationInterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"Passengers holding public transportation card, may transfer to",pinyin:"Passengers holding public transportation card, may transfer to",contour:"(60%, +0%) (100%, +30%)"},OutOfStationInterchangeAvailableEnglish2:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"within 30 minutes after getting out of the station. ",pinyin:"within 30 minutes after getting out of the station. "},OutOfSystemInterchangeAvailable:{type:v.Predefined,voiceName:g.ChineseWuSimplifiedYunzhe,text:"or take the",pinyin:"or take the",contour:"(50%, +0%) (100%, +30%)"}}},[N.Midway]:{[g.ChineseMandarinSimplified]:{LeaveLoveSeat:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"请把爱心专座留给有需要的乘客。",pinyin:"请把爱心专座留给有需要的乘客。",rate:"+18.00%"},Caution:{type:v.Predefined,voiceName:g.ChineseMandarinSimplified,text:"列车运行时，请站稳扶好，不要玩手机，注意脚下安全。",pinyin:"列车运行时，请站稳扶好，不要玩手机，注意脚下安全。",rate:"+18.00%"}}}},K=(t,e,n)=>{var i,a;const r=(a=(i=lc[t])==null?void 0:i[e])==null?void 0:a[n];if(!r)throw new Error("Predefined phrase must exist in predefinedPhrases, stage: ".concat(t,", voiceName: ").concat(e,", predefinedPhraseType: ").concat(n,"."));return{...r,subType:n}},uc=t=>{const e={};for(const n in t.stations){e[n]={};for(const r in t.stations[n]){e[n][r]={};for(const i in t.stations[n][r]){const a=t.stations[n][r][i];if(!a)throw new Error("Should never happen!");const o=fc[t.style].reconcile(r,i,a,t.baseVariants);e[n][r][i]=o}}}return e},cc=(t,e,n)=>{var r,i,a,o,s,l,u,c;if(t===N.Arrival){if(((i=(r=n[N.Arrival])==null?void 0:r[e])==null?void 0:i.terminal)===void 0)throw new Error("Terminal must exist in baseVariants, stage: ".concat(N.Arrival,", voiceName: ").concat(e,"."));if(((o=(a=n[N.Arrival])==null?void 0:a[e])==null?void 0:o.doorDirection)===void 0)throw new Error("Door direction must exist in baseVariants, stage: ".concat(N.Arrival,", voiceName: ").concat(e,"."))}if(t===N.Departure){if(((l=(s=n[N.Departure])==null?void 0:s[e])==null?void 0:l.terminal)===void 0)throw new Error("Terminal must exist in baseVariants, stage: ".concat(N.Departure,", voiceName: ").concat(e,"."));if(((c=(u=n[N.Departure])==null?void 0:u[e])==null?void 0:c.nextDoorDirection)===void 0)throw new Error("Next door direction must exist in baseVariants, stage: ".concat(N.Departure,", voiceName: ").concat(e,"."))}},dc=(t,e,n,r)=>{var o,s,l,u,c,h,f,p,m,y,b,R,O,U,_,E,z,S,P,I,j,A;cc(t,e,r);const i=e===g.ChineseWuSimplifiedYunzhe?void 0:"+18.00%",a=[];if(t===N.Arrival){e===g.ChineseWuSimplifiedYunzhe&&(a.push(K(t,e,B.Arrive)),a.push(D(e,L.BreakWeak)));const M=((o=n.terminal)!=null?o:r[N.Arrival][e].terminal)===n.name;M&&(a.push(K(t,e,B.NextStopTerminal)),a.push(D(e,L.BreakWeak))),a.push({type:v.Customized,voiceName:e,text:n.name,pinyin:n.namePinyin,rate:i}),a.push(D(e,e===g.ChineseWuSimplifiedYunzhe?L.BreakStrong:L.BreakWeak)),[g.ChineseMandarinSimplified,g.ChineseWuSimplifiedXiaotong].includes(e)&&(a.push(K(t,e,B.Arrive)),a.push(D(e,L.BreakStrong)));const W=(l=(s=n.doorDirection)!=null?s:r[N.Arrival][e].doorDirection)!=null?l:"left";if(M){const X=W==="left"?B.TerminalAllGetOffLeft:B.TerminalAllGetOffRight;if(a.push(K(t,e,X)),r[N.Arrival][e].thanksForTaking){const F={[g.ChineseMandarinSimplified]:"感谢您乘坐".concat(r[N.Arrival][e].thanksForTaking,"，祝您旅途愉快。"),[g.ChineseWuSimplifiedXiaotong]:"谢谢侬搭乘".concat(r[N.Arrival][e].thanksForTaking,"，阿拉下趟再会。"),[g.ChineseWuSimplifiedYunzhe]:"Thanks for taking ".concat(r[N.Arrival][e].thanksForTaking,", see you next time.")}[e];a.push({type:v.Customized,voiceName:e,text:F,pinyin:r[N.Arrival][e].thanksForTakingPinyin,rate:i})}}else{const X=W==="left"?B.DoorOpenLeft:B.DoorOpenRight;a.push(K(t,e,X)),a.push(D(e,L.BreakStrong))}}else if(t===N.Departure){const M=(u=n.welcomeAbroad)!=null?u:r[N.Departure][e].welcomeAbroad,W=(c=n.lineName)!=null?c:r[N.Departure][e].lineName;if(M&&W){const le={[g.ChineseMandarinSimplified]:"欢迎乘坐".concat(M).concat(W),[g.ChineseWuSimplifiedXiaotong]:"欢迎搭乘".concat(M).concat(W),[g.ChineseWuSimplifiedYunzhe]:"Welcome aboard ".concat(M," ").concat(W)}[e],V=(h=n.welcomeAbroadPinyin)!=null?h:r[N.Departure][e].welcomeAbroadPinyin,ye=(f=n.lineNamePinyin)!=null?f:r[N.Departure][e].lineNamePinyin,he={[g.ChineseMandarinSimplified]:"欢迎乘坐".concat(V).concat(ye),[g.ChineseWuSimplifiedXiaotong]:"欢迎搭乘".concat(V).concat(ye),[g.ChineseWuSimplifiedYunzhe]:"Welcome aboard ".concat(V," ").concat(ye)}[e];a.push({type:v.Customized,voiceName:e,text:le,pinyin:he,rate:i}),a.push(D(e,L.BreakStrong))}const X=(p=n.loop)!=null?p:r[N.Departure][e].loop,F=(m=n.terminal)!=null?m:r[N.Arrival][e].terminal,Q=(y=n.terminal)!=null?y:r[N.Arrival][e].terminalPinyin;if(!X)a.push(K(t,e,B.TheTerminalOfThisTrain)),a.push(D(e,L.BreakWeak)),a.push({type:v.Customized,voiceName:e,text:F,pinyin:Q,rate:i}),a.push(D(e,L.BreakStrong));else if((X==="inner"||X==="outer")&&(e===g.ChineseMandarinSimplified||e===g.ChineseWuSimplifiedXiaotong)){const le=X===!1?B.Loop:X==="inner"?B.InnerLoop:B.OuterLoop;a.push(K(t,e,le)),a.push(D(e,L.BreakStrong)),((b=n.loopTerminal)!=null?b:r[N.Departure][e].loopTerminal)&&(a.push(K(t,e,B.NextStopTerminal)),a.push(D(e,L.BreakWeak)),a.push({type:v.Customized,voiceName:e,text:F,pinyin:Q,rate:i}),a.push(D(e,L.BreakStrong)))}a.push(K(t,e,B.NextStop)),a.push(D(e,L.BreakWeak)),n.next===F&&(a.push(K(t,e,B.NextStopTerminal)),a.push(D(e,L.BreakWeak))),a.push({type:v.Customized,voiceName:e,text:n.next,pinyin:n.nextPinyin,rate:i}),a.push(D(e,L.BreakStrong));const G=((O=(R=n.nextDoorDirection)!=null?R:r[N.Departure][e].nextDoorDirection)!=null?O:"left")==="left"?B.DoorOpenLeft:B.DoorOpenRight;a.push(K(t,e,G)),a.push(D(e,L.BreakStrong));const $=n.int;$!=null&&$.flat().length&&(((_=(U=$.at(0))==null?void 0:U.length)!=null?_:0)>0&&(a.push(K(t,e,B.InterchangeAvailable)),a.push(D(e,L.BreakWeak)),a.push(...$.at(0).map(V=>[{type:v.Customized,voiceName:e,text:V,pinyin:V,rate:i},D(e,L.BreakWeak)]).flat()),a.pop(),a.push(D(e,L.BreakStrong))),((z=(E=$.at(1))==null?void 0:E.length)!=null?z:0)>0&&(a.push(K(t,e,B.OutOfStationInterchangeAvailable)),a.push(D(e,L.BreakWeak)),a.push(...$.at(1).map(V=>[{type:v.Customized,voiceName:e,text:V,pinyin:V,rate:i},D(e,L.BreakWeak)]).flat()),a.pop(),e===g.ChineseWuSimplifiedYunzhe?(a.push(D(e,L.BreakWeak)),a.push(K(t,e,B.OutOfStationInterchangeAvailableEnglish2))):a.push(D(e,L.BreakStrong))),((P=(S=$.at(2))==null?void 0:S.length)!=null?P:0)>0&&(a.push(K(t,e,B.OutOfSystemInterchangeAvailable)),a.push(D(e,L.BreakWeak)),a.push(...$.at(2).map(V=>[{type:v.Customized,voiceName:e,text:V,pinyin:V,rate:i},D(e,L.BreakWeak)]).flat()),a.pop(),a.push(D(e,L.BreakStrong))),((I=n.noteLastTrain)!=null?I:r[N.Departure][e].noteLastTrain)&&(e===g.ChineseMandarinSimplified||e===g.ChineseWuSimplifiedXiaotong)&&a.push(K(t,e,B.NoteLastTrain)))}else t===N.Midway&&(((j=n.leaveLoveSeat)!=null?j:r[N.Midway][e].leaveLoveSeat)&&a.push(K(t,e,B.LeaveLoveSeat)),((A=n.caution)!=null?A:r[N.Midway][e].caution)&&a.push(K(t,e,B.Caution)));return a},fc={[Nn.ShanghaiMetro]:{reconcile:dc}};function hc(t){Pu({predicate:(e,n,r)=>JSON.stringify(n.param.project)!==JSON.stringify(r.param.project),effect:(e,n)=>{const{project:r}=n.getState().param,i=uc(r);console.log(i),n.dispatch(mu(i));const a=n.getState().param;ie.storage.set(st.PARAM,JSON.stringify(a))}}),pc(t)}const pc=t=>{const e=ie.storage.get(st.PARAM);if(e){const n=JSON.parse(e);nt.debug("Get param from local storage: ".concat(e)),t.dispatch(dr(n.project)),t.dispatch(li(Object.keys(n.project.metadata)[0])),t.dispatch(ui(N.Departure))}else nt.warn("No param from local storage. Setting to default."),t.dispatch(dr(sc))};let hr;const gc=()=>{hr=os.createRoot(document.getElementById("root")),hr.render(d.jsx(x.StrictMode,{children:d.jsx(ba,{store:Lt,children:d.jsx(Ca,{i18n:nc,children:d.jsx(Xu,{})})})}))};ie.ready().then(()=>{hc(Lt),gc(),ie.injectUITools(),ie.event(ri.APP_LOAD,{}),wu(Lt)});export{ci as A,dr as B,li as C,ui as D,ri as E,Mc as F,Yc as G,Xc as H,Ae as I,Nc as J,Cc as K,Hc as L,Wc as M,Bc as N,kc as O,Ec as P,Ic as Q,ar as R,N as S,qc as T,Kc as U,g as V,Tc as W,mc as __vite_legacy_guard,Sc as a,_l as b,bc as c,Rl as d,wc as e,Rn as f,Te as g,_n as h,Dc as i,Pn as j,kt as k,Vc as l,Uc as m,zc as n,Gc as o,Zc as p,Qc as q,ie as r,Jc as s,Fc as t,Oc as u,$c as v,Pc as w,ou as x,nt as y,xc as z};
